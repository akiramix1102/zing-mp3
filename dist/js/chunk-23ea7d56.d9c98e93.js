(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23ea7d56"],{"10fa":function(e,t,a){"use strict";a("174c")},"174c":function(e,t,a){},"2b07":function(e,t,a){},"4ec9":function(e,t,a){"use strict";var i=a("6d61"),r=a("6566");e.exports=i("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r)},6566:function(e,t,a){"use strict";var i=a("9bf2").f,r=a("7c73"),n=a("e2cc"),l=a("0366"),s=a("19aa"),o=a("2266"),c=a("7dd0"),u=a("2626"),d=a("83ab"),h=a("f183").fastKey,p=a("69f3"),f=p.set,m=p.getterFor;e.exports={getConstructor:function(e,t,a,c){var u=e((function(e,i){s(e,u,t),f(e,{type:t,index:r(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=i&&o(i,e[c],{that:e,AS_ENTRIES:a})})),p=m(t),b=function(e,t,a){var i,r,n=p(e),l=g(e,t);return l?l.value=a:(n.last=l={index:r=h(t,!0),key:t,value:a,previous:i=n.last,next:void 0,removed:!1},n.first||(n.first=l),i&&(i.next=l),d?n.size++:e.size++,"F"!==r&&(n.index[r]=l)),e},g=function(e,t){var a,i=p(e),r=h(t);if("F"!==r)return i.index[r];for(a=i.first;a;a=a.next)if(a.key==t)return a};return n(u.prototype,{clear:function(){var e=this,t=p(e),a=t.index,i=t.first;while(i)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete a[i.index],i=i.next;t.first=t.last=void 0,d?t.size=0:e.size=0},delete:function(e){var t=this,a=p(t),i=g(t,e);if(i){var r=i.next,n=i.previous;delete a.index[i.index],i.removed=!0,n&&(n.next=r),r&&(r.previous=n),a.first==i&&(a.first=r),a.last==i&&(a.last=n),d?a.size--:t.size--}return!!i},forEach:function(e){var t,a=p(this),i=l(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:a.first){i(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!g(this,e)}}),n(u.prototype,a?{get:function(e){var t=g(this,e);return t&&t.value},set:function(e,t){return b(this,0===e?0:e,t)}}:{add:function(e){return b(this,e=0===e?0:e,e)}}),d&&i(u.prototype,"size",{get:function(){return p(this).size}}),u},setStrong:function(e,t,a){var i=t+" Iterator",r=m(t),n=m(i);c(e,t,(function(e,t){f(this,{type:i,target:e,state:r(e),kind:t,last:void 0})}),(function(){var e=n(this),t=e.kind,a=e.last;while(a&&a.removed)a=a.previous;return e.target&&(e.last=a=a?a.next:e.state.first)?"keys"==t?{value:a.key,done:!1}:"values"==t?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),a?"entries":"values",!a,!0),u(t)}}},"6d61":function(e,t,a){"use strict";var i=a("23e7"),r=a("da84"),n=a("94ca"),l=a("6eeb"),s=a("f183"),o=a("2266"),c=a("19aa"),u=a("861d"),d=a("d039"),h=a("1c7e"),p=a("d44e"),f=a("7156");e.exports=function(e,t,a){var m=-1!==e.indexOf("Map"),b=-1!==e.indexOf("Weak"),g=m?"set":"add",v=r[e],y=v&&v.prototype,F=v,C={},k=function(e){var t=y[e];l(y,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(b&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return b&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(b&&!u(e))&&t.call(this,0===e?0:e)}:function(e,a){return t.call(this,0===e?0:e,a),this})},D=n(e,"function"!=typeof v||!(b||y.forEach&&!d((function(){(new v).entries().next()}))));if(D)F=a.getConstructor(t,e,m,g),s.REQUIRED=!0;else if(n(e,!0)){var O=new F,S=O[g](b?{}:-0,1)!=O,j=d((function(){O.has(1)})),x=h((function(e){new v(e)})),w=!b&&d((function(){var e=new v,t=5;while(t--)e[g](t,t);return!e.has(-0)}));x||(F=t((function(t,a){c(t,F,e);var i=f(new v,t,F);return void 0!=a&&o(a,i[g],{that:i,AS_ENTRIES:m}),i})),F.prototype=y,y.constructor=F),(j||w)&&(k("delete"),k("has"),m&&k("get")),(w||S)&&k(g),b&&y.clear&&delete y.clear}return C[e]=F,i({global:!0,forced:F!=v},C),p(F,e),b||a.setStrong(F,e,m),F}},"7fd9":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"report-filter"},[a("div",{staticClass:"be-flex align-center"},[e.isPipeline?a("el-select",{staticClass:"filter-select",attrs:{"default-first-option":"","popper-class":"deal-popper"},model:{value:e.filters.setting,callback:function(t){e.$set(e.filters,"setting",t)},expression:"filters.setting"}},e._l(e.listSelection,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1):a("el-input",{staticClass:"border-input input-width-beedu-prefix custom-report-input custom-input",attrs:{placeholder:"Tìm kiếm..."},model:{value:e.groupFilters.search,callback:function(t){e.$set(e.groupFilters,"search",t)},expression:"groupFilters.search"}},[a("base-icon",{staticStyle:{"font-size":"12px"},attrs:{slot:"prefix",icon:"search"},slot:"prefix"})],1),a("el-button",{staticClass:"be-button-unset custom-button mr-2",on:{click:e.handleClick}},[a("span",{staticClass:"abicon"},[a("base-icon",{staticClass:"icon",attrs:{icon:"filter"}})],1),e._v(" Bộ lọc ")]),a("el-dropdown",{attrs:{trigger:"click",placement:"bottom-end","hide-timeout":500},on:{command:e.handleCommand}},[a("el-button",{staticClass:"be-button-unset custom-button"},[a("span",{staticClass:"abicon"},[a("base-icon",{staticClass:"icon",attrs:{icon:"sort"}})],1),e._v(" Sắp xếp ")]),a("el-dropdown-menu",{staticClass:"sort-menu-popper sort-deal",attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.sorts,(function(t,i){return a("el-dropdown-item",{key:i,class:{active:e.groupFilters.sortType===t.command},attrs:{command:t.command,divided:t.divided}},[a("span",{staticClass:"be-flex"},[a("span",{staticClass:"be-flex-item"},[e._v(" "+e._s(t.label)+" ")])])])})),1)],1)],1),a("popup-filter-deal",{attrs:{filters:e.groupFilters},on:{change:e.handeChangeFilters,reset:e.handleReset}})],1)},r=[],n=a("f3f3"),l=a("276c"),s=a("e954"),o=a("920b"),c=a("92a6"),u=(a("ac1f"),a("841c"),a("b0c0"),a("9ab4")),d=a("9f48"),h=a("2ef0"),p=a("1b40"),f=a("4bb5"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-popup",{attrs:{name:"filter-deal",width:"772px",open:e.handleOpen,close:e.handleClose,hiddenFooter:!0}},[a("template",{slot:"title"},[e._v("Bộ lọc")]),a("el-form",{ref:"formData",staticClass:"form-validate-custom",attrs:{model:e.formData,rules:e.rules}},[a("el-row",{staticClass:"be-flex"},[a("el-col",[a("el-form-item",{attrs:{label:"Giá trị",prop:"dealValue"}},[a("div",{staticClass:"row-dash"},[a("el-input",{attrs:{placeholder:"Từ"},on:{change:function(t){return e.handleChangeNumber("fromDealValue")}},model:{value:e.groupFilter.fromDealValue,callback:function(t){e.$set(e.groupFilter,"fromDealValue",t)},expression:"groupFilter.fromDealValue"}}),a("i",{staticClass:"el-icon-minus"}),a("el-input",{attrs:{placeholder:"Đến"},on:{change:function(t){return e.handleChangeNumber("toDealValue")}},model:{value:e.groupFilter.toDealValue,callback:function(t){e.$set(e.groupFilter,"toDealValue",t)},expression:"groupFilter.toDealValue"}})],1)]),a("el-form-item",{attrs:{label:"Trạng thái"}},[a("el-select",{attrs:{clearable:"",placeholder:"Chọn trạng thái"},model:{value:e.groupFilter.dealStatus,callback:function(t){e.$set(e.groupFilter,"dealStatus",t)},expression:"groupFilter.dealStatus"}},e._l(e.listStatus,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"Pipeline"}},[a("el-select",{attrs:{clearable:"dealPage"===e.$route.name,placeholder:"Chọn pipeline"},on:{change:e.handleChangePipeline},model:{value:e.groupFilter.pipelineId,callback:function(t){e.$set(e.groupFilter,"pipelineId",t)},expression:"groupFilter.pipelineId"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:function(){return e.loadMore("pipeline")},expression:"() => loadMore('pipeline')"}],attrs:{"infinite-scroll-delay":"500"}},e._l(e.listPipeline,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)])],1),a("el-form-item",{attrs:{label:"Giai đoạn"}},[a("el-select",{attrs:{clearable:"",placeholder:"Chọn giai đoạn"},model:{value:e.groupFilter.currentStageId,callback:function(t){e.$set(e.groupFilter,"currentStageId",t)},expression:"groupFilter.currentStageId"}},e._l(e.listStagePipeline,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"Ngày tạo"}},[a("div",{staticClass:"row-dash"},[a("el-date-picker",{attrs:{format:"dd/MM/yyyy","value-format":"yyyy-MM-dd",type:"date",placeholder:"Từ ngày"},model:{value:e.groupFilter.fromCreatedAt,callback:function(t){e.$set(e.groupFilter,"fromCreatedAt",t)},expression:"groupFilter.fromCreatedAt"}}),a("i",{staticClass:"el-icon-minus"}),a("el-date-picker",{attrs:{format:"dd/MM/yyyy","value-format":"yyyy-MM-dd",type:"date","picker-options":e.toCreatedAt,placeholder:"Đến ngày"},model:{value:e.groupFilter.toCreatedAt,callback:function(t){e.$set(e.groupFilter,"toCreatedAt",t)},expression:"groupFilter.toCreatedAt"}})],1)]),a("el-form-item",{attrs:{label:"Ngày chốt dự kiến"}},[a("div",{staticClass:"row-dash"},[a("el-date-picker",{attrs:{format:"dd/MM/yyyy","value-format":"yyyy-MM-dd",type:"date",placeholder:"Từ ngày"},model:{value:e.groupFilter.fromCloseDate,callback:function(t){e.$set(e.groupFilter,"fromCloseDate",t)},expression:"groupFilter.fromCloseDate"}}),a("i",{staticClass:"el-icon-minus"}),a("el-date-picker",{attrs:{format:"dd/MM/yyyy","value-format":"yyyy-MM-dd",type:"date","picker-options":e.toCloseDate,placeholder:"Đến ngày"},model:{value:e.groupFilter.toCloseDate,callback:function(t){e.$set(e.groupFilter,"toCloseDate",t)},expression:"groupFilter.toCloseDate"}})],1)]),a("el-form-item",{attrs:{label:"Ngày hoàn thành"}},[a("div",{staticClass:"row-dash"},[a("el-date-picker",{attrs:{format:"dd/MM/yyyy","value-format":"yyyy-MM-dd",type:"date",placeholder:"Từ ngày"},model:{value:e.groupFilter.fromWonDate,callback:function(t){e.$set(e.groupFilter,"fromWonDate",t)},expression:"groupFilter.fromWonDate"}}),a("i",{staticClass:"el-icon-minus"}),a("el-date-picker",{attrs:{format:"dd/MM/yyyy","value-format":"yyyy-MM-dd","picker-options":e.toWonDate,type:"date",placeholder:"Đến ngày"},model:{value:e.groupFilter.toWonDate,callback:function(t){e.$set(e.groupFilter,"toWonDate",t)},expression:"groupFilter.toWonDate"}})],1)]),a("el-form-item",{attrs:{label:"Trạng thái gán"}},[a("el-select",{attrs:{clearable:"",placeholder:"Chọn trạng thái gán"},model:{value:e.groupFilter.assignmentStatus,callback:function(t){e.$set(e.groupFilter,"assignmentStatus",t)},expression:"groupFilter.assignmentStatus"}},e._l(e.assignmentStatus,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",[a("el-form-item",{attrs:{label:"Khu vực"}},[a("el-select",{staticClass:"filter-select",attrs:{size:"large",multiple:"",filterable:"",remote:"",placeholder:"Chọn khu vực","remote-method":function(t){return e.remoteMethod("areas",t)},disabled:e.disable.area},on:{change:function(t){return e.handleChange("change","areas",t)},"remove-tag":function(t){return e.handleChange("remove","areas",t)},clear:function(t){return e.handleChange("clear","areas",t)}},model:{value:e.groupFilter.areaIds,callback:function(t){e.$set(e.groupFilter,"areaIds",t)},expression:"groupFilter.areaIds"}},e._l(e.dataSelect.areas,(function(e){return a("el-option",{key:e.id,attrs:{label:e.locationCode+" - "+e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"Chi nhánh"}},[a("el-select",{staticClass:"filter-select",attrs:{size:"large",multiple:"",filterable:"",remote:"",placeholder:"Chọn chi nhánh","remote-method":function(t){return e.remoteMethod("branches",t)},disabled:e.disable.branch},on:{change:function(t){return e.handleChange("change","branches",t)},"remove-tag":function(t){return e.handleChange("remove","branches",t)},clear:function(t){return e.handleChange("clear","branches",t)}},model:{value:e.groupFilter.branchIds,callback:function(t){e.$set(e.groupFilter,"branchIds",t)},expression:"groupFilter.branchIds"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:function(){return e.loadMore("branches")},expression:"() => loadMore('branches')"}],attrs:{"infinite-scroll-delay":"500"}},e._l(e.dataSelect.branches,(function(e){return a("el-option",{key:e.id,attrs:{label:e.locationCode+" - "+e.name,value:e.id}})})),1)])],1),a("el-form-item",{attrs:{label:"Đơn vị kinh doanh"}},[a("el-select",{staticClass:"filter-select",attrs:{size:"large",multiple:"",filterable:"",remote:"",placeholder:"Chọn đơn vị kinh doanh","remote-method":function(t){return e.remoteMethod("offices",t)},disabled:e.disable.office},on:{change:function(t){return e.handleChange("change","offices",t)},"remove-tag":function(t){return e.handleChange("remove","offices",t)},clear:function(t){return e.handleChange("clear","offices",t)}},model:{value:e.groupFilter.officeIds,callback:function(t){e.$set(e.groupFilter,"officeIds",t)},expression:"groupFilter.officeIds"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:function(){return e.loadMore("offices")},expression:"() => loadMore('offices')"}],attrs:{"infinite-scroll-delay":"500"}},e._l(e.dataSelect.offices,(function(e){return a("el-option",{key:e.id,attrs:{label:e.locationCode+" - "+e.name,value:e.id}})})),1)])],1),a("el-form-item",{attrs:{label:"Nhân viên phụ trách"}},[a("el-select",{staticClass:"filter-select",attrs:{size:"large",multiple:"",filterable:"",remote:"",placeholder:"Chọn cán bộ nhân viên","remote-method":function(t){return e.remoteMethod("members",t)},disabled:e.disable.member},on:{change:function(t){return e.handleChange("change","members",t)},"remove-tag":function(t){return e.handleChange("remove","members",t)},clear:function(t){return e.handleChange("clear","members",t)}},model:{value:e.groupFilter.memberIds,callback:function(t){e.$set(e.groupFilter,"memberIds",t)},expression:"groupFilter.memberIds"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:function(){return e.loadMore("members")},expression:"() => loadMore('members')"}],attrs:{"infinite-scroll-delay":"500"}},e._l(e.dataSelect.members,(function(e){return a("el-option",{key:e.id,attrs:{label:e.memberNo+" - "+e.fullName,value:e.id}})})),1)])],1)],1)],1)],1),a("template",{slot:"footer"},[a("div",{staticClass:"bottom"},[a("div",{staticClass:"bt-top flex jc-flex-end"},[a("div",{staticClass:"flex"},[a("el-button",{staticClass:"btn-custom",attrs:{size:"medium"},on:{click:function(t){return e.handleSubmit("reset")}}},[e._v("Mặc định")]),a("el-button",{staticClass:"be-btn-danger",attrs:{size:"medium"},on:{click:e.handleSubmit}},[e._v("Áp dụng")])],1)])])])],2)},b=[],g=a("c964"),v=a("d0ff"),y=(a("96cf"),a("1276"),a("a9e3"),a("99af"),a("d3b7"),a("ddb0"),a("4ec9"),a("3ca3"),a("d81d"),a("4de4"),a("7db0"),a("c56f")),F=a("08ba"),C=Object(f["a"])("beDeal"),k=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.groupFilter={},e.value1="",e.isOpen=!1,e.formData={},e.rules={dealValue:[{validator:e.validate,trigger:"blur"}]},e.dataSelect={areas:[],branches:[],offices:[],members:[],products:[]},e.listStatus=[{id:5,label:"Tất cả",value:""},{id:1,label:"Đang làm việc",value:"1"},{id:2,label:"Thành công",value:"2"},{id:3,label:"Thất bại",value:"3"},{id:4,label:"Đang làm việc & Thành công",value:"0"}],e.assignmentStatus=[{id:1,label:"Đã gán NV phụ trách",value:1},{id:2,label:"Chưa gán NV phụ trách",value:0}],e.listPipeline=[],e.listStagePipeline=[],e.dataSelectMulti={},e.disable={area:!1,branch:!1,office:!1,member:!1,product:!1},e.query={pipeline:{page:1,limit:10},areas:{i:0,ps:20,search:""},branches:{i:0,ps:20,search:""},offices:{i:0,ps:20,search:""},products:{i:0,ps:20,search:""},members:{i:0,ps:20,limit:"",page:1,search:"",statusAccount:0,groupCode:"INSURANCE",sort:1}},e}return Object(s["a"])(a,[{key:"getStages",value:function(e){var t=this;e?this.apiDeal.getDataStagesPipelines(e).then((function(e){return t.listStagePipeline=e.data})):this.listStagePipeline=[]}},{key:"toWonDate",get:function(){var e=this;return{disabledDate:function(t){return e.disabledDateToWonDate(t)},onPick:function(e){return e}}}},{key:"toCloseDate",get:function(){var e=this;return{disabledDate:function(t){return e.disabledDateToCloseDate(t)}}}},{key:"toCreatedAt",get:function(){var e=this;return{disabledDate:function(t){return e.disabledDateToCreatedAt(t)}}}},{key:"handleChangePipeline",value:function(){delete this.groupFilter.currentStageId}},{key:"disabledDateToCreatedAt",value:function(e){if(this.groupFilter.fromCreatedAt)return e.getTime()<this.convertDateToTimeStamp(this.groupFilter.fromCreatedAt)}},{key:"disabledDateToCloseDate",value:function(e){if(this.groupFilter.fromCloseDate)return e.getTime()<this.convertDateToTimeStamp(this.groupFilter.fromCloseDate)}},{key:"disabledDateToWonDate",value:function(e){if(this.groupFilter.fromWonDate)return e.getTime()<this.convertDateToTimeStamp(this.groupFilter.fromWonDate)}},{key:"handleChangeNumber",value:function(e){var t;(isNaN(this.groupFilter[e])&&(this.groupFilter[e]=this.groupFilter[e].replaceAll(",","")),this.groupFilter[e])&&(this.groupFilter[e]=null===(t=this.$options.filters)||void 0===t?void 0:t.formatNumber(+this.groupFilter[e]))}},{key:"validate",value:function(e,t,a){var i=a;"dealValue"==e.field&&this.groupFilter.toDealValue&&this.groupFilter.fromDealValue&&this.convertDecimalToNumber(this.groupFilter.toDealValue)<this.convertDecimalToNumber(this.groupFilter.fromDealValue)?i(new Error('Giá trị "từ" phải nhỏ hơn giá trị "đến"')):i()}},{key:"convertDateToTimeStamp",value:function(e){var t=e.split("-"),a=new Date(+t[0],+t[1]-1,+t[2]);return a.getTime()}},{key:"convertDecimalToNumber",value:function(e){return Number(e.replaceAll(",",""))}},{key:"loadMore",value:function(e){var t=this;switch(e){case"branches":this.query.branches.i+=this.query.branches.ps,this.apiLocation.list("branch",this.query.branches).then((function(e){var a=[].concat(Object(v["a"])(t.dataSelect.branches),Object(v["a"])(e));t.dataSelect.branches=Object(v["a"])(new Map(a.map((function(e){return[e["id"],e]}))).values())}));break;case"offices":this.query.offices.i+=this.query.offices.ps,this.apiLocation.list("office",this.query.offices).then((function(e){var a=[].concat(Object(v["a"])(t.dataSelect.offices),Object(v["a"])(e));t.dataSelect.offices=Object(v["a"])(new Map(a.map((function(e){return[e["id"],e]}))).values())}));break;case"members":this.query.members.i+=this.query.members.ps,this.apiEmployee.getEmployeeList(this.query.members).then((function(e){var a=[].concat(Object(v["a"])(t.dataSelect.members),Object(v["a"])(e.data));t.dataSelect.members=Object(v["a"])(new Map(a.map((function(e){return[e["id"],e]}))).values())}));break;case"pipeline":this.query.pipeline.limit+=10,this.apiDeal.getDataSalesPipelines(this.query.pipeline).then((function(e){var a=[].concat(Object(v["a"])(t.listPipeline),Object(v["a"])(e.data.content));t.listPipeline=Object(v["a"])(new Map(a.map((function(e){return[e["id"],e]}))).values())}));break}}},{key:"remoteMethod",value:function(e,t){var a=Object(h["debounce"])(this.handleSearch,500);a(e,t)}},{key:"handleSearch",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t,a){var i,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i={i:0,ps:20,search:Object(h["trim"])(a)},e.t0=t,e.next="areas"===e.t0?4:"branches"===e.t0?8:"offices"===e.t0?12:"members"===e.t0?16:20;break;case 4:return this.query.areas=i,e.next=7,this.apiLocation.list("area",this.query.areas).then((function(e){r.dataSelect.areas=e}));case 7:return e.abrupt("break",23);case 8:return this.query.branches=i,e.next=11,this.apiLocation.list("branch",this.query.branches).then((function(e){r.dataSelect.branches=e}));case 11:return e.abrupt("break",23);case 12:return this.query.offices=i,e.next=15,this.apiLocation.list("office",this.query.offices).then((function(e){r.dataSelect.offices=e}));case 15:return e.abrupt("break",23);case 16:return this.query.members=Object(n["a"])(Object(n["a"])({},this.query.members),i),e.next=19,this.apiEmployee.getEmployeeList(this.query.members).then((function(e){r.dataSelect.members=e.data}));case 19:return e.abrupt("break",23);case 20:return e.next=22,Promise.all([this.apiLocation.list("area",this.query.areas).then((function(e){r.dataSelect.areas=e})),this.apiLocation.list("branch",this.query.branches).then((function(e){r.dataSelect.branches=e})),this.apiLocation.list("office",this.query.offices).then((function(e){r.dataSelect.offices=e})),this.apiEmployee.getEmployeeList(this.query.members).then((function(e){r.dataSelect.members=e.data})),this.apiDeal.getDataSalesPipelines(this.query.pipeline).then((function(e){r.listPipeline=e.data.content}))]);case 22:return e.abrupt("break",23);case 23:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"checkChangOrRemove",value:function(e,t,a,i){if(this.groupFilter.dataChange[t]=this.groupFilter.dataChange[t]&&this.groupFilter.dataChange[t].length>0?this.groupFilter.dataChange[t]:[],"change"===e){var r=!!(this.groupFilter.dataChange[t]&&this.groupFilter.dataChange[t].length>0&&a)&&this.groupFilter.dataChange[t].some((function(e){return e.id==a.id}));!r&&a&&this.groupFilter.dataChange[t].push(a)}else if(this.groupFilter.dataChange[t]&&this.groupFilter.dataChange[t].length>0){var n=this.groupFilter.dataChange[t].filter((function(e){return e.id!=i}));this.groupFilter.dataChange[t]=n}else this.groupFilter.dataChange[t]=[];console.log(this.groupFilter.dataChange)}},{key:"checkCode",value:function(e,t,a){var i={};switch(t){case"members":i=this.dataSelect.members.find((function(e){return e.id==a})),this.checkChangOrRemove(e,t,i,a);break;case"offices":i=this.dataSelect.offices.find((function(e){return e.id==a})),this.checkChangOrRemove(e,t,i,a);break;case"branches":i=this.dataSelect.branches.find((function(e){return e.id==a})),this.checkChangOrRemove(e,t,i,a);break;case"areas":i=this.dataSelect.areas.find((function(e){return e.id==a})),this.checkChangOrRemove(e,t,i,a);break}}},{key:"handleChange",value:function(e,t,a){this.$forceUpdate();var i=a[a.length-1],r=this.getDealFilter(this.$route.name);null!==r&&void 0!==r&&r.data?this.groupFilter.dataChange=null===r||void 0===r?void 0:r.data:this.groupFilter.dataChange={},"clear"===e?this.groupFilter.dataChange[t]=[]:this.checkCode(e,t,i)}},{key:"handleSubmit",value:function(e){var t=this;if(console.log(this.groupFilter.dataChange),"reset"==e)this.groupFilter.dataChange={areas:[],branches:[],offices:[],members:[],products:[]},"dealPipeline"==this.$route.name||"forecast"==this.$route.name?this.groupFilter={pipelineId:1,dealStatus:"1"}:this.groupFilter={dealStatus:"0"},this.$emit("reset",this.groupFilter);else{var a=this.$refs.formData;a.validate((function(e){e&&t.$emit("change",t.groupFilter)}))}}},{key:"handleOpen",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.groupFilter=Object(n["a"])({},this.filters),t=this.getDealFilter(this.$route.name),null!==t&&void 0!==t&&t.data&&(this.dataSelect=Object(n["a"])(Object(n["a"])({},this.dataSelect),t.data)),console.log(t),e.next=6,this.handleSearch("","");case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleClose",value:function(){}},{key:"mounted",value:function(){this.apiLocation=Object(F["a"])("location",{districtId:this.districtId}),this.apiContract=Object(F["a"])("contract",{districtId:this.districtId}),this.apiEmployee=Object(F["a"])("employee",{districtId:this.districtId}),this.apiParam=Object(F["a"])("param",{districtId:this.districtId}),this.apiDeal=Object(F["a"])("deal",{districtId:this.districtId})}}]),a}(Object(p["b"])(d["a"],y["a"]));Object(u["a"])([Object(p["c"])({required:!0,type:Object})],k.prototype,"filters",void 0),Object(u["a"])([Object(p["c"])()],k.prototype,"dataProp",void 0),Object(u["a"])([C.State("filters")],k.prototype,"filterSot",void 0),Object(u["a"])([C.Getter("getDealFilter")],k.prototype,"getDealFilter",void 0),Object(u["a"])([C.Action("setDealFilter")],k.prototype,"setDealFilter",void 0),Object(u["a"])([Object(p["e"])("groupFilter.pipelineId")],k.prototype,"getStages",null),k=Object(u["a"])([Object(p["a"])({components:{}})],k);var D=k,O=D,S=(a("fbdf"),a("2877")),j=Object(S["a"])(O,m,b,!1,null,"00f910d6",null),x=j.exports,w=Object(f["a"])("beDeal"),M=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.groupFilters={search:"",sortType:""},e.listSelection=[{id:1,label:"Pipeline Bảo hiểm Nhân thọ",value:1},{id:2,label:"Pipeline Bảo hiểm Phi nhân thọ",value:2},{id:3,label:"Pipeline Bảo hiểm cho công ty",value:3},{id:4,label:"Thiết lập pipeline",value:4}],e.searchDebounce=Object(h["debounce"])(e.searchText,500),e}return Object(s["a"])(a,[{key:"sorts",get:function(){return[{command:"DEAL_VALUE",label:"Giá trị",divided:!1},{command:"CLOSE_DATE",label:"Ngày chốt",divided:!1},{command:"CREATED_AT",label:"Ngày tạo",divided:!1}]}},{key:"watchSearch",value:function(e){this.searchDebounce(e)}},{key:"searchText",value:function(e){this.groupFilters.search=Object(h["trim"])(e),this.$emit("change",this.groupFilters)}},{key:"handleClick",value:function(){this.setOpenPopup({popupName:"filter-deal",isOpen:!0})}},{key:"handleReset",value:function(e){this.groupFilters=e}},{key:"handeChangeFilters",value:function(e){this.groupFilters=Object(n["a"])(Object(n["a"])({},this.groupFilters),e),this.$emit("change",this.groupFilters),this.setOpenPopup({popupName:"filter-deal",isOpen:!1})}},{key:"handleCommand",value:function(e){this.groupFilters.sortType===e?this.groupFilters.sortType="":this.groupFilters.sortType=e,this.$emit("change",this.groupFilters)}},{key:"init",value:function(){"dealPipeline"==this.$route.name||"forecast"==this.$route.name?this.groupFilters.dealStatus="1":this.groupFilters.dealStatus="0",this.groupFilters=Object(n["a"])(Object(n["a"])({},this.groupFilters),this.filters);var e=this.getDealFilter(this.$route.name);e&&(this.groupFilters=Object(n["a"])(Object(n["a"])({},this.groupFilters),e.filters)),this.$emit("change",this.groupFilters)}},{key:"mounted",value:function(){this.init()}}]),a}(Object(p["b"])(d["a"]));Object(u["a"])([Object(p["c"])({required:!0,type:Object})],M.prototype,"filters",void 0),Object(u["a"])([Object(p["c"])({required:!0,type:Boolean})],M.prototype,"isPipeline",void 0),Object(u["a"])([w.Getter("getDealFilter")],M.prototype,"getDealFilter",void 0),Object(u["a"])([Object(p["e"])("groupFilters.search",{immediate:!1})],M.prototype,"watchSearch",null),M=Object(u["a"])([Object(p["a"])({components:{PopupFilterDeal:x}})],M);var T=M,I=T,$=(a("10fa"),Object(S["a"])(I,i,r,!1,null,"e4d36318",null));t["a"]=$.exports},bb2f:function(e,t,a){var i=a("d039");e.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},f183:function(e,t,a){var i=a("d012"),r=a("861d"),n=a("5135"),l=a("9bf2").f,s=a("90e3"),o=a("bb2f"),c=s("meta"),u=0,d=Object.isExtensible||function(){return!0},h=function(e){l(e,c,{value:{objectID:"O"+u++,weakData:{}}})},p=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!n(e,c)){if(!d(e))return"F";if(!t)return"E";h(e)}return e[c].objectID},f=function(e,t){if(!n(e,c)){if(!d(e))return!0;if(!t)return!1;h(e)}return e[c].weakData},m=function(e){return o&&b.REQUIRED&&d(e)&&!n(e,c)&&h(e),e},b=e.exports={REQUIRED:!1,fastKey:p,getWeakData:f,onFreeze:m};i[c]=!0},fbdf:function(e,t,a){"use strict";a("2b07")}}]);
//# sourceMappingURL=chunk-23ea7d56.d9c98e93.js.map