{"version":3,"sources":["webpack:///./src/modules/deals/components/draggable/Draggable.vue?b49c","webpack:///./src/modules/deals/components/draggable/Draggable.vue","webpack:///./src/modules/deals/components/draggable/Draggable.vue?6027","webpack:///./src/modules/deals/components/draggable/Draggable.vue?a115","webpack:///./src/modules/deals/views/DealForecastPage.vue?aa04","webpack:///./src/modules/deals/components/draggable/Draggable.vue?64cb","webpack:///./src/modules/deals/views/DealForecastPage.vue?0be6","webpack:///./src/modules/deals/views/DealForecastPage.vue","webpack:///./src/modules/deals/views/DealForecastPage.vue?2376","webpack:///./src/modules/deals/views/DealForecastPage.vue?e8c2"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","classHeader","firstColumn","borderHeader","_e","_v","_s","dataProp","name","_f","totalValue","numOfSalesDeal","attrs","salesDeals","on","change","nativeOn","$event","e","handleScroll","id","apply","arguments","_l","element","key","handleItemClick","hideAction","handleConflictClick","handleClickOpenAction","status","data","handleOpenPopupNote","customerId","slot","salesFullName","salesAvatar","dealValue","staticRenderFns","isLog","dataPopup","title","code","isConflictClick","debounceLoadMore","handleLoadMore","target","scrollTop","offsetHeight","scrollHeight","$emit","evt","console","log","value","params","type","Object","components","draggable","component","filters","handleFiltersChange","item","query","filterBy","handleClickViewModeDate","label","filterType","handleClickViewMode","showViewMode","disable","dPrev","handleGroupButton","prev","handleChangPipeLine","model","callback","$$v","$set","expression","directives","rawName","loadMore","pipelineId","handleRedirect","handleScrollHorizontal","index","handleOpenCreateNote","loadMoreDrag","handleClickItem","handleChangeItem","init","handleConfirm","idCustomer","handleCreateNote","listPipeline","isLoading","listFilterBy","active","listFilterType","dataSelect","limit","queryLoadMorePipeline","page","queryLoadMore","dataDrag","dealId","firstFromDate","Date","loadMoreHorizontalDebounce","handleLoadMoreHori","$route","$router","push","setOpenPopup","popupName","isOpen","post","apiDeal","createNote","description","content","then","$message","success","scrollLeft","offsetWidth","scrollWidth","getDataSalesPipelines","res","listFilter","Map","map","values","month","year","getDate","d","date","prevMonday","getFullYear","getMonth","convertFromDate","nextMonday","substr","el","document","getElementById","fromDate","getPreviousMoreMonday","getPreviousMonday","getNextMonday","getNextMoreMonday","getToday","window","includes","deleteDealOrCusById","toString","catch","err","error","message","assignDeal","stageId","view","filter","from","to","toDate","length","param","getDataForecast","parseData","parseFilterType","amount","deals","currentStageId","keys","districtId","DealFilter","Draggable","CreateDeal","PopupConfirmDeal","PopupConfirm","PopupNote","AppointCustomer"],"mappings":"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","file":"js/chunk-d1f24f28.2ea3fde6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"draggable\"},[_c('div',{class:_vm.classHeader},[(!_vm.firstColumn && !_vm.borderHeader)?_c('div',{staticClass:\"stripe\"}):_vm._e(),_c('div',{staticClass:\"content\"},[_c('h3',[_vm._v(_vm._s(_vm.dataProp.name ? _vm.dataProp.name : ''))]),_c('div',{staticClass:\"flex\"},[_c('span',{staticClass:\"price\"},[_vm._v(_vm._s(_vm._f(\"formatNumber\")(_vm.dataProp.totalValue)))]),_c('span',{staticClass:\"dot\"}),_c('span',{staticClass:\"count\"},[_vm._v(_vm._s(_vm._f(\"formatNumber\")(_vm.dataProp.numOfSalesDeal))+\" cơ hội\")])])])]),_c('draggable',{staticClass:\"list-group\",attrs:{\"list\":_vm.dataProp.salesDeals,\"group\":\"people\"},on:{\"change\":_vm.change},nativeOn:{\"scroll\":function($event){return (function (e) { return _vm.handleScroll(e, _vm.dataProp.id); }).apply(null, arguments)}}},[_vm._l((_vm.dataProp.salesDeals),function(element){return _c('div',{key:element.id,staticClass:\"list-group-item cursor\",on:{\"click\":function($event){return _vm.handleItemClick(element)}}},[_c('div',{staticClass:\"be-flex jc-space-between\"},[_c('h3',[_vm._v(_vm._s(element.name ? element.name : ''))]),_c('el-popover',{attrs:{\"placement\":\"bottom\",\"popper-class\":\"popper-action-deal\"},on:{\"hide\":_vm.hideAction},nativeOn:{\"click\":function($event){return _vm.handleConflictClick.apply(null, arguments)}}},[_c('div',{staticClass:\"be-flex-column content\"},[_c('div',{staticClass:\"content-item cursor\",on:{\"click\":function($event){return _vm.handleClickOpenAction({ status: 'edit', id: element.id })}}},[_c('span',[_vm._v(\"Sửa thông tin\")])]),_c('div',{staticClass:\"content-item cursor\",on:{\"click\":function($event){return _vm.handleClickOpenAction({ status: 'assign', id: element.id, data: element })}}},[_c('span',[_vm._v(\"Gán phụ trách\")])]),_c('div',{staticClass:\"content-item cursor\",on:{\"click\":function($event){return _vm.handleOpenPopupNote(element)}}},[_c('span',[_vm._v(\"Ghi chú\")])]),_c('div',{staticClass:\"content-item cursor\",on:{\"click\":function($event){return _vm.handleClickOpenAction({ status: 'createCalen', id: element.customerId, data: element })}}},[_c('span',[_vm._v(\"Tạo lịch hẹn\")])]),_c('div',{staticClass:\"content-item cursor\",on:{\"click\":function($event){return _vm.handleClickOpenAction({ status: 'uploadFile', id: element.id})}}},[_c('span',[_vm._v(\"Upload tài liệu\")])]),_c('div',{staticClass:\"content-item cursor\",on:{\"click\":function($event){return _vm.handleClickOpenAction({ status: 'delete', id: element.id })}}},[_c('span',[_vm._v(\"Xóa cơ hội\")])])]),_c('div',{staticClass:\"reference\",attrs:{\"slot\":\"reference\"},slot:\"reference\"},[_c('i',{staticClass:\"el-icon-more\"})])])],1),_c('p',{staticClass:\"small\"},[_vm._v(_vm._s(element.salesFullName ? element.salesFullName : ''))]),_c('span',{staticClass:\"flex\"},[(element.id && element.salesAvatar)?_c('el-avatar',{attrs:{\"src\":element.salesAvatar,\"size\":\"small\"}}):_c('base-icon',{staticClass:\"avatar__imployee--defalt\",attrs:{\"icon\":\"icon-avatar-default\"}}),_c('span',{staticClass:\"deal-value\"},[_vm._v(_vm._s(_vm._f(\"formatNumber\")(element.dealValue)))])],1)])}),(_vm.firstColumn)?_c('el-button',{staticClass:\"btn-add-deal\",attrs:{\"slot\":\"footer\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){return _vm.handleClickOpenAction({ status: 'add', id: '' })}},slot:\"footer\"},[_vm._v(\"Thêm cơ hội\")]):_vm._e()],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { debounce } from 'lodash'\nimport { Component, Prop, Mixins } from 'vue-property-decorator'\nimport draggable from 'vuedraggable'\nimport CommonMixin from '@/mixins/commonMixin'\nimport PopupMixin from '@/mixins/popup'\n// import CreateDeal from '@/modules/deals/components/popup/CreateDeal.vue'\n\n@Component({ components: { draggable } })\nexport default class Draggable extends Mixins(CommonMixin, PopupMixin) {\n  @Prop({ type: Object }) dataProp!: Record<string, any>\n  @Prop() firstColumn?: boolean\n  @Prop() borderHeader?: boolean\n  isLog = false\n  get classHeader(): string {\n    if (this.borderHeader && !this.firstColumn) {\n      return 'flex draggable-header header-border-left'\n    }\n    return 'flex draggable-header'\n  }\n  dataPopup: any = {\n    title: 'Thêm mới cơ hội bán hàng',\n    code: '',\n    id: '',\n    data: {}\n  }\n  isConflictClick = false\n  handleScroll(e: Record<string, any>, id: string | number): void {\n    // console.log(e.target.scrollTop, e.target.offsetHeight, e.target.scrollHeight)\n\n    if (e.target.scrollTop + e.target.offsetHeight + 1 >= e.target.scrollHeight) {\n      this.debounceLoadMore(id)\n    }\n  }\n  debounceLoadMore = debounce(this.handleLoadMore, 500)\n  handleLoadMore(id: string | number): void {\n    this.$emit('loadMore', id)\n  }\n  hideAction(): void {\n    this.isConflictClick = false\n  }\n  handleConflictClick(): void {\n    this.isConflictClick = true\n  }\n  change(evt: Record<string, any>): void {\n    console.log(evt)\n    if (evt['added']) {\n      evt['added'].id = this.dataProp.id\n    }\n    if (evt['removed']) {\n      evt['removed'].id = this.dataProp.id\n    }\n    if (evt['moved']) {\n      evt['moved'].id = this.dataProp.id\n    }\n    this.$emit('log', evt)\n  }\n  handleItemClick(value: any): void {\n    if (this.isConflictClick) {\n      return\n    }\n    this.$emit('clickItem', value)\n  }\n  handleClickOpenAction(params: { status: string; id: number; data?: Record<string, any> }): void {\n    this.$emit('action', params)\n  }\n\n  handleOpenPopupNote(value: Record<string, any>): void {\n    this.$emit('createNote', value)\n  }\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Draggable.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Draggable.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Draggable.vue?vue&type=template&id=a686cdf4&scoped=true&\"\nimport script from \"./Draggable.vue?vue&type=script&lang=ts&\"\nexport * from \"./Draggable.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Draggable.vue?vue&type=style&index=0&id=a686cdf4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a686cdf4\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DealForecastPage.vue?vue&type=style&index=0&id=6236181e&lang=scss&scoped=true&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Draggable.vue?vue&type=style&index=0&id=a686cdf4&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"deal-page draggable-page\"},[_c('div',{staticClass:\"header be-flex jc-space-between\"},[_c('deal-filter',{staticClass:\"be-flex-item\",attrs:{\"filters\":_vm.filters,\"isPipeline\":false},on:{\"change\":_vm.handleFiltersChange}}),_c('div',{staticClass:\"actions\"},[_c('el-popover',{attrs:{\"placement\":\"bottom\",\"trigger\":\"click\",\"popper-class\":\"popper-action-deal popper-deal-forcast\"}},[_c('div',{staticClass:\"be-flex-column content\"},[_c('div',{staticClass:\"content-item-sm cursor\"},[_c('span',{staticClass:\"small\"},[_vm._v(\"Hiển thị theo\")])]),_vm._l((_vm.listFilterBy),function(item){return _c('div',{key:item.key,class:_vm.query.filterBy == item.key ? 'content-item cursor is-active' : 'content-item cursor',on:{\"click\":function($event){return _vm.handleClickViewModeDate(item.key)}}},[_c('span',[_vm._v(_vm._s(item.label))]),_c('i',{staticClass:\"el-icon-check\"})])})],2),_c('hr'),_c('div',{staticClass:\"be-flex-column content\"},[_c('div',{staticClass:\"content-item-sm cursor\"},[_c('span',{staticClass:\"small\"},[_vm._v(\"Khoảng thời gian\")])]),_vm._l((_vm.listFilterType),function(item){return _c('div',{key:item.key,class:_vm.query.filterType == item.key ? 'content-item cursor is-active' : 'content-item cursor',on:{\"click\":function($event){return _vm.handleClickViewMode(item.key)}}},[_c('span',[_vm._v(_vm._s(item.label))]),_c('i',{staticClass:\"el-icon-check\"})])})],2),_c('div',{staticClass:\"reference\",attrs:{\"slot\":\"reference\"},slot:\"reference\"},[_c('el-button',{class:_vm.showViewMode ? 'btn-window-plus is-actives' : 'btn-window-plus',on:{\"click\":function($event){_vm.showViewMode = !_vm.showViewMode}}},[_c('base-icon',{staticClass:\"icon-window-plus\",attrs:{\"icon\":\"window-plus\"}})],1)],1)]),_c('el-button-group',{staticClass:\"custom-button\"},[_c('el-button',{attrs:{\"size\":\"medium\"}},[_c('el-button',{staticClass:\"btn-icon\",attrs:{\"disabled\":_vm.disable.dPrev,\"icon\":\"el-icon-d-arrow-left\"},on:{\"click\":function($event){return _vm.handleGroupButton('d-left')}}}),_c('el-button',{staticClass:\"btn-icon\",attrs:{\"disabled\":_vm.disable.prev,\"icon\":\"el-icon-arrow-left\"},on:{\"click\":function($event){return _vm.handleGroupButton('left')}}})],1),_c('el-button',{attrs:{\"size\":\"medium\"},on:{\"click\":function($event){return _vm.handleGroupButton('to-day')}}},[_vm._v(\"Hôm nay\")]),_c('el-button',{attrs:{\"size\":\"medium\"}},[_c('el-button',{staticClass:\"btn-icon\",attrs:{\"icon\":\"el-icon-arrow-right\"},on:{\"click\":function($event){return _vm.handleGroupButton('right')}}}),_c('el-button',{staticClass:\"btn-icon\",attrs:{\"icon\":\"el-icon-d-arrow-right\"},on:{\"click\":function($event){return _vm.handleGroupButton('d-right')}}})],1)],1),_c('el-select',{staticClass:\"custom-button\",attrs:{\"popper-class\":\"popper-action-deal\",\"size\":\"medium\",\"placeholder\":\"Chọn Pipeline\"},on:{\"change\":_vm.handleChangPipeLine},model:{value:(_vm.query.pipelineId),callback:function ($$v) {_vm.$set(_vm.query, \"pipelineId\", $$v)},expression:\"query.pipelineId\"}},[_c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(function () { return _vm.loadMore('products'); }),expression:\"() => loadMore('products')\"}],attrs:{\"infinite-scroll-delay\":\"500\"}},[_vm._l((_vm.listPipeline),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),_c('el-option',{staticClass:\"option-sticky\",attrs:{\"label\":\"\",\"value\":_vm.query.pipelineId},nativeOn:{\"click\":function($event){return _vm.handleRedirect.apply(null, arguments)}}},[_c('i',{staticClass:\"el-icon-plus\"}),_vm._v(\" Thêm Pipeline\")])],2)]),_c('el-dropdown',{staticClass:\"custom-button\",attrs:{\"size\":\"medium\",\"split-button\":\"\"},on:{\"click\":function($event){return _vm.handleClickOpenAction({ status: 'add', id: '' })}}},[_vm._v(\" Thêm mới \"),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',[_vm._v(\"Thêm mới từ Excel\")])],1)],1),_c('el-button',{staticClass:\"custom-button\",attrs:{\"loading\":false}},[_c('span',{staticClass:\"be-inline-flex align-center\"},[_c('base-icon',{staticClass:\"icon\",attrs:{\"icon\":\"excel-fullcolor\"}}),_vm._v(\" Xuất Excel \")],1)])],1)],1),_c('div',{staticClass:\"content\",attrs:{\"id\":\"content-deal-forecast\"},on:{\"scroll\":_vm.handleScrollHorizontal}},[_c('el-row',{staticClass:\"be-flex\"},_vm._l((_vm.dataDrag),function(item,name,index){return _c('el-col',{key:item.id,staticClass:\"be-flex-item\"},[_c('draggable',{attrs:{\"dataProp\":item,\"firstColumn\":index == 0 ? true : false,\"borderHeader\":_vm.borderHeader},on:{\"createNote\":_vm.handleOpenCreateNote,\"loadMore\":_vm.loadMoreDrag,\"clickItem\":_vm.handleClickItem,\"log\":_vm.handleChangeItem,\"action\":_vm.handleClickOpenAction}})],1)}),1)],1),_c('create-deal',{attrs:{\"dataProp\":_vm.dataPopup},on:{\"apply\":_vm.init,\"openDestroy\":_vm.handleClickOpenAction}}),_c('popup-confirm-deal',{attrs:{\"dataProp\":_vm.dataPopup},on:{\"confirm\":_vm.handleConfirm}}),_c('appoint-customer',{attrs:{\"idCustomer\":this.idCustomer}}),_c('popup-note',{attrs:{\"type\":_vm.type},on:{\"update\":_vm.handleCreateNote}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Mixins, Watch } from 'vue-property-decorator'\nimport DealFilter from '../components/filters/DealFilter.vue'\nimport getRepository from '@/services'\nimport CommonMixin from '@/mixins/commonMixin'\nimport { assign, debounce, trim } from 'lodash'\nimport CreateDeal from '../components/popup/CreateDeal.vue'\nimport PopupMixin from '@/mixins/popup'\nimport Draggable from '../components/draggable/Draggable.vue'\nimport DealRepository from '@/services/repositories/deal'\nimport { Pipeline } from '../interface'\nimport PopupConfirmDeal from '../components/popup/PopupConfirm.vue'\nimport PopupNote from '@/modules/customer/components/popup/PopupNote.vue'\nimport AppointCustomer from '@/modules/customer/components/popup/AppointCustomer.vue'\n\n@Component({ components: { DealFilter, Draggable, CreateDeal, PopupConfirmDeal, PopupNote,AppointCustomer } })\n\nexport default class DealForecastPage extends Mixins(CommonMixin, PopupMixin) {\n  apiDeal!: DealRepository\n  listPipeline: Pipeline[] = []\n  isLoading = false\n  filters: Record<string, any> = {}\n  listFilterBy = [\n    { key: 'createdAt', label: 'Ngày tạo', active: false },\n    { key: 'closedAt', label: 'Ngày chốt dự kiến', active: false }\n  ]\n  listFilterType = [\n    { key: 'week', label: 'Theo tuần', active: false },\n    { key: 'month', label: 'Theo tháng', active: false },\n    { key: 'quarter', label: 'Theo quý', active: false }\n  ]\n  dataPopup: any = {\n    title: '',\n    code: '',\n    id: '',\n    data: {},\n    dataSelect: []\n  }\n  idCustomer: any = {\n    id: '',\n    data: {}\n  }\n  query: Record<string, any> = {\n    pipelineId: 1,\n    filterBy: 'createdAt',\n    filterType: 'week',\n    limit: 10\n  }\n  queryLoadMorePipeline = {\n    page: 1,\n    limit: 20\n  }\n  queryLoadMore: Record<string, any> = {}\n  dataDrag: Record<string, any> = {}\n  showViewMode = false\n  disable = {\n    dPrev: false,\n    prev: false\n  }\n\n  type = 'add'\n  dealId = 0\n  firstFromDate: Date = new Date()\n  get borderHeader(): boolean {\n    if (this.$route.name == 'forecast') {\n      return true\n    }\n    return false\n  }\n  handleChangPipeLine(pipelineId: string): void {\n    this.query.pipelineId = pipelineId\n    this.init()\n  }\n  handleRedirect(): void {\n    this.$router.push({\n      name: 'ProgressiveSales',\n      params: {\n        type: 'them'\n      }\n    })\n  }\n  handleOpenCreateNote(value: Record<string, any>): any {\n    this.dealId = value.id\n    this.setOpenPopup({\n      popupName: 'popup-note',\n      isOpen: true\n    })\n  }\n\n  handleCreateNote(post: Record<string, any>): void {\n    const type = 'DEAL'\n    this.apiDeal.createNote(type, { description: post.content, dealId: this.dealId }).then(() => {\n      this.$message.success('Tạo ghi chú thành công')\n    })\n  }\n\n  handleScrollHorizontal(e: Record<string, any>): void {\n    if (e.target.scrollLeft + e.target.offsetWidth >= e.target.scrollWidth) {\n      this.loadMoreHorizontalDebounce()\n    }\n  }\n  loadMoreHorizontalDebounce = debounce(this.handleLoadMoreHori, 200)\n  handleLoadMoreHori(): void {\n    this.query.limit += 5\n    this.init()\n  }\n  loadMore(type: string): void {\n    switch (type) {\n      case 'pipeline':\n        this.queryLoadMorePipeline.limit += 10\n        this.apiDeal.getDataSalesPipelines(this.queryLoadMorePipeline).then(res => {\n          const listFilter = [...this.listPipeline, ...res.data.content]\n          this.listPipeline = [...new Map(listFilter.map(item => [item['id'], item])).values()]\n        })\n        break\n    }\n  }\n  daysInMonth(month: number, year: number): number {\n    return new Date(year, month, 0).getDate()\n  }\n\n  getPreviousMoreMonday(d: Date): string {\n    let date = new Date(d)\n    let prevMonday = new Date()\n    if (this.query.filterType == 'week') {\n      prevMonday = new Date(date.getFullYear(), date.getMonth(), date.getDate() - 7 * 4)\n    }\n    if (this.query.filterType == 'month') {\n      prevMonday = new Date(date.getFullYear(), date.getMonth() - 4, date.getDate())\n    }\n    if (this.query.filterType == 'quarter') {\n      prevMonday = new Date(date.getFullYear(), date.getMonth() - 4 * 3, date.getDate())\n    }\n    return this.convertFromDate(prevMonday)\n  }\n  getPreviousMonday(d: Date): string {\n    let date = new Date(d)\n    let prevMonday = new Date()\n\n    if (this.query.filterType == 'week') {\n      prevMonday = new Date(date.getFullYear(), date.getMonth(), date.getDate() - 7)\n    }\n    if (this.query.filterType == 'month') {\n      prevMonday = new Date(date.getFullYear(), date.getMonth() - 1, date.getDate())\n    }\n    if (this.query.filterType == 'quarter') {\n      prevMonday = new Date(date.getFullYear(), date.getMonth() - 4, date.getDate())\n    }\n    return this.convertFromDate(prevMonday)\n  }\n  getNextMonday(d: Date): string {\n    let date = new Date(d)\n    let nextMonday = new Date()\n    if (this.query.filterType == 'week') {\n      nextMonday = new Date(date.getFullYear(), date.getMonth(), date.getDate() + 7)\n    }\n    if (this.query.filterType == 'month') {\n      nextMonday = new Date(date.getFullYear(), date.getMonth() + 1, date.getDate())\n    }\n    if (this.query.filterType == 'quarter') {\n      nextMonday = new Date(date.getFullYear(), date.getMonth() + 4, date.getDate())\n    }\n    return this.convertFromDate(nextMonday)\n  }\n  getNextMoreMonday(d: Date): string {\n    let date = new Date(d)\n    let nextMonday = new Date()\n    if (this.query.filterType == 'week') {\n      nextMonday = new Date(date.getFullYear(), date.getMonth(), date.getDate() + 7 * 4)\n    }\n    if (this.query.filterType == 'month') {\n      nextMonday = new Date(date.getFullYear(), date.getMonth() + 4, date.getDate())\n    }\n    if (this.query.filterType == 'quarter') {\n      nextMonday = new Date(date.getFullYear(), date.getMonth() + 4 * 3, date.getDate())\n    }\n    return this.convertFromDate(nextMonday)\n  }\n  getToday(): string {\n    let date = new Date()\n    return this.convertFromDate(date)\n  }\n  convertFromDate(d: Date): string {\n    return `${d.getFullYear()}-${('0' + (+d.getMonth() + 1)).substr(-2)}-${('0' + d.getDate()).substr(-2)}`\n  }\n  handleGroupButton(type: string): void {\n    // let firstFromDate = this.dataDrag[Object.keys(this.dataDrag)[0]].fromDate\n    const el = document.getElementById('content-deal-forecast')\n    el!.scrollLeft = 0\n    if (type == 'd-left') {\n      this.query.fromDate = this.getPreviousMoreMonday(this.firstFromDate)\n    } else if (type == 'left') {\n      this.query.fromDate = this.getPreviousMonday(this.firstFromDate)\n    } else if (type == 'right') {\n      this.query.fromDate = this.getNextMonday(this.firstFromDate)\n    } else if (type == 'd-right') {\n      this.query.fromDate = this.getNextMoreMonday(this.firstFromDate)\n    } else {\n      this.query.fromDate = this.getToday()\n      this.query.limit = 10\n    }\n    console.log(this.query.fromDate)\n\n    this.init()\n  }\n  handleClickViewModeDate(type: string): void {\n    const el = document.getElementById('content-deal-forecast')\n    el!.scrollLeft = 0\n    this.query.filterBy = type\n    this.init()\n  }\n  handleClickViewMode(type: string): void {\n    this.query.limit = 10\n    const el = document.getElementById('content-deal-forecast')\n    el!.scrollLeft = 0\n    this.query.filterType = type\n    this.init()\n  }\n  log(evt: any): void {\n    window.console.log(evt)\n  }\n  handleClick(): void {\n    this.setOpenPopup({\n      popupName: 'create-deal',\n      isOpen: true\n    })\n  }\n  handleClickOpenAction(params: { status: string; id: number; data?: Record<string, any> }): void {\n    const { status, id } = params\n    this.dataPopup.code = status\n    this.dataPopup.id = id\n    if (status.includes('assign') || status == 'delete') {\n      this.dataPopup.title = status == 'delete' ? 'Xác nhận xóa' : 'Gán Nhân viên phụ trách'\n      this.dataPopup.data = params?.data\n      this.setOpenPopup({\n        popupName: 'popup-confirm-deal',\n        isOpen: true\n      })\n    }\n    if (status == 'add' || status == 'edit') {\n      this.dataPopup.title = status == 'add' ? 'Thêm mới cơ hội bán hàng' : 'Sửa thông tin cơ hội bán hàng'\n      this.setOpenPopup({\n        popupName: 'create-deal',\n        isOpen: true\n      })\n    }\n    if (status == 'createCalen') {\n      this.idCustomer.id = id\n      this.setOpenPopup({\n        popupName: 'appoint-customer',\n        isOpen: true\n      })\n    }\n  }\n  async handleConfirm(params?: Record<string, any>): Promise<any> {\n    if (this.dataPopup.code == 'delete') {\n      if (this.dataPopup.id && this.dataPopup.id != 0) {\n        await this.apiDeal\n          .deleteDealOrCusById('sales-deals', trim(this.dataPopup.id.toString()))\n          .then(() => {\n            this.$message.success('Xóa thành công')\n            this.setOpenPopup({\n              popupName: 'popup-confirm-deal',\n              isOpen: false\n            })\n            this.init()\n          })\n          .catch(err => this.$message.error(err.message))\n      }\n    } else {\n      await this.apiDeal\n        .assignDeal('sales-deals', params)\n        .then(() => {\n          this.$message.success('Gán thành công')\n          this.setOpenPopup({\n            popupName: 'popup-confirm-deal',\n            isOpen: false\n          })\n          this.init()\n        })\n        .catch(err => this.$message.error(err.message))\n    }\n  }\n  loadMoreDrag(stageId: string | number): void {\n    // this.queryLoadMore[stageId].limit += 5\n    // this.apiDeal.getDataForecast('sales-deals', { ...this.filters, ...this.queryLoadMore[stageId] }).then(res => {\n    //   const listFilter = [...this.dataDrag[stageId].salesDeals, ...res[stageId].salesDeals]\n    //   this.dataDrag[stageId].salesDeals = [...new Map(listFilter.map(item => [item['id'], item])).values()]\n    // })\n  }\n  handleChangeItem(value: Record<string, any>): void {\n    console.log('d', value)\n  }\n  handleClickItem(value: Record<string, any>): void {\n    this.$router.push({\n      name: 'dealNewsfeed',\n      params: {\n        type: this.$route.params.type,\n        view: 'bang-tin',\n        id: value.id\n      }\n    })\n  }\n  handleFiltersChange(filter: Record<string, any>): void {\n    this.filters = filter\n    this.init()\n  }\n  parseFilterType(type: string, from: Date, to: Date): string {\n    let fromDate = new Date(from)\n    let toDate = new Date(to)\n    let title = ''\n    if (type == 'week') {\n      title = `Tuần ${fromDate.getDate()}/${fromDate.getMonth() + 1} - ${toDate.getDate()}/${toDate.getMonth() + 1}/${toDate.getFullYear()}`\n    } else if (type == 'month') {\n      title = `Tháng ${from}`\n    } else {\n      title = `Quý ${from}`\n    }\n    return title\n  }\n  async init(): Promise<any> {\n    this.isLoading = true\n    if (this.listPipeline.length < 1) {\n      await this.apiDeal.getDataSalesPipelines(this.queryLoadMorePipeline).then(res => {\n        this.listPipeline = res.data.content\n        this.query.pipelineId = this.listPipeline[0].id\n      })\n    }\n    if (this.listPipeline.length > 0) {\n      const param = assign(this.filters, this.query)\n      await this.apiDeal\n        .getDataForecast('sales-deals', param)\n        .then(res => {\n          let parseData: Record<string, any> = {}\n          for (let el in res) {\n            parseData[el] = {\n              fromDate: res[el].from,\n              name: `${this.parseFilterType(this.query.filterType, this.query.filterType == 'week' ? res[el].from : el, this.query.filterType == 'week' ? res[el].to : el)}`,\n              numOfSalesDeal: res[el].amount,\n              totalValue: res[el].value,\n              salesDeals: res[el].deals\n            }\n            this.queryLoadMore[el] = {\n              limit: 10,\n              currentStageId: el\n            }\n          }\n          this.dataDrag = parseData\n          this.firstFromDate = this.dataDrag[Object.keys(this.dataDrag)[0]].fromDate\n        })\n        .catch(err => this.$message.error(err.message))\n    }\n  }\n  created(): void {\n    this.apiDeal = getRepository('deal', {\n      districtId: this.districtId\n    })\n  }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DealForecastPage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DealForecastPage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DealForecastPage.vue?vue&type=template&id=6236181e&scoped=true&\"\nimport script from \"./DealForecastPage.vue?vue&type=script&lang=ts&\"\nexport * from \"./DealForecastPage.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DealForecastPage.vue?vue&type=style&index=0&id=6236181e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6236181e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}