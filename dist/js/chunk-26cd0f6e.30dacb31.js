(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26cd0f6e"],{7007:function(e,t,a){},89256:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-popup",{staticClass:"fillterContract fillter-salary",attrs:{name:"filter-salary",open:e.handleOpen,close:e.handleClose,width:"850px",hiddenFooter:!0}},[a("div",{attrs:{slot:"title"},slot:"title"},[e._v("Bộ lọc")]),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingAll,expression:"loadingAll"}],ref:"filterForm",attrs:{model:e.dataForm,"label-position":"top"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"col"},[a("div",{staticClass:"be-flex select-date"},[a("el-form-item",{attrs:{label:"Năm"}},[a("el-date-picker",{attrs:{type:"year","value-format":"yyyy",placeholder:"Năm",clearable:""},model:{value:e.dataForm.year,callback:function(t){e.$set(e.dataForm,"year",t)},expression:"dataForm.year"}})],1),a("el-form-item",{attrs:{label:"Tháng"}},[a("el-select",{attrs:{placeholder:"Tháng",clearable:""},model:{value:e.dataForm.month,callback:function(t){e.$set(e.dataForm,"month",t)},expression:"dataForm.month"}},e._l(12,(function(e){return a("el-option",{key:e,attrs:{label:"Tháng "+e,value:e}})})),1)],1)],1),a("el-form-item",{attrs:{label:"Khu vực"}},[a("el-select",{staticClass:"select",attrs:{prop:"AREA",disabled:e.getDisableArea,remote:"","remote-method":e.remoteArea,clearable:"",filterable:"",multiple:"",placeholder:"Chọn khu vực"},model:{value:e.dataForm.areaIds,callback:function(t){e.$set(e.dataForm,"areaIds",t)},expression:"dataForm.areaIds"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadArea,expression:"loadArea"}],attrs:{"infinite-scroll-delay":"500"}},e._l(e.areaList,(function(e){return a("el-option",{key:e.id,attrs:{label:""+e.name,value:e.id}})})),1)])],1),a("el-form-item",{attrs:{label:"Chi nhánh"}},[a("el-select",{staticClass:"select",attrs:{disabled:e.getDisableArea,remote:"","remote-method":e.remoteBranch,clearable:"",filterable:"",multiple:"",placeholder:"Chọn chi nhánh"},model:{value:e.dataForm.branchIds,callback:function(t){e.$set(e.dataForm,"branchIds",t)},expression:"dataForm.branchIds"}},[a("div",{attrs:{"infinite-scroll-delay":"500"}},e._l(e.branchList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.locationCode+" - "+e.name,value:e.id}})})),1)])],1),a("el-form-item",{attrs:{label:"Đơn vị kinh doanh"}},[a("el-select",{staticClass:"select",attrs:{remote:"",disabled:e.getDisableTransaction,"remote-method":e.remoteTransactionOffice,clearable:"",filterable:"",multiple:"",placeholder:"Chọn đơn vị kinh doanh"},model:{value:e.dataForm.transOfficeIds,callback:function(t){e.$set(e.dataForm,"transOfficeIds",t)},expression:"dataForm.transOfficeIds"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMoreTransactionOffice,expression:"loadMoreTransactionOffice"}],attrs:{"infinite-scroll-delay":"500"}},e._l(e.transactionList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.locationCode+" - "+e.name,value:e.id}})})),1)])],1),"salaryLocation"!==e.$route.name?a("el-form-item",{attrs:{label:"NV tư vấn"}},[a("el-select",{staticClass:"select",attrs:{remote:"",disabled:e.getDisableSaleMember,"remote-method":e.remoteMembers,filterable:"",clearable:"","default-first-option":"",multiple:"",placeholder:"Chọn NV tư vấn"},model:{value:e.dataForm.salesMemberIds,callback:function(t){e.$set(e.dataForm,"salesMemberIds",t)},expression:"dataForm.salesMemberIds"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMember,expression:"loadMember"}],attrs:{"infinite-scroll-delay":"500"}},e._l(e.members,(function(e){return a("el-option",{key:e.id,class:e.isHide?"hide-option":null,attrs:{label:e.memberNo+" - "+e.fullName,value:e.id}})})),1)])],1):e._e()],1)]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"col"},[a("el-form-item",{attrs:{label:"Số hợp đồng",prop:"numOfContract"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:"Từ",type:"text",clearable:""},on:{change:function(t){return e.handleChangeInput("numOfContract","fromNumOfContract")}},model:{value:e.dataForm.fromNumOfContract,callback:function(t){e.$set(e.dataForm,"fromNumOfContract",t)},expression:"dataForm.fromNumOfContract"}})],1),a("span",{staticClass:"dash"},[a("i",{staticClass:"el-icon-minus icon-dash"})]),a("el-col",{staticStyle:{float:"right"},attrs:{span:11}},[a("el-input",{attrs:{placeholder:"Đến",type:"text",clearable:""},on:{change:function(t){return e.handleChangeInput("numOfContract","toNumOfContract")}},model:{value:e.dataForm.toNumOfContract,callback:function(t){e.$set(e.dataForm,"toNumOfContract",t)},expression:"dataForm.toNumOfContract"}})],1)],1),e.listError.numOfContract?a("small",{staticClass:"error"},[e._v('Giá trị "từ" phải nhỏ hơn giá trị "đến"')]):e._e()],1),a("el-form-item",{attrs:{label:"Số hủy",prop:"NumOfCancel"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:"Từ",type:"text",clearable:""},on:{change:function(t){return e.handleChangeInput("numOfCancel","fromNumOfCancel")}},model:{value:e.dataForm.fromNumOfCancel,callback:function(t){e.$set(e.dataForm,"fromNumOfCancel",t)},expression:"dataForm.fromNumOfCancel"}})],1),a("span",{staticClass:"dash"},[a("i",{staticClass:"el-icon-minus icon-dash"})]),a("el-col",{staticStyle:{float:"right"},attrs:{span:11}},[a("el-input",{attrs:{placeholder:"Đến",type:"text",clearable:""},on:{change:function(t){return e.handleChangeInput("numOfCancel","toNumOfCancel")}},model:{value:e.dataForm.toNumOfCancel,callback:function(t){e.$set(e.dataForm,"toNumOfCancel",t)},expression:"dataForm.toNumOfCancel"}})],1)],1),e.listError.numOfCancel?a("small",{staticClass:"error"},[e._v('Giá trị "từ" phải nhỏ hơn giá trị "đến"')]):e._e()],1),a("el-form-item",{attrs:{label:"Tỷ lệ hoàn thành KPI",prop:"ResultMonthRevenue"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:"Từ",type:"text",clearable:""},on:{change:function(t){return e.handleChangeInput("sesultMonthRevenue","fromResultMonthRevenue")}},model:{value:e.dataForm.fromResultMonthRevenue,callback:function(t){e.$set(e.dataForm,"fromResultMonthRevenue",t)},expression:"dataForm.fromResultMonthRevenue"}})],1),a("span",{staticClass:"dash"},[a("i",{staticClass:"el-icon-minus icon-dash"})]),a("el-col",{staticStyle:{float:"right"},attrs:{span:11}},[a("el-input",{attrs:{placeholder:"Đến",type:"text",clearable:""},on:{change:function(t){return e.handleChangeInput("sesultMonthRevenue","toResultMonthRevenue")}},model:{value:e.dataForm.toResultMonthRevenue,callback:function(t){e.$set(e.dataForm,"toResultMonthRevenue",t)},expression:"dataForm.toResultMonthRevenue"}})],1)],1),e.listError.sesultMonthRevenue?a("small",{staticClass:"error"},[e._v('Giá trị "từ" phải nhỏ hơn giá trị "đến"')]):e._e()],1),a("el-form-item",{attrs:{label:"Doanh số",prop:"Revenue"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:"Từ",type:"text",clearable:""},on:{change:function(t){return e.handleChangeInput("revenue","fromRevenue")}},model:{value:e.dataForm.fromRevenue,callback:function(t){e.$set(e.dataForm,"fromRevenue",t)},expression:"dataForm.fromRevenue"}})],1),a("span",{staticClass:"dash"},[a("i",{staticClass:"el-icon-minus icon-dash"})]),a("el-col",{staticStyle:{float:"right"},attrs:{span:11}},[a("el-input",{attrs:{placeholder:"Đến",type:"text",clearable:""},on:{change:function(t){return e.handleChangeInput("revenue","toRevenue")}},model:{value:e.dataForm.toRevenue,callback:function(t){e.$set(e.dataForm,"toRevenue",t)},expression:"dataForm.toRevenue"}})],1)],1),e.listError.revenue?a("small",{staticClass:"error"},[e._v('Giá trị "từ" phải nhỏ hơn giá trị "đến"')]):e._e()],1),a("el-form-item",{attrs:{label:"Lương kinh doanh",prop:"SalarySalesAmount"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:"Từ",type:"text",clearable:""},on:{change:function(t){return e.handleChangeInput("salarySalesAmount","fromSalarySalesAmount")}},model:{value:e.dataForm.fromSalarySalesAmount,callback:function(t){e.$set(e.dataForm,"fromSalarySalesAmount",t)},expression:"dataForm.fromSalarySalesAmount"}})],1),a("span",{staticClass:"dash"},[a("i",{staticClass:"el-icon-minus icon-dash"})]),a("el-col",{staticStyle:{float:"right"},attrs:{span:11}},[a("el-input",{attrs:{placeholder:"Đến",type:"text",clearable:""},on:{change:function(t){return e.handleChangeInput("salarySalesAmount","toSalarySalesAmount")}},model:{value:e.dataForm.toSalarySalesAmount,callback:function(t){e.$set(e.dataForm,"toSalarySalesAmount",t)},expression:"dataForm.toSalarySalesAmount"}})],1)],1),e.listError.salarySalesAmount?a("small",{staticClass:"error"},[e._v('Giá trị "từ" phải nhỏ hơn giá trị "đến"')]):e._e()],1),a("el-form-item",{attrs:{label:"Truy thu",prop:"ArrearsAmount"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:"Từ",type:"text",clearable:""},on:{change:function(t){return e.handleChangeInput("arrearsAmount","fromArrearsAmount")}},model:{value:e.dataForm.fromArrearsAmount,callback:function(t){e.$set(e.dataForm,"fromArrearsAmount",t)},expression:"dataForm.fromArrearsAmount"}})],1),a("span",{staticClass:"dash"},[a("i",{staticClass:"el-icon-minus icon-dash"})]),a("el-col",{staticStyle:{float:"right"},attrs:{span:11}},[a("el-input",{attrs:{placeholder:"Đến",type:"text",clearable:""},on:{change:function(t){return e.handleChangeInput("arrearsAmount","toArrearsAmount")}},model:{value:e.dataForm.toArrearsAmount,callback:function(t){e.$set(e.dataForm,"toArrearsAmount",t)},expression:"dataForm.toArrearsAmount"}})],1)],1),e.listError.arrearsAmount?a("small",{staticClass:"error"},[e._v('Giá trị "từ" phải nhỏ hơn giá trị "đến"')]):e._e()],1),a("el-form-item",{attrs:{label:"Tổng lương",prop:"SalaryTotalAmount"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:"Từ",type:"text",clearable:""},on:{change:function(t){return e.handleChangeInput("salaryTotalAmount","fromSalaryTotalAmount")}},model:{value:e.dataForm.fromSalaryTotalAmount,callback:function(t){e.$set(e.dataForm,"fromSalaryTotalAmount",t)},expression:"dataForm.fromSalaryTotalAmount"}})],1),a("span",{staticClass:"dash"},[a("i",{staticClass:"el-icon-minus icon-dash"})]),a("el-col",{staticStyle:{float:"right"},attrs:{span:11}},[a("el-input",{attrs:{placeholder:"Đến",type:"text",clearable:""},on:{change:function(t){return e.handleChangeInput("salaryTotalAmount","toSalaryTotalAmount")}},model:{value:e.dataForm.toSalaryTotalAmount,callback:function(t){e.$set(e.dataForm,"toSalaryTotalAmount",t)},expression:"dataForm.toSalaryTotalAmount"}})],1)],1),e.listError.salaryTotalAmount?a("small",{staticClass:"error"},[e._v('Giá trị "từ" phải nhỏ hơn giá trị "đến"')]):e._e()],1)],1)])],1)],1),a("template",{slot:"footer"},[a("div",{staticClass:"bottom flex jc-flex-end"},[a("el-button",{on:{click:e.resetData}},[e._v("Mặc định")]),a("el-button",{staticClass:"be-btn-danger",on:{click:e.handleSave}},[e._v("Áp dụng")])],1)])],2)},o=[],n=a("f3f3"),s=a("d0ff"),l=a("c964"),i=a("276c"),c=a("e954"),u=a("920b"),m=a("92a6"),h=(a("96cf"),a("a9e3"),a("ac1f"),a("841c"),a("99af"),a("b0c0"),a("d3b7"),a("3ca3"),a("ddb0"),a("a15b"),a("9ab4")),d=a("1b40"),f=a("08ba"),p=a("9f48"),b=a("c56f"),v=a("2b17"),y=a("2ef0"),F=a("4bb5"),A=Object(F["a"])("beAudit"),O=Object(f["a"])("user"),g=function(e){Object(u["a"])(a,e);var t=Object(m["a"])(a);function a(){var e,r,o;return Object(i["a"])(this,a),o=t.apply(this,arguments),o.locationRes=void 0,o.members=[],o.data={},o.isLoading=!1,o.value1=[],o.valueSelect=[],o.valueTest=null,o.value="",o.input="",o.currentContractYear="",o.currentFeeYear="",o.numOfContractYear="",o.isActive=!0,o.isCaret=!0,o.isRight=!0,o.options=[],o.option=[],o.listOptions=[],o.selectOptions=[],o.params={type:0,districtId:null===(e=o.user)||void 0===e||null===(r=e.districts)||void 0===r?void 0:r[0].id},o.listError={numOfContract:!1,numOfCancel:!1,revenue:!1,salarySalesAmount:!1,arrearsAmount:!1,salaryTotalAmount:!1,sesultMonthRevenue:!1,value:!1},o.dataForm={areaIds:[],branchIds:[],transOfficeIds:[],salesMemberIds:[],month:(new Date).getMonth()+1,year:(new Date).getFullYear()+"",pageIndex:1,pageSize:20,fromNumOfContract:"",toNumOfContract:"",fromNumOfCancel:"",toNumOfCancel:"",fromResultMonthRevenue:"",toResultMonthRevenue:"",fromRevenue:"",toRevenue:"",fromSalarySalesAmount:"",toSalarySalesAmount:"",fromArrearsAmount:"",toArrearsAmount:"",fromSalaryTotalAmount:"",toSalaryTotalAmount:""},o.query={branches:{i:0,ps:1e3,search:"",type:2},offices:{i:0,ps:1e3,search:"",type:3},members:{i:0,ps:20,search:"",statusAccount:0,groupCode:"INSURANCE",sort:1}},o.saleChanelList=[],o.contractStatusList=[],o.customerTypeList=[],o.consutanList=[],o.expiredStatus=[],o.paymentPeriodList=[{value:"1",lable:"1"},{value:"2",lable:"2"},{value:"4",lable:"4"}],o.paginitInfo={i:0,ps:20,limit:"",page:1,search:"",statusAccount:0,groupCode:"INSURANCE",sort:1},o.areaList=[],o.branchList=[],o.employeeList=[],o.transactionList=[],o.loadingAll=!1,o.queryArea={type:1},o.queryBranch={type:2,search:"",i:0,ps:1e4},o.queryOffice={type:3,search:"",i:0,ps:1e4},o.queryEmployee={i:0,ps:20,search:"",statusAccount:0,groupCode:"INSURANCE"},o.listFilter={member:[],branch:[],offfice:[]},o}return Object(c["a"])(a,[{key:"convertNumberToDecimal",value:function(e){this.dataForm[e]="0"===this.$options.filters.formatNumber(this.convertDecimalToNumber(this.dataForm[e]))?null:this.$options.filters.formatNumber(this.convertDecimalToNumber(this.dataForm[e]))}},{key:"convertDecimalToNumber",value:function(e){return Number(e.replaceAll(",",""))}},{key:"loadMoreBranch",value:function(){this.query.branches.i+=20;var e=Object(y["debounce"])(this.getBranch,100);e(this.query.branches.search,!0)}},{key:"remoteBranch",value:function(e){this.query.branches.search=Object(y["trim"])(e),this.query.branches.i=0,this.query.branches.ps=20;var t=Object(y["debounce"])(this.getBranch,500);t(e)}},{key:"getBranch",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a,r,o,n,l,i=this,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]&&c[1],e.prev=1,e.next=4,null===(r=this.locationRes)||void 0===r?void 0:r.list("branch",{search:Object(y["trim"])(t),i:this.query.branches.i,ps:this.query.branches.ps});case 4:o=e.sent,a?(n=o||[],this.branchList=[].concat(Object(s["a"])(this.branchList),Object(s["a"])(n))):this.branchList=o||[],this.getDisableArea&&(Object(y["filter"])(this.branchList,(function(e){return e.id===i.user.branchId})).length||(l={id:this.user.branchId,name:this.user.branchName,locationCode:this.user.branchCode},this.branchList.push(l)),this.dataForm.branchIds.push(this.user.branchId)),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),this.isLoading=!1,this.branchList=[];case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleChangeInput",value:function(e,t){this.convertNumberToDecimal(t),"numOfContract"===e&&(this.dataForm.toNumOfContract&&this.dataForm.fromNumOfContract&&this.convertDecimalToNumber(this.dataForm.toNumOfContract)<this.convertDecimalToNumber(this.dataForm.fromNumOfContract)?this.listError.numOfContract=!0:this.listError.numOfContract=!1),"numOfCancel"===e&&(this.dataForm.toNumOfCancel&&this.dataForm.fromNumOfCancel&&this.convertDecimalToNumber(this.dataForm.toNumOfCancel)<this.convertDecimalToNumber(this.dataForm.fromNumOfCancel)?this.listError.numOfCancel=!0:this.listError.numOfCancel=!1),"sesultMonthRevenue"===e&&(this.dataForm.toResultMonthRevenue&&this.dataForm.fromResultMonthRevenue&&this.convertDecimalToNumber(this.dataForm.toResultMonthRevenue)<this.convertDecimalToNumber(this.dataForm.fromResultMonthRevenue)?this.listError.sesultMonthRevenue=!0:this.listError.sesultMonthRevenue=!1),"revenue"===e&&(this.dataForm.toRevenue&&this.dataForm.fromRevenue&&this.convertDecimalToNumber(this.dataForm.toRevenue)<this.convertDecimalToNumber(this.dataForm.fromRevenue)?this.listError.revenue=!0:this.listError.revenue=!1),"salarySalesAmount"===e&&(this.dataForm.toSalarySalesAmount&&this.dataForm.toSalarySalesAmount&&this.convertDecimalToNumber(this.dataForm.toSalarySalesAmount)<this.convertDecimalToNumber(this.dataForm.fromSalarySalesAmount)?this.listError.salarySalesAmount=!0:this.listError.salarySalesAmount=!1),"arrearsAmount"===e&&(this.dataForm.toArrearsAmount&&this.dataForm.fromArrearsAmount&&this.convertDecimalToNumber(this.dataForm.toArrearsAmount)<this.convertDecimalToNumber(this.dataForm.fromArrearsAmount)?this.listError.arrearsAmount=!0:this.listError.arrearsAmount=!1),"salaryTotalAmount"===e&&(this.dataForm.toSalaryTotalAmount&&this.dataForm.fromSalaryTotalAmount&&this.convertDecimalToNumber(this.dataForm.toSalaryTotalAmount)<this.convertDecimalToNumber(this.dataForm.fromSalaryTotalAmount)?this.listError.salaryTotalAmount=!0:this.listError.salaryTotalAmount=!1)}},{key:"resetQuery",value:function(e){"branch"===e&&(this.queryBranch.i=0,this.queryBranch.ps=1e4),"office"===e&&(this.queryOffice.i=0,this.queryOffice.ps=1e4),"member"===e&&(this.queryEmployee.i=0,this.queryEmployee.ps=20)}},{key:"remoteArea",value:function(e){var t=this,a=Object(n["a"])(Object(n["a"])({},this.queryArea),{},{search:Object(y["trim"])(e)});O.getListFilterSalary(a,this.districtId).then((function(e){t.areaList=e.data})).catch((function(e){return console.log(e)}))}},{key:"remoteMembers",value:function(e){var t=this;this.resetQuery("member");var a=Object(n["a"])(Object(n["a"])({},this.queryEmployee),{},{search:Object(y["trim"])(e)});this.apiEmployee.getEmployeeList(a).then((function(e){return t.members=e.data})).catch((function(e){return console.log(e)}))}},{key:"loadArea",value:function(){}},{key:"getAreaList",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object(n["a"])(Object(n["a"])({},this.queryArea),{},{districtId:this.districtId}),e.next=3,O.getAreaList(t).then((function(e){a.areaList=e.data,a.getDisableArea&&a.dataForm.areaIds.push(a.user.areaId),a.isLoading=!1})).catch((function(){a.isLoading=!1}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadMember",value:function(){this.queryEmployee.i+=20,this.getEmployeeList()}},{key:"getEmployeeList",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.apiEmployee.getEmployeeList(this.queryEmployee).then((function(e){if(t.members=[].concat(Object(s["a"])(t.members),Object(s["a"])(e.data)),t.getDisableSaleMember)if(Object(y["filter"])(t.members,(function(e){return e.id===t.user.memberId})).length)t.dataForm.salesMemberIds.push(t.user.memberId);else{var a={id:t.user.memberId,fullName:t.user.fullName,memberNo:t.user.memberNo};t.members.push(a),t.dataForm.salesMemberIds.push(t.user.memberId)}})).catch((function(){t.isLoading=!1,t.loadingAll=!1}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadMoreTransactionOffice",value:function(){this.query.offices.i+=20,this.query.offices.ps=20;var e=Object(y["debounce"])(this.getTransactionOffice,100);e(this.query.offices.search,!0)}},{key:"remoteTransactionOffice",value:function(e){this.query.offices.search=Object(y["trim"])(e),this.query.offices.i=0,this.query.offices.ps=20;var t=Object(y["debounce"])(this.getTransactionOffice,500);t(e)}},{key:"getTransactionOffice",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a,r,o,n,l,i=this,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]&&c[1],e.prev=1,e.next=4,null===(r=this.locationRes)||void 0===r?void 0:r.list("office",{search:Object(y["trim"])(t),i:this.query.offices.i,ps:this.query.offices.ps});case 4:o=e.sent,a?(n=o||[],this.transactionList=[].concat(Object(s["a"])(this.transactionList),Object(s["a"])(n))):this.transactionList=o||[],this.getDisableTransaction&&(Object(y["filter"])(this.transactionList,(function(e){return e.id===i.user.transactionOfficeId})).length||(l={id:this.user.transactionOfficeId,name:this.user.transactionOfficeName,locationCode:this.user.transactionOfficeCode},this.transactionList.push(l)),this.dataForm.transOfficeIds.push(this.user.transactionOfficeId)),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),this.isLoading=!1,this.transactionList=[];case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleOpen",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingAll=!0,a=this.getFilter(null===(t=this.$route)||void 0===t?void 0:t.name),e.next=4,Promise.all([this.getAreaList(),this.getTransactionOffice(""),this.getBranch(""),this.getEmployeeList()]).then((function(){var e;a&&(r.dataForm=Object.assign(r.dataForm,a.filters),null!==(e=a.filters.salesMemberIds)&&void 0!==e&&e.length&&r.handlePushSaleMember(a.filters.salesMemberIds),console.log(r.dataForm));r.loadingAll=!1}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handlePushSaleMember",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a=[],r=0;r<t.length;r++)a.push(this.getEmployee(t[r]));return e.next=4,Promise.all(a);case 4:o=e.sent,this.members=[].concat(Object(s["a"])(this.members),Object(s["a"])(o));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getEmployee",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.apiEmployee.getEmployeeList({search:t},!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"resetQueryAll",value:function(){this.queryBranch={type:2,search:"",i:0,ps:1e3},this.queryOffice={type:3,search:"",i:0,ps:1e3},this.queryEmployee={i:0,ps:20,search:"",statusAccount:0,groupCode:"INSURANCE"}}},{key:"handleClose",value:function(){this.resetQueryAll(),this.branchList=[],this.transactionList=[],this.members=[],this.$refs.filterForm.clearValidate(),this.dataForm.fromNumOfContract="",this.dataForm.toNumOfContract="",this.dataForm.fromNumOfCancel="",this.dataForm.toNumOfCancel="",this.dataForm.fromResultMonthRevenue="",this.dataForm.toResultMonthRevenue="",this.dataForm.fromRevenue="",this.dataForm.toRevenue="",this.dataForm.fromSalarySalesAmount="",this.dataForm.toSalarySalesAmount="",this.dataForm.fromArrearsAmount="",this.dataForm.toArrearsAmount="",this.dataForm.fromSalaryTotalAmount="",this.dataForm.toSalaryTotalAmount="",this.areaList=[],this.getDisableArea&&(this.dataForm.areaIds=[],this.dataForm.branchIds=[]),this.getDisableSaleMember&&(this.dataForm.salesMemberIds=[]),this.getDisableTransaction&&(this.dataForm.transOfficeIds=[])}},{key:"handleSave",value:function(){var e,t=this;this.setReportFilter({contract:null===(e=this.$route)||void 0===e?void 0:e.name,filters:Object(n["a"])({},this.dataForm)});var a=!1;for(var r in this.listError)if(1==this.listError[r]){a=!0;break}var o=this.$refs.filterForm;o.validate((function(e){if(e&&!a){var r=Object(n["a"])(Object(n["a"])({},t.dataForm),{},{fromNumOfContract:t.dataForm.fromNumOfContract?t.convertDecimalToNumber(t.dataForm.fromNumOfContract):null,toNumOfContract:t.dataForm.toNumOfContract?t.convertDecimalToNumber(t.dataForm.toNumOfContract):null,fromNumOfCancel:t.dataForm.fromNumOfCancel?t.convertDecimalToNumber(t.dataForm.fromNumOfCancel):null,toNumOfCancel:t.dataForm.toNumOfCancel?t.convertDecimalToNumber(t.dataForm.toNumOfCancel):null,fromResultMonthRevenue:t.dataForm.fromResultMonthRevenue?t.convertDecimalToNumber(t.dataForm.fromResultMonthRevenue):null,toResultMonthRevenue:t.dataForm.toResultMonthRevenue?t.convertDecimalToNumber(t.dataForm.toResultMonthRevenue):null,fromRevenue:t.dataForm.fromRevenue?t.convertDecimalToNumber(t.dataForm.fromRevenue):null,toRevenue:t.dataForm.toRevenue?t.convertDecimalToNumber(t.dataForm.toRevenue):null,fromSalarySalesAmount:t.dataForm.fromSalarySalesAmount?t.convertDecimalToNumber(t.dataForm.fromSalarySalesAmount):null,toSalarySalesAmount:t.dataForm.toSalarySalesAmount?t.convertDecimalToNumber(t.dataForm.toSalarySalesAmount):null,fromArrearsAmount:t.dataForm.fromArrearsAmount?t.convertDecimalToNumber(t.dataForm.fromArrearsAmount):null,toArrearsAmount:t.dataForm.toArrearsAmount?t.convertDecimalToNumber(t.dataForm.toArrearsAmount):null,fromSalaryTotalAmount:t.dataForm.fromSalaryTotalAmount?t.convertDecimalToNumber(t.dataForm.fromSalaryTotalAmount):null,toSalaryTotalAmount:t.dataForm.toSalaryTotalAmount?t.convertDecimalToNumber(t.dataForm.toSalaryTotalAmount):null,areaIds:t.dataForm.areaIds.length?t.dataForm.areaIds.join(","):null,branchIds:t.dataForm.branchIds.length?t.dataForm.branchIds.join(","):null,transOfficeIds:t.dataForm.transOfficeIds.length?t.dataForm.transOfficeIds.join(","):null,salesMemberIds:t.dataForm.salesMemberIds.length?t.dataForm.salesMemberIds.join(","):null});t.$emit("apply",r),t.setOpenPopup({popupName:"filter-salary",isOpen:!1})}else t.$message.error("Nhập chính xác thông tin!")}))}},{key:"created",value:function(){var e,t,a,r,o,n;this.apiEmployee=Object(f["a"])("employee",{districtId:null===(e=this.user)||void 0===e||null===(t=e.districts)||void 0===t?void 0:t[0].id}),this.api=Object(f["a"])("contract",{districtId:null===(a=this.user)||void 0===a||null===(r=a.districts)||void 0===r?void 0:r[0].id}),this.apiParam=Object(f["a"])("param",{districtId:null===(o=this.user)||void 0===o||null===(n=o.districts)||void 0===n?void 0:n[0].id}),this.locationRes=Object(f["a"])("location",{districtId:this.districtId})}},{key:"resetData",value:function(){this.$refs.filterForm.clearValidate();var e=Object(y["mapValues"])(this.listError,(function(){return!1}));this.listError=e,this.dataForm=Object(n["a"])(Object(n["a"])({},this.dataForm),{},{toSalaryTotalAmount:null,fromSalaryTotalAmount:null,toArrearsAmount:null,fromArrearsAmount:null,toSalarySalesAmount:null,fromSalarySalesAmount:null,toRevenue:null,fromRevenue:null,toResultMonthRevenue:null,fromResultMonthRevenue:null,toNumOfCancel:null,fromNumOfCancel:null,toNumOfContract:null,fromNumOfContract:null,month:(new Date).getMonth()+1,year:(new Date).getFullYear()+""}),this.checkResetData()}},{key:"checkResetData",value:function(){this.getDisableArea||(this.dataForm.areaIds=[],this.dataForm.branchIds=[]),this.getDisableSaleMember||(this.dataForm.salesMemberIds=[]),this.getDisableTransaction||(this.dataForm.transOfficeIds=[])}}]),a}(Object(d["b"])(p["a"],v["a"],b["a"]));Object(h["a"])([A.State("filters")],g.prototype,"filters",void 0),Object(h["a"])([A.Action("setReportFilter")],g.prototype,"setReportFilter",void 0),Object(h["a"])([A.Getter("getFilter")],g.prototype,"getFilter",void 0),g=Object(h["a"])([Object(d["a"])({components:{}})],g);var C=g,N=C,R=(a("9025"),a("2877")),S=Object(R["a"])(N,r,o,!1,null,"b0504a50",null);t["a"]=S.exports},9025:function(e,t,a){"use strict";a("7007")}}]);
//# sourceMappingURL=chunk-26cd0f6e.30dacb31.js.map