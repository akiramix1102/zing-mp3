(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b6ea5614"],{"10f8":function(e,t,a){"use strict";a("8185")},"19f6":function(e,t,a){"use strict";var r=a("276c"),i=a("e954"),n=a("920b"),s=a("92a6"),l=(a("caad"),a("2532"),a("9ab4")),o=a("1b40"),c=a("4bb5"),u=Object(c["a"])("beUser"),h=function(e){Object(n["a"])(a,e);var t=Object(s["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return Object(i["a"])(a,[{key:"memberLogin",get:function(){return this.user}},{key:"branchId",get:function(){return this.user.branchId}},{key:"memberId",get:function(){return this.user.id}},{key:"brandName",get:function(){return this.user.branchName}},{key:"memberFullName",get:function(){return this.user.fullName}},{key:"roleHOLEADERAmin",get:function(){var e=!1;return this.user.role&&(this.roleMembers.userRole.includes("HO_LEADER")||this.roleMembers.userRole.includes("HO_MEMBER")||this.roleMembers.userRole.includes("ADMIN"))&&(e=!0),e}},{key:"roleSaleMember",get:function(){var e=!1;return!this.roleMembers.userRole.includes("TRANSACTION_OFFICE_MEMBER")||this.roleOfficeLeaderMember||this.roleBranchMember||this.roleBranchLeader||this.roleHOLEADERAmin||(e=!0),e}},{key:"roleOfficeLeaderMember",get:function(){var e=!1;return!this.roleMembers.userRole.includes("TRANSACTION_OFFICE_LEADER")||this.roleBranchMember||this.roleBranchLeader||this.roleHOLEADERAmin||(e=!0),e}},{key:"roleBranchMember",get:function(){var e=!1;return!this.roleMembers.userRole.includes("BRANCH_MEMBER")||this.roleBranchLeader||this.roleHOLEADERAmin||(e=!0),e}},{key:"roleBranchLeader",get:function(){var e=!1;return this.roleMembers.userRole.includes("BRANCH_LEADER")&&!this.roleHOLEADERAmin&&(e=!0),e}}]),a}(o["d"]);Object(l["a"])([u.State("user")],h.prototype,"user",void 0),Object(l["a"])([u.State("role")],h.prototype,"roleMembers",void 0),h=Object(l["a"])([o["a"]],h),t["a"]=h},"25f08":function(e,t,a){"use strict";a("9fdb")},"7cab":function(e,t,a){"use strict";var r=a("f3f3"),i=a("c964"),n=a("276c"),s=a("e954"),l=a("920b"),o=a("92a6"),c=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("99af"),a("9ab4")),u=a("08ba"),h=a("1b40"),d=function(e){Object(l["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.reportRes2=void 0,e.isExcelLoading=!1,e.isPdfLoading=!1,e}return Object(s["a"])(a,[{key:"handleExport",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,n,s,l,o,c,u,h=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=h.length>1&&void 0!==h[1]?h[1]:"excel",i=h.length>2?h[2]:void 0,h.length>3?h[3]:void 0,"excel"===a&&(this.isExcelLoading=!0),"pdf"===a&&(this.isPdfLoading=!0),e.prev=5,e.next=8,null===(n=this.reportRes2)||void 0===n?void 0:n.exportKpi(t,Object(r["a"])(Object(r["a"])({},i),{},{ext:"excel"==a?"xlsx":"pdf"}));case 8:s=e.sent,l=window.URL.createObjectURL(new Blob([s.data])),o=document.createElement("a"),o.href=l,c=new Date,u="".concat(c.getFullYear()).concat(c.getMonth()+1).concat(c.getDate()).concat(c.getHours()).concat(c.getMinutes()).concat(c.getMilliseconds()),o.setAttribute("download","KPI_".concat("member"==t?"CBNV":"DVKD","_").concat(u,".").concat("pdf"===a?"pdf":"xlsx")),document.body.appendChild(o),o.click(),this.isExcelLoading=!1,this.isPdfLoading=!1,e.next=26;break;case 21:e.prev=21,e.t0=e["catch"](5),404===e.t0.response.status&&this.$message.error("Không tìm thấy dữ liệu xuất file"),this.isExcelLoading=!1,this.isPdfLoading=!1;case 26:case"end":return e.stop()}}),e,this,[[5,21]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"created",value:function(){this.reportRes2=Object(u["a"])("report",{districtId:this.districtId})}}]),a}(h["d"]);d=Object(c["a"])([h["a"]],d),t["a"]=d},8185:function(e,t,a){},"908c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"report-page"},["full"===e.getScreen?a("base-tree-table",{staticClass:"table-text-body-bold table-expanded table-width-background table-with-summary-2 custom-table custom-table-height custom-table-height-9e custom-kpi-dvkd",attrs:{data:e.data,table:e.table,filters:e.filters,isLoading:e.isLoading,showPagination:!0,showSummary:!0,summaryMethod:e.summaryMethod,"default-expand-all":!1,sumText:"Tổng",paginationInfo:"đơn vị kinh doanh",rowKey:"id",emptyText:"Không có dữ liệu kpi"},on:{sizeChange:e.handleSizeChange,currentChange:e.handleCurrentChange,filterChange:e.handleFiltersChange},scopedSlots:e._u([{key:"header",fn:function(t){var r=t.filters,i=t.events;return a("div",{staticClass:"be-flex align-center header"},[a("report-filter",{staticClass:"be-flex-item",attrs:{filters:r},on:{change:i}}),a("div",{staticClass:"actions"},[a("el-button",{staticClass:"custom-button",attrs:{loading:e.isExcelLoading},on:{click:function(t){return e.handleExportFile("pl9e","excel",r,e.table)}}},[a("span",{staticClass:"be-inline-flex align-center"},[a("base-icon",{staticClass:"icon",attrs:{icon:"excel-fullcolor"}}),e._v(" Xuất Excel ")],1)]),a("el-button",{staticClass:"custom-button",attrs:{loading:e.isPdfLoading},on:{click:function(t){return e.handleExportFile("pl9e","pdf",r,e.table)}}},[a("span",{staticClass:"be-inline-flex align-center"},[a("base-icon",{staticClass:"icon",attrs:{icon:"pdf"}}),e._v(" Xuất PDF ")],1)])],1)],1)}}],null,!1,756019140)},[a("el-table-column",{attrs:{label:"#",type:"index",align:"center",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+(e.table.page-1)*e.table.limit+1))]}}],null,!1,3530105251)}),a("el-table-column",{attrs:{label:"Mã đvkd",prop:"transactionOfficeCode",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.transactionOfficeCode))])]}}],null,!1,2171674191)}),a("el-table-column",{attrs:{label:"ĐƠN VỊ KINH DOANH","min-width":"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(t.row.transactionOfficeName))])]}}],null,!1,4156176622)}),a("el-table-column",{attrs:{label:"Luỹ kế năm",align:"center"}},[a("el-table-column",{attrs:{label:"chỉ tiêu",prop:"yearTargetAmount",width:"270",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatNumber")(t.row.yearTargetAmount)))])]}}],null,!1,893400461)}),a("el-table-column",{attrs:{label:"kết quả",prop:"yearResultAmount",width:"260",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatNumber")(t.row.yearResultAmount)))])]}}],null,!1,750189461)}),a("el-table-column",{attrs:{label:"tlht",prop:"yearResultPercent",width:"158",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatPercent")(t.row.yearResultPercent)))])]}}],null,!1,2440616698)})],1),a("el-table-column",{attrs:{label:"Tháng",align:"center"}},[a("el-table-column",{attrs:{label:"Chỉ tiêu",prop:"mtargetAmount",width:"270px",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatNumber")(t.row.mtargetAmount)))]}}],null,!1,769321300)}),a("el-table-column",{attrs:{label:"Kết quả",prop:"mresultAmount",width:"270px",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatNumber")(t.row.mresultAmount)))]}}],null,!1,1191205964)}),a("el-table-column",{attrs:{label:"tlht",prop:"mresultPercent",width:"150",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatPercent")(t.row.mresultPercent)))]}}],null,!1,829100771)})],1)],1):e._e(),"hd"===e.getScreen?a("base-tree-table",{staticClass:"table-text-body-bold table-expanded table-width-background table-with-summary-2 custom-table custom-table-height custom-table-height-9e custom-kpi-dvkd",attrs:{data:e.data,table:e.table,filters:e.filters,isLoading:e.isLoading,showPagination:!0,showSummary:!0,summaryMethod:e.summaryMethod,"default-expand-all":!1,sumText:"Tổng",paginationInfo:"đơn vị kinh doanh",rowKey:"id",emptyText:"Không có dữ liệu kpi"},on:{sizeChange:e.handleSizeChange,currentChange:e.handleCurrentChange,filterChange:e.handleFiltersChange},scopedSlots:e._u([{key:"header",fn:function(t){var r=t.filters,i=t.events;return a("div",{staticClass:"be-flex align-center header"},[a("report-filter",{staticClass:"be-flex-item",attrs:{filters:r},on:{change:i}}),a("div",{staticClass:"actions"},[a("el-button",{staticClass:"custom-button",attrs:{loading:e.isExcelLoading},on:{click:function(t){return e.handleExportFile("branch","excel",r)}}},[a("span",{staticClass:"be-inline-flex align-center"},[a("base-icon",{staticClass:"icon",attrs:{icon:"excel-fullcolor"}}),e._v(" Xuất Excel ")],1)]),a("el-button",{staticClass:"custom-button",attrs:{loading:e.isPdfLoading},on:{click:function(t){return e.handleExportFile("branch","pdf",r)}}},[a("span",{staticClass:"be-inline-flex align-center"},[a("base-icon",{staticClass:"icon",attrs:{icon:"pdf"}}),e._v(" Xuất PDF ")],1)])],1)],1)}}],null,!1,3242328516)},[a("el-table-column",{attrs:{label:"#",type:"index",align:"center",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+(e.table.page-1)*e.table.limit+1))]}}],null,!1,3530105251)}),a("el-table-column",{attrs:{label:"Mã đvkd",prop:"transactionOfficeCode",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.transactionOfficeCode))])]}}],null,!1,2171674191)}),a("el-table-column",{attrs:{label:"ĐƠN VỊ KINH DOANH",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(t.row.transactionOfficeName))])]}}],null,!1,4156176622)}),a("el-table-column",{attrs:{label:"Luỹ kế năm",align:"center"}},[a("el-table-column",{attrs:{label:"chỉ tiêu",prop:"yearTargetAmount",width:"170",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatNumber")(t.row.yearTargetAmount)))])]}}],null,!1,893400461)}),a("el-table-column",{attrs:{label:"kết quả",prop:"yearResultAmount",width:"170",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatNumber")(t.row.yearResultAmount)))])]}}],null,!1,750189461)}),a("el-table-column",{attrs:{label:"tlht",prop:"yearResultPercent",width:"105",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatPercent")(t.row.yearResultPercent)))])]}}],null,!1,2440616698)})],1),a("el-table-column",{attrs:{label:"Tháng",align:"center"}},[a("el-table-column",{attrs:{label:"Chỉ tiêu",prop:"mtargetAmount",width:"170",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e._f("formatNumber")(a["mtargetAmount"])))]}}],null,!1,865562110)}),a("el-table-column",{attrs:{label:"Kết quả",prop:"mresultAmount",width:"170",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e._f("formatNumber")(a["mresultAmount"])))]}}],null,!1,3710165094)}),a("el-table-column",{attrs:{label:"tlht",prop:"mresultPercent",width:"104",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e._f("formatPercent")(a["mresultPercent"])))]}}],null,!1,2214157001)})],1)],1):e._e(),"low"===e.getScreen?a("base-tree-table",{staticClass:"table-text-body-bold table-expanded table-width-background table-with-summary-2 custom-table custom-table-height custom-table-height-9e custom-kpi-dvkd",attrs:{data:e.data,table:e.table,filters:e.filters,isLoading:e.isLoading,showPagination:!0,showSummary:!0,summaryMethod:e.summaryMethod,"default-expand-all":!1,sumText:"Tổng",paginationInfo:"đơn vị kinh doanh",rowKey:"id",emptyText:"Không có dữ liệu kpi"},on:{sizeChange:e.handleSizeChange,currentChange:e.handleCurrentChange,filterChange:e.handleFiltersChange},scopedSlots:e._u([{key:"header",fn:function(t){var r=t.filters,i=t.events;return a("div",{staticClass:"be-flex align-center header"},[a("report-filter",{staticClass:"be-flex-item",attrs:{filters:r},on:{change:i}}),a("div",{staticClass:"actions"},[a("el-button",{staticClass:"custom-button",attrs:{loading:e.isExcelLoading},on:{click:function(t){return e.handleExportFile("branch","excel",r)}}},[a("span",{staticClass:"be-inline-flex align-center"},[a("base-icon",{staticClass:"icon",attrs:{icon:"excel-fullcolor"}}),e._v(" Xuất Excel ")],1)]),a("el-button",{staticClass:"custom-button",attrs:{loading:e.isPdfLoading},on:{click:function(t){return e.handleExportFile("branch","pdf",r)}}},[a("span",{staticClass:"be-inline-flex align-center"},[a("base-icon",{staticClass:"icon",attrs:{icon:"pdf"}}),e._v(" Xuất PDF ")],1)])],1)],1)}}],null,!1,3242328516)},[a("el-table-column",{attrs:{label:"#",type:"index",align:"center",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+(e.table.page-1)*e.table.limit+1))]}}],null,!1,3530105251)}),a("el-table-column",{attrs:{label:"Mã đvkd",prop:"transactionOfficeCode",align:"center",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.transactionOfficeCode))])]}}],null,!1,2171674191)}),a("el-table-column",{attrs:{label:"ĐƠN VỊ KINH DOANH","min-width":"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(t.row.transactionOfficeName))])]}}],null,!1,4156176622)}),a("el-table-column",{attrs:{label:"Luỹ kế năm",align:"center"}},[a("el-table-column",{attrs:{label:"chỉ tiêu",prop:"yearTargetAmount",width:"150",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatNumber")(t.row.yearTargetAmount)))])]}}],null,!1,893400461)}),a("el-table-column",{attrs:{label:"kết quả",prop:"yearResultAmount",width:"150",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatNumber")(t.row.yearResultAmount)))])]}}],null,!1,750189461)}),a("el-table-column",{attrs:{label:"tlht",prop:"yearResultPercent",width:"105",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatPercent")(t.row.yearResultPercent)))])]}}],null,!1,2440616698)})],1),a("el-table-column",{attrs:{label:"Tháng",align:"center"}},[a("el-table-column",{attrs:{label:"Chỉ tiêu",prop:"mtargetAmount",width:"150",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e._f("formatNumber")(a["mtargetAmount"])))]}}],null,!1,865562110)}),a("el-table-column",{attrs:{label:"Kết quả",prop:"mresultAmount",width:"150",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e._f("formatNumber")(a["mresultAmount"])))]}}],null,!1,3710165094)}),a("el-table-column",{attrs:{label:"tlht",prop:"mresultPercent",width:"100",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e._f("formatPercent")(a["mresultPercent"])))]}}],null,!1,2214157001)})],1)],1):e._e()],1)},i=[],n=a("f3f3"),s=a("c964"),l=a("276c"),o=a("e954"),c=a("920b"),u=a("92a6"),h=(a("96cf"),a("9ab4")),d=a("08ba"),f=a("2ef0"),b=a("1b40"),m=a("4bb5"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"report-filter"},[a("div",{staticClass:"be-flex align-center"},[a("el-input",{staticClass:"border-input input-width-beedu-prefix custom-report-input custom-input",attrs:{placeholder:e.searchPlaceholder},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("base-icon",{staticStyle:{"font-size":"12px"},attrs:{slot:"prefix",icon:"search"},slot:"prefix",model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("el-button",{staticClass:"be-button-unset custom-button mr-2",on:{click:e.handleClick}},[a("el-popover",{attrs:{placement:"bottom","popper-class":"popper-filter-import",width:"340",trigger:"click"},on:{show:e.handleShowPopper},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[a("div",{staticClass:"container"},[a("el-form",{ref:"filterForm",staticClass:"custom-report-form",attrs:{model:e.filters,"label-position":"top"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Năm"}},[a("el-date-picker",{staticClass:"filter-select",attrs:{type:"year",placeholder:"Chọn năm",clearable:""},model:{value:e.filters.kpiYear,callback:function(t){e.$set(e.filters,"kpiYear",t)},expression:"filters.kpiYear"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Tháng"}},[a("el-select",{attrs:{placeholder:"Tháng"},model:{value:e.filters.kpiMonth,callback:function(t){e.$set(e.filters,"kpiMonth",t)},expression:"filters.kpiMonth"}},e._l(12,(function(e){return a("el-option",{key:e,attrs:{label:"Tháng "+e,value:e}})})),1)],1)],1)],1),a("el-form-item",{attrs:{label:"Chỉ tiêu"}},[a("el-select",{staticClass:"filter-select",staticStyle:{"margin-right":"20px"},attrs:{placeholder:"Chỉ tiêu"},on:{change:e.handleChangeKpiCode},model:{value:e.filters.kpiCode,callback:function(t){e.$set(e.filters,"kpiCode",t)},expression:"filters.kpiCode"}},e._l(e.chitieu,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"Khu vực"}},[a("el-select",{staticClass:"filter-select",attrs:{size:"large",multiple:"",filterable:"",remote:"",placeholder:"Tìm khu vực","remote-method":function(t){return e.remoteMethod("areas",t)},loading:e.isLoading,disabled:e.disable.area},on:{change:function(t){return e.handleChange("change","areas",t)},"remove-tag":function(t){return e.handleChange("remove","areas",t)},clear:function(t){return e.handleChange("clear","areas",t)}},model:{value:e.filters.areaIdArray,callback:function(t){e.$set(e.filters,"areaIdArray",t)},expression:"filters.areaIdArray"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadAreas,expression:"loadAreas"}]},e._l(e.dataSelect.areas,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)])],1),a("el-form-item",{attrs:{label:"Chi nhánh"}},[a("el-select",{staticClass:"filter-select",attrs:{size:"large",multiple:"",filterable:"",remote:"",placeholder:"Tìm chi nhánh","remote-method":function(t){return e.remoteMethod("branches",t)},loading:e.isLoading,disabled:e.disable.branch},on:{change:function(t){return e.handleChange("change","branches",t)},"remove-tag":function(t){return e.handleChange("remove","branches",t)},clear:function(t){return e.handleChange("clear","branches",t)}},model:{value:e.filters.branchIdArray,callback:function(t){e.$set(e.filters,"branchIdArray",t)},expression:"filters.branchIdArray"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadBranches,expression:"loadBranches"}]},e._l(e.dataSelect.branches,(function(e){return a("el-option",{key:e.id,attrs:{label:e.locationCode+" - "+e.name,value:e.id}})})),1)])],1),a("el-form-item",{attrs:{label:"Đơn vị kinh doanh"}},[a("el-select",{staticClass:"filter-select",attrs:{size:"large",multiple:"",filterable:"",remote:"",placeholder:"Tìm đơn vị kinh doanh","remote-method":function(t){return e.remoteMethod("offices",t)},loading:e.isLoading,disabled:e.disable.office},on:{change:function(t){return e.handleChange("change","offices",t)},"remove-tag":function(t){return e.handleChange("remove","offices",t)},clear:function(t){return e.handleChange("clear","offices",t)}},model:{value:e.filters.transOfficeIdArray,callback:function(t){e.$set(e.filters,"transOfficeIdArray",t)},expression:"filters.transOfficeIdArray"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadOffices,expression:"loadOffices"}]},e._l(e.dataSelect.offices,(function(e){return a("el-option",{key:e.id,attrs:{label:e.locationCode+" - "+e.name,value:e.id}})})),1)])],1),a("el-form-item",{attrs:{label:"Tỷ lệ hoàn thành"}},[a("el-select",{staticClass:"filter-select",attrs:{placeholder:"Tất cả"},model:{value:e.filters.resultPercent,callback:function(t){e.$set(e.filters,"resultPercent",t)},expression:"filters.resultPercent"}},[a("el-option",{attrs:{value:"0",label:"Tất cả"}}),a("el-option",{attrs:{value:"1",label:"Từ 0% - 50%"}}),a("el-option",{attrs:{value:"2",label:"Từ 50% - 75%"}}),a("el-option",{attrs:{value:"3",label:"Từ 75% - 100%"}}),a("el-option",{attrs:{value:"4",label:"Từ 100% - 130%"}}),a("el-option",{attrs:{value:"5",label:"Trên 130%"}})],1)],1)],1)],1)],1)],1),a("div",{staticClass:"text-right footer"},[a("el-button",{staticClass:"group-filter-button",on:{click:function(t){return e.handleSubmit("reset")}}},[e._v("Mặc định")]),a("el-button",{staticClass:"be-button-danger group-filter-button",on:{click:e.handleSubmit}},[e._v("Áp dụng")])],1),a("div",{staticClass:"cursor text-filter",attrs:{slot:"reference"},slot:"reference"},[a("base-icon",{attrs:{icon:"filter"}}),e._v("Bộ lọc")],1)])],1),a("el-dropdown",{attrs:{trigger:"click",placement:"bottom-end","hide-timeout":500},on:{command:e.handleCommand}},[a("el-button",{staticClass:"be-button-unset custom-button text-filter"},[a("base-icon",{staticClass:"icon",attrs:{icon:"sort"}}),e._v(" Sắp xếp ")],1),a("el-dropdown-menu",{staticClass:"custom-report-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.sorts,(function(t,r){return a("el-dropdown-item",{key:r,class:{active:e.sortType===t.command},attrs:{command:t,divided:t.divided}},[a("span",{staticClass:"be-flex"},[a("span",{staticClass:"be-flex-item"},[e._v(" "+e._s(t.label)+" ")])])])})),1)],1)],1),a("filters-popup",{on:{change:e.handeChangeFilters}})],1)},g=[],v=a("d0ff"),y=(a("ac1f"),a("841c"),a("4de4"),a("7db0"),a("b0c0"),a("99af"),a("d3b7"),a("3ca3"),a("ddb0"),a("9f48")),k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-popup",{attrs:{width:"400px",name:"popup-filter-9i",top:"5vh",hiddenFooter:!0,open:e.handleOpen,close:e.handleClose}},[a("div",{attrs:{slot:"title"},slot:"title"},[e._v("Bộ lọc")]),a("div",{staticClass:"container"},[a("el-form",{ref:"filterForm",staticClass:"custom-report-form",attrs:{model:e.filters,rules:e.filterRules,"label-position":"top"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"Năm"}},[a("el-date-picker",{attrs:{type:"year",placeholder:"Pick a year"},model:{value:e.filters.year,callback:function(t){e.$set(e.filters,"year",t)},expression:"filters.year"}})],1)],1)],1),a("el-form-item",{attrs:{label:"Khu vực"}},[a("el-select",{staticClass:"filter-select",attrs:{size:"large",multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"Tìm khu vực","remote-method":e.remoteMethodGetArea,loading:e.isLoading},model:{value:e.filters.areaIds,callback:function(t){e.$set(e.filters,"areaIds",t)},expression:"filters.areaIds"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadAreas,expression:"loadAreas"}]},e._l(e.areas,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)])],1),a("el-form-item",{attrs:{label:"Chi nhánh"}},[a("el-select",{staticClass:"filter-select",attrs:{size:"large",multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"Tìm chi nhánh","remote-method":e.remoteMethodGetBranch,loading:e.isLoading},model:{value:e.filters.branchIds,callback:function(t){e.$set(e.filters,"branchIds",t)},expression:"filters.branchIds"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadBranches,expression:"loadBranches"}]},e._l(e.branches,(function(e){return a("el-option",{key:e.id,attrs:{label:e.locationCode+" - "+e.name,value:e.id}})})),1)])],1),a("el-form-item",{attrs:{label:"Đơn vị kinh doanh"}},[a("el-select",{staticClass:"filter-select",attrs:{size:"large",multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"Tìm đơn vị kinh doanh","remote-method":e.remoteMethodGetOffice,loading:e.isLoading},model:{value:e.filters.officeIds,callback:function(t){e.$set(e.filters,"officeIds",t)},expression:"filters.officeIds"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadOffices,expression:"loadOffices"}]},e._l(e.offices,(function(e){return a("el-option",{key:e.id,attrs:{label:e.locationCode+" - "+e.name,value:e.id}})})),1)])],1),a("el-form-item",{attrs:{label:"TLHT DS tháng"}},[a("el-select",{staticClass:"filter-select",attrs:{placeholder:"Tất cả"},model:{value:e.filters.selectMonthRevenue,callback:function(t){e.$set(e.filters,"selectMonthRevenue",t)},expression:"filters.selectMonthRevenue"}},[a("el-option",{attrs:{value:"0",label:"Tất cả"}}),a("el-option",{attrs:{value:"1",label:"Từ 0% - 50%"}}),a("el-option",{attrs:{value:"2",label:"Từ 50% - 75%"}}),a("el-option",{attrs:{value:"3",label:"Từ 75% - 100%"}}),a("el-option",{attrs:{value:"4",label:"Từ 100% - 130%"}}),a("el-option",{attrs:{value:"5",label:"Trên 130%"}})],1)],1)],1)],1)],1)],1),a("div",{staticClass:"text-right footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"group-filter-button",on:{click:function(t){return e.handleSubmit("reset")}}},[e._v("Mặc định")]),a("el-button",{staticClass:"be-button-danger group-filter-button",on:{click:e.handleSubmit}},[e._v("Áp dụng")])],1)])},O=[],w=(a("a9e3"),Object(m["a"])("beReport")),C=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.isLoading=!1,e.filters={month:(new Date).getMonth()+1,year:new Date},e.locationRes=void 0,e.options=[],e.areas=[],e.branches=[],e.offices=[],e.validateFilterForm=function(t,a,r){"numberRule"===t.field&&Number(e.filters.fromRevenue)>Number(e.filters.toRevenue)&&r(new Error('Giá trị "Từ" phải nhỏ hơn "Đến"')),"commission"===t.field&&Number(e.filters.fromCommission)>Number(e.filters.toCommission)&&r(new Error('Giá trị "Từ" phải nhỏ hơn "Đến"')),"revenue"===t.field&&Number(e.filters.fromValue)>Number(e.filters.toValue)&&r(new Error('Giá trị "Từ" phải nhỏ hơn "Đến"')),r()},e.filterRules={numberRule:[{validator:e.validateFilterForm,trigger:"blur"}],commission:[{validator:e.validateFilterForm,trigger:"blur"}],revenue:[{validator:e.validateFilterForm,trigger:"blur"}]},e.query={areas:{i:0,ps:20,search:""},branches:{i:0,ps:20,search:""},offices:{i:0,ps:20,search:""}},e}return Object(o["a"])(a,[{key:"remoteMethodGetArea",value:function(e){this.isLoading=!0,this.query.areas.search=e,this.query.areas.i=0,this.query.areas.ps=20;var t=Object(f["debounce"])(this.searchArea,500);t(e)}},{key:"remoteMethodGetBranch",value:function(e){this.isLoading=!0,this.query.branches.search=e,this.query.branches.i=0,this.query.branches.ps=20;var t=Object(f["debounce"])(this.searchBranch,500);t(e)}},{key:"remoteMethodGetOffice",value:function(e){this.isLoading=!0,this.query.offices.search=e,this.query.offices.i=0,this.query.offices.ps=20;var t=Object(f["debounce"])(this.searchOffice,500);t(e)}},{key:"loadAreas",value:function(){if(console.log(1),Object(f["size"])(this.areas)===this.query.areas.i+this.query.areas.ps){this.query.areas.i=Object(f["size"])(this.areas);var e=Object(f["debounce"])(this.searchArea,500);e(this.query.areas.search,!0)}}},{key:"loadBranches",value:function(){if(console.log(1),Object(f["size"])(this.branches)===this.query.branches.i+this.query.branches.ps){this.query.branches.i=Object(f["size"])(this.branches);var e=Object(f["debounce"])(this.searchBranch,500);e(this.query.branches.search,!0)}}},{key:"loadOffices",value:function(){if(console.log(1),Object(f["size"])(this.offices)===this.query.offices.i+this.query.offices.ps){this.query.offices.i=Object(f["size"])(this.offices);var e=Object(f["debounce"])(this.searchOffice,500);e(this.query.offices.search,!0)}}},{key:"searchArea",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,r,i,n,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]&&s[1],e.prev=1,e.next=4,null===(r=this.locationRes)||void 0===r?void 0:r.list("area",{search:Object(f["trim"])(t),i:this.query.areas.i,ps:this.query.areas.ps});case 4:i=e.sent,a?(n=i||[],this.areas=[].concat(Object(v["a"])(this.areas),Object(v["a"])(n))):this.areas=i||[],this.isLoading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),this.isLoading=!1,this.areas=[];case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"searchBranch",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,r,i,n,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]&&s[1],e.prev=1,e.next=4,null===(r=this.locationRes)||void 0===r?void 0:r.list("branch",{search:Object(f["trim"])(t),i:this.query.branches.i,ps:this.query.branches.ps});case 4:i=e.sent,a?(n=i||[],this.branches=[].concat(Object(v["a"])(this.branches),Object(v["a"])(n))):this.branches=i||[],this.isLoading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),this.isLoading=!1,this.branches=[];case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"searchOffice",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,r,i,n,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]&&s[1],e.prev=1,e.next=4,null===(r=this.locationRes)||void 0===r?void 0:r.list("office",{search:Object(f["trim"])(t),i:this.query.offices.i,ps:this.query.offices.ps});case 4:i=e.sent,a?(n=i||[],this.offices=[].concat(Object(v["a"])(this.offices),Object(v["a"])(n))):this.offices=i||[],this.isLoading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),this.isLoading=!1,this.offices=[];case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"resetData",value:function(){this.$refs.filterForm.clearValidate(),this.filters={month:(new Date).getMonth()+1,year:new Date,officeIds:[],branchIds:[],areaIds:[],toValue:null,fromValue:null,selectMonthRevenue:null}}},{key:"handleSubmit",value:function(e){var t=this;if("reset"!==e){var a=this.$refs.filterForm;a.validate((function(e){e&&t.setOpenPopup({popupName:"popup-filter-9i",isOpen:!1})}))}else this.resetData()}},{key:"reset",value:function(){this.areas=[],this.branches=[],this.offices=[]}},{key:"handleOpen",value:function(){console.log("open"),this.searchArea(""),this.searchBranch(""),this.searchOffice("")}},{key:"handleClose",value:function(){this.reset()}},{key:"created",value:function(){this.locationRes=Object(d["a"])("location",{districtId:this.districtId})}}]),a}(Object(b["b"])(y["a"]));Object(h["a"])([w.Getter("getFilter")],C.prototype,"getFilter",void 0),C=Object(h["a"])([Object(b["a"])({components:{}})],C);var _=C,x=_,j=(a("10f8"),a("2877")),S=Object(j["a"])(x,k,O,!1,null,"f71e94ba",null),R=S.exports,L=a("19f6"),A=Object(m["a"])("beAudit"),M=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.locationRes=void 0,e.isShow=!1,e.search="",e.groupFilters={kpiMonth:(new Date).getMonth()+1,kpiYear:(new Date).getFullYear()},e.filters={kpiMonth:(new Date).getMonth()+1,kpiYear:new Date,kpiCode:"REVENUE_YEAR1"},e.isLoading=!1,e.chitieu=[{id:0,label:"Chỉ tiêu doanh số FYP",value:"REVENUE_YEAR1"},{id:1,label:"Chỉ tiêu phí",value:"COMMISSION"}],e.query={areas:{i:0,ps:20,search:""},branches:{i:0,ps:20,search:""},offices:{i:0,ps:20,search:""}},e.disable={area:!1,branch:!1,office:!1,member:!1},e.sortType="",e.filter1=0,e.dataChange={areas:[],branches:[],offices:[],members:[]},e.dataSelect={areas:[],branches:[],offices:[]},e}return Object(o["a"])(a,[{key:"sorts",get:function(){return[{command:1,command_pri:1,label:"Đơn vị kinh doanh",divided:!1},{command:8,command_pri:9,label:"Chỉ tiêu",divided:!0},{command:2,command_pri:3,label:"Kết quả",divided:!1},{command:5,command_pri:7,label:"Tỷ lệ hoàn thành",divided:!1}]}},{key:"checkChangOrRemove",value:function(e,t,a,r){if("change"==e)a&&this.dataChange[t].push(a);else if(this.dataChange[t]&&this.dataChange[t].length>0){var i=this.dataChange[t].filter((function(e){return e.id!=r}));this.dataChange[t]=i}else this.dataChange[t]=[]}},{key:"checkCode",value:function(e,t,a){var r={};r=this.dataSelect[t].find((function(e){return e.id==a})),this.checkChangOrRemove(e,t,r,a)}},{key:"handleChange",value:function(e,t,a){this.$forceUpdate();var r=a[a.length-1],i=this.getFilter(this.$route.name);null!==i&&void 0!==i&&i.data&&(this.dataChange=null===i||void 0===i?void 0:i.data),"clear"===e?this.dataChange[t]=[]:this.checkCode(e,t,r)}},{key:"watchSearch",value:function(e){console.log("watch search"),this.searchText(Object(f["trim"])(e))}},{key:"searchText",value:function(e){var t,a;this.$emit("change",Object(f["assign"])(this.filters,{keywordString:e})),this.setReportFilter({contract:null===(t=this.$route)||void 0===t?void 0:t.name,filters:Object(f["assign"])(this.filters,{keywordString:this.search}),data:(null===(a=this.getFilter(this.$route.name))||void 0===a?void 0:a.data)||{}})}},{key:"handleClick",value:function(){this.isShow=!0}},{key:"handeChangeFilters",value:function(e){this.groupFilters=Object(n["a"])(Object(n["a"])({},this.groupFilters),e),console.log("when submit groupFilters",this.groupFilters),console.log("when submit filters",e)}},{key:"handleCommand",value:function(e){var t;this.sortType===e.command?(this.sortType="",this.filters.orderByClause=""):(this.sortType=e.command,this.setOrderByClause(e)),this.setReportFilter({contract:null===(t=this.$route)||void 0===t?void 0:t.name,filters:Object(n["a"])({},this.filters),data:this.getFilter(this.$route.name)||{}}),this.$emit("change",this.filters)}},{key:"setOrderByClause",value:function(e){"REVENUE_YEAR1"===this.filters.kpiCode?this.filters.orderByClause=e.command:this.filters.orderByClause=e.command_pri}},{key:"init",value:function(){this.roleSaleMember&&(this.disable.member=!0,this.filters.memberIdArray=[this.memberLogin.id]),this.roleOfficeLeaderMember&&(this.disable.office=!0,this.disable.area=!0,this.disable.branch=!0,this.filters.areaIdArray=[this.memberLogin.areaId],this.filters.branchIdArray=[this.memberLogin.branchId],this.filters.transOfficeIdArray=[this.memberLogin.transactionOfficeId]),(this.roleBranchMember||this.roleBranchLeader)&&(this.disable.area=!0,this.disable.branch=!0,this.filters.areaIdArray=[this.memberLogin.areaId],this.filters.branchIdArray=[this.memberLogin.branchId])}},{key:"created",value:function(){console.log("created");var e=this.getFilter(this.$route.name);e&&(this.filters=Object(f["assign"])(this.filters,e.filters),this.search=this.filters.keywordString),this.locationRes=Object(d["a"])("location",{districtId:this.districtId}),this.init(),this.$emit("change",Object(f["assign"])(this.filters,{keywordString:this.search}))}},{key:"searchArea",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,r,i,n,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]&&s[1],e.prev=1,e.next=4,null===(r=this.locationRes)||void 0===r?void 0:r.list("area",{search:Object(f["trim"])(t),i:this.query.areas.i,ps:this.query.areas.ps});case 4:i=e.sent,a?(n=i||[],this.dataSelect.areas=[].concat(Object(v["a"])(this.dataSelect.areas),Object(v["a"])(n))):this.dataSelect.areas=i||[],this.disable.branch&&this.dataSelect.areas.push({id:this.memberLogin.areaId,locationCode:this.memberLogin.areaCode,name:this.memberLogin.areaName}),this.isLoading=!1,e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](1),this.isLoading=!1,this.dataSelect.areas=[],this.disable.branch&&this.dataSelect.areas.push({id:this.memberLogin.locationId,locationCode:this.memberLogin.locationCode,name:this.memberLogin.locationName});case 15:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"searchBranch",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,r,i,n,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]&&s[1],e.prev=1,!this.disable.branch){e.next=6;break}this.dataSelect.branches.push({id:this.memberLogin.branchId,locationCode:this.memberLogin.branchCode,name:this.memberLogin.branchName}),e.next=11;break;case 6:return e.next=8,null===(r=this.locationRes)||void 0===r?void 0:r.list("branch",{search:Object(f["trim"])(t),i:this.query.branches.i,ps:this.query.branches.ps});case 8:i=e.sent,a?(n=i||[],this.dataSelect.branches=[].concat(Object(v["a"])(this.dataSelect.branches),Object(v["a"])(n))):this.dataSelect.branches=i||[],this.isLoading=!1;case 11:e.next=18;break;case 13:e.prev=13,e.t0=e["catch"](1),this.isLoading=!1,this.dataSelect.branches=[],this.disable.branch&&this.dataSelect.branches.push({id:this.memberLogin.branchId,locationCode:this.memberLogin.branchCode,name:this.memberLogin.branchName});case 18:case"end":return e.stop()}}),e,this,[[1,13]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"searchOffice",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,r,i,n,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]&&s[1],e.prev=1,!this.disable.office){e.next=6;break}this.dataSelect.offices.push({id:this.memberLogin.transactionOfficeId,locationCode:this.memberLogin.transactionOfficeCode,name:this.memberLogin.transactionOfficeName}),e.next=11;break;case 6:return e.next=8,null===(r=this.locationRes)||void 0===r?void 0:r.list("office",{search:Object(f["trim"])(t),i:this.query.offices.i,ps:this.query.offices.ps});case 8:i=e.sent,a?(n=i||[],this.dataSelect.offices=[].concat(Object(v["a"])(this.dataSelect.offices),Object(v["a"])(n))):this.dataSelect.offices=i||[],this.isLoading=!1;case 11:e.next=18;break;case 13:e.prev=13,e.t0=e["catch"](1),this.isLoading=!1,this.dataSelect.offices=[],this.disable.office&&this.dataSelect.offices.push({id:this.memberLogin.locationId,locationCode:this.memberLogin.locationCode,name:this.memberLogin.locationName});case 18:case"end":return e.stop()}}),e,this,[[1,13]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleShowPopper",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$forceUpdate(),a=this.getFilter(null===(t=this.$route)||void 0===t?void 0:t.name),a&&a.data&&(this.dataSelect=Object(n["a"])(Object(n["a"])({},this.dataSelect),a.data)),e.next=5,Promise.all([this.searchArea(""),this.searchBranch(""),this.searchOffice("")]);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"resetData",value:function(){this.$refs.filterForm.clearValidate(),this.filters.resultPercent="",this.roleOfficeLeaderMember||this.roleBranchMember||this.roleBranchLeader?(this.roleOfficeLeaderMember&&(this.filters.memberIdArray=[]),(this.roleBranchMember||this.roleBranchLeader)&&(this.filters.transOfficeIdArray=[],this.filters.memberIdArray=[])):this.filters={kpiMonth:(new Date).getMonth()+1,kpiYear:new Date,kpiCode:"REVENUE_YEAR1",keywordString:this.search?this.search:null,orderByClause:this.sortType?this.sortType:null}}},{key:"remoteMethod",value:function(e,t){var a;switch(this.isLoading=!0,this.query[e].search=Object(f["trim"])(t),this.query[e].i=0,this.query[e].ps=20,e){case"areas":a=Object(f["debounce"])(this.searchArea,500);break;case"branches":a=Object(f["debounce"])(this.searchBranch,500);break;case"offices":a=Object(f["debounce"])(this.searchOffice,500);break;default:break}a(t)}},{key:"loadAreas",value:function(){if(Object(f["size"])(this.dataSelect.areas)===this.query.areas.i+this.query.areas.ps){this.query.areas.i=Object(f["size"])(this.dataSelect.areas);var e=Object(f["debounce"])(this.searchArea,500);e(this.query.areas.search,!0)}}},{key:"loadBranches",value:function(){if(console.log(1),Object(f["size"])(this.dataSelect.branches)===this.query.branches.i+this.query.branches.ps){this.query.branches.i=Object(f["size"])(this.dataSelect.branches);var e=Object(f["debounce"])(this.searchBranch,500);e(this.query.branches.search,!0)}}},{key:"loadOffices",value:function(){if(Object(f["size"])(this.dataSelect.offices)===this.query.offices.i+this.query.offices.ps){this.query.offices.i=Object(f["size"])(this.dataSelect.offices);var e=Object(f["debounce"])(this.searchOffice,500);e(this.query.offices.search,!0)}}},{key:"handleSubmit",value:function(e){var t;"reset"!==e?(this.isShow=!1,this.setReportFilter({contract:null===(t=this.$route)||void 0===t?void 0:t.name,filters:Object(n["a"])(Object(n["a"])({},this.filters),{},{keywordString:this.search}),data:this.dataChange}),console.log(this.dataChange),this.$emit("change",this.filters)):this.resetData()}},{key:"handleChangeKpiCode",value:function(){}}]),a}(Object(b["b"])(y["a"],L["a"]));Object(h["a"])([Object(b["c"])({required:!1,type:String,default:"Tìm kiếm..."})],M.prototype,"searchPlaceholder",void 0),Object(h["a"])([A.Action("setReportFilter")],M.prototype,"setReportFilter",void 0),Object(h["a"])([A.Getter("getFilter")],M.prototype,"getFilter",void 0),Object(h["a"])([Object(b["e"])("search",{immediate:!1})],M.prototype,"watchSearch",null),M=Object(h["a"])([Object(b["a"])({components:{FiltersPopup:R}})],M);var E=M,I=E,N=(a("25f08"),Object(j["a"])(I,p,g,!1,null,"16db83e5",null)),T=N.exports,q=a("7cab"),F=Object(m["a"])("beAudit"),B=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.data=[],e.filters={kpiMonth:(new Date).getMonth()+1,kpiYear:new Date,kpiCode:"REVENUE_YEAR1"},e.table={total:0,page:1,limit:20},e.query={pageNo:1,pageSize:20},e.isLoading=!1,e.tableHeight="auto",e.reportRes=void 0,e.summary={},e.debounceFilter=Object(f["debounce"])((function(){e.init()}),600),e}return Object(o["a"])(a,[{key:"getScreen",get:function(){return window.screen.availWidth>=1600?"full":window.screen.availWidth>1366&&window.screen.availWidth<1600?"hd":"low"}},{key:"handleLoad",value:function(e,t,a){setTimeout(Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a([]);case 1:case"end":return e.stop()}}),e)}))),500)}},{key:"init",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isLoading){e.next=2;break}return e.abrupt("return");case 2:try{this.isLoading=!0,t=Object(n["a"])({},this.filters),this.roleOfficeLeaderMember&&(delete t.areaIdArray,delete t.branchIdArray,delete t.transOfficeIdArray),(this.roleBranchMember||this.roleBranchLeader)&&(delete t.areaIdArray,delete t.branchIdArray),this.getData(t),this.getSummary(t)}catch(a){this.isLoading=!1}case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getData",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r="branch",e.next=4,null===(a=this.reportRes)||void 0===a?void 0:a.getReportByType(r,Object(f["assign"])(t,this.query));case 4:this.data=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSummary",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r="branch",e.next=4,null===(a=this.reportRes)||void 0===a?void 0:a.getSummaryByType(r,Object(f["assign"])(t,this.query));case 4:i=e.sent,this.summary=i||{},this.table.total=i.total,console.log("result",i),this.isLoading=!1,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"summaryMethod",value:function(e){var t=this,a=e.columns,r=[];return Object(f["forEach"])(a,(function(e,a){if(a<2)r[a]="";else if(2!==a){var i=t.summary[e.property]||0;r[a]="".concat(Object(f["includes"])(e.property,"Percent")||Object(f["includes"])(e.property,"percent")?t.$options.filters.formatPercent(i):t.$options.filters.formatNumber(i))}else r[a]="Tổng"})),r}},{key:"handleSizeChange",value:function(e){this.table.limit=e,this.table.page=1,this.query.pageNo=1,this.query.pageSize=e,this.init()}},{key:"handleCurrentChange",value:function(e){this.table.page=e,this.query.pageNo=e,this.init()}},{key:"handleFiltersChange",value:function(e){console.log("filter",e),this.filters=Object(n["a"])({},e),this.table.page=1,this.query.pageNo=1,this.debounceFilter()}},{key:"getHeightOfTable",value:function(){this.tableHeight="".concat(window.innerHeight-233,"px")}},{key:"mounted",value:function(){this.getHeightOfTable()}},{key:"created",value:function(){this.reportRes=Object(d["a"])("report",{districtId:this.districtId})}},{key:"handleExportFile",value:function(e,t,a,r){0===this.data.length?this.$message.error("Không tìm thấy dữ  liệu xuất file"):this.handleExport(e,t,a,r)}}]),a}(Object(b["b"])(q["a"],L["a"]));Object(h["a"])([F.Getter("getFilter")],B.prototype,"getFilter",void 0),B=Object(h["a"])([Object(b["a"])({components:{ReportFilter:T}})],B);var P=B,$=P,D=Object(j["a"])($,r,i,!1,null,null,null);t["default"]=D.exports},"9fdb":function(e,t,a){}}]);
//# sourceMappingURL=chunk-b6ea5614.69a37a08.js.map