(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57d59c21"],{"012d":function(t,e,a){},"03d4":function(t,e,a){},"1abc":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"employee--item"},[a("a",{staticClass:"channel-router flex",attrs:{href:"javascript:;"}},[t.value.numOfChildren>0&&!t.isSearch?a("div",{staticClass:"drown-menu",class:{"drown-menu-tranfroms-select":t.isOpen,"drown-menu-tranfroms-unselect":!t.isOpen},on:{click:function(e){return t.handleOpenClick(t.value)}}},[a("base-icon",{staticClass:"style__icon-arrow-down",staticStyle:{"margin-right":"0px"},attrs:{icon:"arrow-down"}})],1):a("div",{staticStyle:{display:"block",width:"21px",height:"1px"}}),null==t.value.treePath?a("div",{staticClass:"name flex-item",staticStyle:{"margin-left":"24px"}},[t._v(t._s(t.value.name))]):a("div",{staticClass:"name flex-item",staticStyle:{"margin-left":"24px"}},[t._v(t._s(t.value.locationCode+" - "+t.value.name))]),"AREA"!=t.value.locationType&&1==this.check?a("div",{staticClass:"action flex-left-right button"},[a("div",{on:{click:function(e){return t.handleEditUnit(t.value)}}},[a("el-tooltip",{staticClass:"item-tooltip",attrs:{enterable:!1,effect:"dark",content:"Sửa thông tin",placement:"top"}},[a("el-button",{staticClass:"is-create-color is-none-border icon-btn icon-middle custom-button p-0"},[a("base-icon",{staticClass:"icon",staticStyle:{"font-size":"16px"},attrs:{icon:"edit-permission"}})],1)],1)],1)]):t._e(),"AREA"==t.value.locationType&&1==this.check?a("div",{staticClass:"action flex-left-right button"},[a("div",{on:{click:function(e){return t.handleAddBranch(t.value,"branch")}}},[a("el-tooltip",{staticClass:"item-tooltip",attrs:{enterable:!1,effect:"dark",content:"Thêm chi nhánh",placement:"top"}},[a("el-button",{staticClass:"is-create-color is-none-border icon-btn icon-middle custom-button p-0"},[a("i",{staticClass:"el-icon-plus"})])],1)],1)]):t._e(),"BRANCH"==t.value.locationType&&1==this.check?a("div",{staticClass:"action flex-left-right button"},[a("div",{on:{click:function(e){return t.handleAddLocation(t.value,"location")}}},[a("el-tooltip",{staticClass:"item-tooltip",attrs:{enterable:!1,effect:"dark",content:"Thêm phòng giao dịch",placement:"top"}},[a("el-button",{staticClass:"is-create-color is-none-border icon-btn icon-middle custom-button p-0"},[a("i",{staticClass:"el-icon-plus"})])],1)],1)]):t._e(),a("div",{staticClass:"action flex-left-right button",staticStyle:{"padding-right":"15px"}},[a("div",{on:{click:t.handleInfo}},[a("el-tooltip",{staticClass:"item-tooltip",attrs:{enterable:!1,effect:"dark",content:"Danh sách thành viên",placement:"top"}},[a("el-button",{staticClass:"is-create-color is-none-border icon-btn icon-middle custom-button p-0"},[a("base-icon",{staticClass:"icon",staticStyle:{"font-size":"16px"},attrs:{icon:"student-menu"}})],1)],1)],1)])]),a("div",{staticClass:"list-childs",class:t.isOpenChild?"list-childs-select":null},t._l(t.value.children,(function(e){return a("unit-item-child",{key:e.id,staticClass:"child-item",attrs:{value:e,parent:t.childParent},on:{createLo:t.createItem,edit:t.editItem}})})),1)])},n=[],s=a("d0ff"),r=a("276c"),l=a("e954"),c=a("920b"),o=a("92a6"),u=(a("d3b7"),a("3ca3"),a("ddb0"),a("caad"),a("2532"),a("99af"),a("9ab4")),d=a("1b40"),h=a("4bb5"),p=a("9f48"),m=a("08ba"),v=function(){return Promise.resolve().then(a.bind(null,"1abc"))},b=Object(h["a"])("beUser"),f=Object(h["a"])("beEmployee"),g=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.isOpen=!1,t.childParent=[],t.memberInfo={},t.check=!1,t.dataPopup={},t}return Object(l["a"])(a,[{key:"created",value:function(){var t,e;this.api=Object(m["a"])("location",{districtId:null===(t=this.user)||void 0===t||null===(e=t.districts)||void 0===e?void 0:e[0].id})}},{key:"checkRole",value:function(t){t.includes("ADMIN")?this.check=!0:this.check=!1,console.log("check",this.check)}},{key:"mounted",value:function(){this.childParent=[].concat(Object(s["a"])(this.parent),[this.value.id]),this.checkRole(this.roleMembers.userRole)}},{key:"isOpenChild",get:function(){return this.isOpen}},{key:"handleInfo",value:function(){this.setUnitDetail(this.value),this.setOpenPopup({popupName:"employeeunit",isOpen:!0})}},{key:"editItem",value:function(t){this.$emit("edit",t)}},{key:"createItem",value:function(t){this.$emit("createLo","location")}},{key:"handleEditUnit",value:function(t){this.$emit("edit",t),this.setOpenPopup({popupName:"edit-unit",isOpen:!0})}},{key:"handleAddBranch",value:function(t,e){this.$emit("idLocation",t.id),this.$emit("create",e,t.id),console.log("1",e),this.setOpenPopup({popupName:"create-unit",isOpen:!0})}},{key:"handleAddLocation",value:function(t){this.$emit("createLo",t),this.setOpenPopup({popupName:"create-unit",isOpen:!0})}},{key:"handleOpenClick",value:function(t){var e=this,a={parentId:t.id};this.isOpen||!t.numOfChildren&&0!==t.childrens.length?this.isOpen=!this.isOpen:this.api.getListLocationTree(a).then((function(a){t.children=a,e.isOpen=!e.isOpen,e.$forceUpdate()}))}}]),a}(Object(d["b"])(p["a"]));Object(u["a"])([Object(d["c"])({required:!0,type:Object,default:{}})],g.prototype,"value",void 0),Object(u["a"])([Object(d["c"])({required:!1,type:Array,default:[]})],g.prototype,"parent",void 0),Object(u["a"])([Object(d["c"])({required:!1,type:String,default:""})],g.prototype,"checkValue",void 0),Object(u["a"])([Object(d["c"])({required:!1,type:Boolean,default:!1})],g.prototype,"isSearch",void 0),Object(u["a"])([b.State("user")],g.prototype,"user",void 0),Object(u["a"])([b.State("role")],g.prototype,"roleMembers",void 0),Object(u["a"])([f.Action("setUnitDetail")],g.prototype,"setUnitDetail",void 0),g=Object(u["a"])([Object(d["a"])({components:{UnitItemChild:v}})],g);var y=g,I=y,C=(a("51c3"),a("2877")),k=Object(C["a"])(I,i,n,!1,null,"cbd1fe98",null);e["default"]=k.exports},"4ef3":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"employee-unit"},[a("div",{staticClass:"import-filterh"},[a("div",{staticClass:"be-flex jc-space-between"},[a("div",{staticClass:"action-left flex"},[a("div",{staticClass:"search"},[a("span",{staticClass:"flex"},[a("base-icon",{staticClass:"icon-search",attrs:{icon:"search"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],staticClass:"searchBar",attrs:{type:"text",placeholder:"Tìm kiếm..."},domProps:{value:t.searchValue},on:{input:[function(e){e.target.composing||(t.searchValue=e.target.value)},t.handleSearch]}})],1)]),a("div",{staticClass:"slack_active"},[a("el-dropdown",{on:{command:t.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[t._v(" "+t._s(this.dropDownText)),a("base-icon",{staticClass:"style__icon-arrow-down",staticStyle:{"margin-left":"5px"},attrs:{icon:"arrow-down"}})],1),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"ACTIVE"}},[t._v("Hoạt động")]),a("el-dropdown-item",{attrs:{command:"INACTIVE"}},[t._v("Không hoạt động")])],1)],1)],1)])])]),a("el-row",{staticStyle:{"min-height":"200px","padding-bottom":"20px"}},[a("ul",{staticClass:"employee-unit-list"},[a("li",{staticClass:"title",staticStyle:{"padding-left":"45px"}},[t._v("Đơn vị")]),a("li",{staticClass:"add-new",on:{click:function(e){return t.hackleClickAddUnit("location")}}},[1==this.check?a("div",{staticClass:"icon-btn",staticStyle:{"margin-left":"47px",height:"40px",width:"258px",padding:"12px 0","font-weight":"500"}},[a("el-button",{staticClass:"is-small btn-hyperlink is-dashed is-white mr-1",attrs:{icon:"el-icon-plus icon-hyper",circle:""}}),a("span",{staticClass:"is-hyperlink"},[t._v("Thêm đơn vị")])],1):t._e()]),t._l(t.data,(function(e){return a("li",{key:e.id},[a("unit-item",{attrs:{checkValue:t.searchValue,value:e,"is-search":t.isSearch,parent:[]},on:{edit:t.editItem,createLo:t.createItem,create:t.createBranch,idLocation:t.getIdArea}})],1)}))],2)]),a("employee-unit-info"),a("popup-create-unit",{attrs:{dataProp:t.dataPopup,getIdFirst:t.idArea,checkType:this.type},on:{save:t.handleFilter}}),a("popup-edit-unit",{attrs:{dataProp:t.dataPopup},on:{edit:t.handleFilter}})],1)},n=[],s=a("276c"),r=a("e954"),l=a("920b"),c=a("92a6"),o=(a("caad"),a("2532"),a("ac1f"),a("841c"),a("9ab4")),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-popup",{staticClass:"createUnit",attrs:{name:"create-unit",hiddenFooter:!0,width:"400px",closeClickModal:!1,top:"4vh",open:t.handleOpen,close:t.handleClose}},["location"==this.checkType?a("div",{attrs:{slot:"title"},slot:"title"},[t._v("Thêm mới ĐVKD")]):a("div",{attrs:{slot:"title"},slot:"title"},[t._v("Thêm mới chi nhánh")]),a("div",{staticClass:"body-content"},[a("el-form",{ref:"dataInput",attrs:{model:t.dataInput,rules:t.rules}},[a("el-row",[a("el-col",[a("div",{staticClass:"col-style"},[a("el-form-item",[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","auto-upload":!1,"on-change":t.showAvatar,"show-file-list":!1}},[t.form.avatar?a("img",{staticClass:"avatar",attrs:{src:t.form.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("base-icon",{staticClass:"icon__camera",attrs:{icon:"icon--camera"}}),a("p",{staticClass:"add__image"},[t._v("Thêm ảnh")])],1)],1),"location"==this.checkType?a("el-form-item",{staticClass:"select",attrs:{label:"Loại đơn vị kinh doanh",prop:"transactionOfficeType"}},[a("el-select",{staticClass:"select",attrs:{clearable:"",placeholder:"Loại đơn vị kinh doanh..",filterable:""},model:{value:t.dataInput.transactionOfficeType,callback:function(e){t.$set(t.dataInput,"transactionOfficeType",e)},expression:"dataInput.transactionOfficeType"}},t._l(t.paymentPeriodList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.value}})})),1)],1):t._e(),a("el-form-item",{staticClass:"select",attrs:{label:"location"==this.checkType&&"CN"!=this.dataInput.transactionOfficeType?"Mã ĐVKD":"Mã chi nhánh",prop:"code"}},[a("el-input",{attrs:{placeholder:"Nhập mã..."},model:{value:t.dataInput.code,callback:function(e){t.$set(t.dataInput,"code",e)},expression:"dataInput.code"}})],1),a("el-form-item",{staticClass:"select",attrs:{label:"location"==this.checkType&&"CN"!=this.dataInput.transactionOfficeType?"Tên ĐVKD":"Tên chi nhánh",prop:"name"}},[a("el-input",{attrs:{placeholder:"Nhập tên..."},model:{value:t.dataInput.name,callback:function(e){t.$set(t.dataInput,"name",e)},expression:"dataInput.name"}})],1),"branch"==this.checkType||"CN"==this.dataInput.transactionOfficeType?a("el-form-item",{attrs:{prop:"branchId",label:"Đơn vị quản lý"}},[a("el-select",{staticClass:"select",attrs:{remote:"",clearable:"",filterable:"",placeholder:"Đơn vị quản lý"},model:{value:t.dataInput.parentId,callback:function(e){t.$set(t.dataInput,"parentId",e)},expression:"dataInput.parentId"}},t._l(t.areaList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1):"location"==this.checkType?a("el-form-item",{attrs:{prop:"branchId",label:"Đơn vị quản lý"}},[a("el-select",{staticClass:"select",attrs:{remote:"",clearable:"","remote-method":t.remoteBranch,filterable:"",placeholder:"Đơn vị quản lý"},model:{value:t.dataInput.parentId,callback:function(e){t.$set(t.dataInput,"parentId",e)},expression:"dataInput.parentId"}},t._l(t.branchList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.locationCode+" - "+t.name,value:t.id}})})),1)],1):t._e(),a("el-form-item",{attrs:{label:"location"==this.checkType&&"CN"!=this.dataInput.transactionOfficeType?"Lãnh đạo ĐVKD":"Lãnh đạo chi nhánh",prop:"salesMemberId"}},[a("el-select",{staticClass:"select",attrs:{remote:"",clearable:"","remote-method":t.remoteSaleMembers,filterable:"","default-first-option":"",placeholder:"Lãnh đạo quản lý"},on:{change:function(e){return t.handleChangeInput(t.dataInput.salesMemberId)}},model:{value:t.dataInput.salesMemberId,callback:function(e){t.$set(t.dataInput,"salesMemberId",e)},expression:"dataInput.salesMemberId"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMoreSaleMember,expression:"loadMoreSaleMember"}],staticClass:"list-uploader",attrs:{"infinite-scroll-delay":"500"}},t._l(t.listRelationship,(function(t){return a("el-option",{key:t.id,attrs:{label:t.memberNo+" - "+t.fullName,value:t.id+","+t.memberNo+","+t.fullName}})})),1)])],1),"branch"==this.checkType||"CN"==this.dataInput.transactionOfficeType?a("el-form-item",{attrs:{label:"Email đầu mối liên lạc",prop:"email"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"Email phân cách nhau bởi dấu ';'"},model:{value:t.dataInput.contactEmailList,callback:function(e){t.$set(t.dataInput,"contactEmailList",e)},expression:"dataInput.contactEmailList"}})],1):t._e()],1)])],1)],1)],1),a("template",{slot:"footer"},[a("div",{staticClass:"bottom"},[a("div",{staticClass:"bt-top flex"},[a("div",{staticClass:"bt-center"},[a("el-button",{staticClass:"group-button-cencel",on:{click:t.handleReset}},[t._v("Làm lại")]),a("el-button",{staticClass:"be-btn-danger group-button-save",on:{click:t.handleSave}},[t._v("Lưu")])],1)])])])],2)},d=[],h=a("d0ff"),p=a("f3f3"),m=a("c964"),v=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("1276"),a("b0c0"),a("99af"),a("1b40")),b=a("4bb5"),f=a("9f48"),g=a("08ba"),y=a("2ef0"),I=Object(b["a"])("beUser"),C=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.isUpload=!1,t.imageUrl="",t.showPicutreInitial=!0,t.branchList=[],t.saleMembersList=[],t.form={},t.areaList={},t.paymentPeriodList=[{value:"HO",lable:"HO"},{value:"CN",lable:"CN"},{value:"TSC",lable:"TSC"},{value:"PGD",lable:"PGD"},{value:"PGDBD",lable:"PGDBD"}],t.dataInput={code:"",name:"",parentId:"",leaderId:"",leaderMemberCode:"",leaderFullName:"",contactEmailList:"",transactionOfficeType:""},t.rules={code:[{required:!0,message:"Mã ĐVKD không được để trống",trigger:"blur"}],name:[{required:!0,message:"Tên ĐVKD không được để trống",trigger:"blur"}],salesMemberId:[{required:!0,message:"Lãnh đạo quản lý không được để trống",trigger:"blur"}],parentId:[{required:!0,message:"Chi nhánh không được để trống",trigger:"blur"}],transactionOfficeType:[{required:!0,message:"Loại ĐVKD không được để trống",trigger:"blur"}]},t.listValue=[],t.listRelationship=[],t.querySaleMember={i:0,ps:20,search:"",statusAccount:0,groupCode:"INSURANCE",sort:1},t}return Object(r["a"])(a,[{key:"showAvatar",value:function(t){this.imageUrl=t.raw,this.isUpload=!0;var e=t.size/1024/1024<10;e?(this.form.avatar=URL.createObjectURL(t.raw),console.log("avatar2",this.form.avatar),this.$forceUpdate()):this.$message.error("Ảnh không được quá 20mb")}},{key:"handleAvatarSuccess",value:function(t){this.imageUrl=URL.createObjectURL(t.raw)}},{key:"beforeAvatarUpload",value:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("Avatar picture must be JPG format!"),a||this.$message.error("Avatar picture size can not exceed 2MB!"),e&&a}},{key:"getBranchList",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(e){var a,i,n,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,null===(a=this.apiUser)||void 0===a?void 0:a.getAreaList({search:Object(y["trim"])(e),type:2,i:0,districtId:null===(i=this.user)||void 0===i||null===(n=i.districts)||void 0===n?void 0:n[0].id,ps:20}).then((function(t){s.branchList=t.data})).catch((function(t){return console.log(t)}));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"handleChangeInput",value:function(t){var e=t.split(",");this.dataInput.leaderId=e[0],this.dataInput.leaderMemberCode=e[1],this.dataInput.leaderFullName=e[2]}},{key:"updateAvatar",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(e){var a,i,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=new FormData,a.append("avatar",this.imageUrl),!this.imageUrl){t.next=5;break}return t.next=5,null===(i=this.api)||void 0===i?void 0:i.uploadAvatar(e,a).then((function(t){n.form.avatar=t})).catch((function(){}));case 5:this.isUpload=!1;case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"handleSave",value:function(){var t=this,e=this.$refs.dataInput;e.validate((function(e){if(!e)return console.log("error validate data!"),!1;var a;"location"==t.checkType?t.dataInput.locationType="TRANSACTION_OFFICE":(t.dataInput.locationType="BRANCH",t.dataInput.transactionOfficeType="CN"),"CN"==t.dataInput.transactionOfficeType&&(t.dataInput.locationType="BRANCH");var i=Object(p["a"])(Object(p["a"])({},t.dataInput),{},{salesMemberId:null,name:t.dataInput.name,locationCode:t.dataInput.code,parentId:t.dataInput.parentId,transactionOfficeType:t.dataInput.transactionOfficeType,status:"ACTIVE",contactEmailList:t.dataInput.contactEmailList});delete i.salesMemberId,delete i.code,null===(a=t.api)||void 0===a||a.createLocation(i).then((function(e){t.updateAvatar(e.id),t.$message.success("Thêm đơn vị thành công"),t.handleClose(),t.$emit("save")})).catch((function(e){t.$message.error(e.message)}))}))}},{key:"remoteBranch",value:function(t){var e,a,i,n,s,r,l=this;""==t||null==t?null===(e=this.apiUser)||void 0===e||e.getAreaList({search:"",type:2,i:0,districtId:null===(a=this.user)||void 0===a||null===(i=a.districts)||void 0===i?void 0:i[0].id,ps:20}).then((function(t){l.branchList=t.data})).catch((function(t){return console.log(t)})):null===(n=this.apiUser)||void 0===n||n.getAreaList({search:t,type:2,i:0,districtId:null===(s=this.user)||void 0===s||null===(r=s.districts)||void 0===r?void 0:r[0].id,ps:20}).then((function(t){l.branchList=t.data})).catch((function(t){return console.log(t)}))}},{key:"loadMoreSaleMember",value:function(){this.querySaleMember.i+=20;var t=Object(y["debounce"])(this.getSaleMember,500);t(this.querySaleMember.search,!0)}},{key:"remoteSaleMembers",value:function(t){this.querySaleMember.search=Object(y["trim"])(t),this.querySaleMember.i=0,this.querySaleMember.ps=20;var e=Object(y["debounce"])(this.getSaleMember,500);e(t)}},{key:"getSaleMember",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(e){var a,i,n,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=s.length>1&&void 0!==s[1]&&s[1],t.prev=1,t.next=4,this.apiEmployee.getEmployeeList({search:Object(y["trim"])(e),i:this.querySaleMember.i,ps:this.querySaleMember.ps});case 4:i=t.sent,a?(n=i.data||[],this.listRelationship=[].concat(Object(h["a"])(this.listRelationship),Object(h["a"])(n))):this.listRelationship=i.data||[],t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),this.listRelationship=[];case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"handleClose",value:function(){this.$refs.dataInput.clearValidate(),this.imageUrl="",this.setOpenPopup({popupName:"create-unit",isOpen:!1}),this.dataInput={},this.form={}}},{key:"getLocationList",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(e){var a,i,n,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,null===(a=this.apiUser)||void 0===a?void 0:a.getAreaList({search:Object(y["trim"])(e),type:1,i:0,districtId:null===(i=this.user)||void 0===i||null===(n=i.districts)||void 0===n?void 0:n[0].id,ps:20}).then((function(t){s.areaList=t.data})).catch((function(t){return console.log(t)}));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"handleOpen",value:function(){this.getLocationList(""),"location"==this.checkType?this.getBranchList(""):this.dataInput.parentId=this.getIdFirst,this.getSaleMember("")}},{key:"handleReset",value:function(){this.$refs.dataInput.clearValidate(),this.dataInput={},this.dataInput.code=null,this.dataInput.name=null,this.dataInput.salesMemberId=null,this.dataInput.branchId=null}},{key:"created",value:function(){var t,e,a,i,n,s;this.apiUser=Object(g["a"])("user",{districtId:null===(t=this.user)||void 0===t||null===(e=t.districts)||void 0===e?void 0:e[0].id}),this.apiEmployee=Object(g["a"])("employee",{districtId:null===(a=this.user)||void 0===a||null===(i=a.districts)||void 0===i?void 0:i[0].id}),this.api=Object(g["a"])("transaction",{districtId:null===(n=this.user)||void 0===n||null===(s=n.districts)||void 0===s?void 0:s[0].id})}}]),a}(Object(v["b"])(f["a"]));Object(o["a"])([I.State("user")],C.prototype,"user",void 0),Object(o["a"])([Object(v["c"])()],C.prototype,"checkType",void 0),Object(o["a"])([Object(v["c"])()],C.prototype,"getIdFirst",void 0),C=Object(o["a"])([Object(v["a"])({components:{}})],C);var k=C,O=k,L=(a("c073"),a("2877")),j=Object(L["a"])(O,u,d,!1,null,null,null),T=j.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-popup",{staticClass:"popupEditUnit",attrs:{name:"edit-unit",open:t.handleOpen,close:t.handleClose,closeClickModal:!1,width:"400px",top:"5vh"}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("Sửa thông tin ĐVKD")]),a("div",{staticClass:"body-content"},[a("el-form",{ref:"dataInput",staticClass:"form-content",attrs:{model:t.dataInput,rules:t.rules}},[a("el-row",[a("el-col",[a("div",{staticClass:"col"},[a("el-form-item",[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","auto-upload":!1,"on-change":t.showAvatar,"show-file-list":!1}},[this.form.avatar?a("img",{staticClass:"avatar",attrs:{src:this.form.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("base-icon",{staticClass:"icon__camera",attrs:{icon:"icon--camera"}}),a("p",{staticClass:"add__image"},[t._v("Thay ảnh")])],1)],1),"TRANSACTION_OFFICE"==this.dataProp.locationType?a("el-form-item",{staticClass:"select",attrs:{label:"Loại đơn vị kinh doanh",prop:"transactionOfficeType"}},[a("el-select",{staticClass:"select",attrs:{clearable:"",placeholder:"Loại đơn vị kinh doanh..",filterable:""},model:{value:t.dataInput.transactionOfficeType,callback:function(e){t.$set(t.dataInput,"transactionOfficeType",e)},expression:"dataInput.transactionOfficeType"}},t._l(t.paymentPeriodList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.value}})})),1)],1):t._e(),a("el-form-item",{staticClass:"select",attrs:{label:"Mã ĐVKD",prop:"locationCode"}},[a("el-input",{attrs:{placeholder:"Mã ĐVKD"},model:{value:t.dataInput.locationCode,callback:function(e){t.$set(t.dataInput,"locationCode",e)},expression:"dataInput.locationCode"}})],1),a("el-form-item",{staticClass:"select",attrs:{label:"Tên ĐVKD",prop:"name"}},[a("el-input",{attrs:{placeholder:"Tên ĐVKD"},model:{value:t.dataInput.name,callback:function(e){t.$set(t.dataInput,"name",e)},expression:"dataInput.name"}})],1),1==this.dataProp.levelDepth?a("el-form-item",{attrs:{prop:"branchId",label:"Đơn vị quản lý"}},[a("el-select",{staticClass:"select",attrs:{remote:"",clearable:"",filterable:"",placeholder:"Đơn vị quản lý"},model:{value:t.dataInput.parentId,callback:function(e){t.$set(t.dataInput,"parentId",e)},expression:"dataInput.parentId"}},t._l(t.areaList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1):a("el-form-item",{attrs:{prop:"branchId",label:"Đơn vị quản lý"}},[a("el-select",{staticClass:"select",attrs:{clearable:"",remote:"","remote-method":t.remoteBranch,filterable:"",placeholder:"Đơn vị quản lý"},model:{value:t.dataInput.parentId,callback:function(e){t.$set(t.dataInput,"parentId",e)},expression:"dataInput.parentId"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMoreBranch,expression:"loadMoreBranch"}],attrs:{"infinite-scroll-delay":400}},t._l(t.branchList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.locationCode+" - "+t.name,value:t.id}})})),1)])],1),a("el-form-item",{attrs:{prop:"leaderId",label:"Lãnh đạo ĐVKD"}},[a("el-select",{staticClass:"select",attrs:{remote:"",clearable:"","remote-method":t.remoteSaleMembers,filterable:"","default-first-option":"",placeholder:"Lãnh đạo quản lý"},model:{value:t.dataInput.leaderId,callback:function(e){t.$set(t.dataInput,"leaderId",e)},expression:"dataInput.leaderId"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMoreSaleMember,expression:"loadMoreSaleMember"}],staticClass:"list-uploader",attrs:{"infinite-scroll-delay":"500"}},t._l(t.listRelationship,(function(t){return a("el-option",{key:t.id,attrs:{label:t.memberNo+" - "+t.fullName,value:t.id}})})),1)])],1),1==this.dataProp.levelDepth?a("el-form-item",{attrs:{label:"Email đầu mối liên lạc",prop:"email"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"Email phân cách nhau bởi dấu ';'"},model:{value:t.dataInput.contactEmailList,callback:function(e){t.$set(t.dataInput,"contactEmailList",e)},expression:"dataInput.contactEmailList"}})],1):t._e(),a("el-form-item",{staticClass:"flex-delivery"},[a("div",{staticClass:"item-acitve"},[t._v("Trạng thái hoạt động")]),a("el-switch",{staticClass:"icon-active",on:{change:t.handleChangeStatus},model:{value:t.dataForm.status,callback:function(e){t.$set(t.dataForm,"status",e)},expression:"dataForm.status"}})],1)],1)])],1)],1)],1),a("div",{staticClass:"bottom"},[a("div",{staticClass:"bt-top flex"},[a("div",{staticClass:"bt-center"},[a("el-button",{staticClass:"group-button-cencel",on:{click:t.handleCancel}},[t._v("Hủy")]),a("el-button",{staticClass:"be-btn-danger group-button-save",on:{click:t.handleSave}},[t._v("Cập nhật")])],1)])])])},S=[],x=(a("4de4"),Object(b["a"])("beUser")),M=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.locationRes=void 0,t.branchList=[],t.saleMembersList=[],t.areaList=[],t.isUpload=!1,t.imageUrl="",t.form={},t.childrenList=[],t.checkBranchList=[],t.dataInput={locationCode:"",name:"",parentId:"",leaderId:"",leaderMemberCode:"",leaderFullName:"",status:!0,locationType:"",contactEmailList:"",transactionOfficeType:""},t.paymentPeriodList=[{value:"HO",lable:"HO"},{value:"CN",lable:"CN"},{value:"TSC",lable:"TSC"},{value:"PGD",lable:"PGD"},{value:"PGDBD",lable:"PGDBD"}],t.dataForm={locationCode:"",name:"",parentId:"",leaderId:"",leaderMemberCode:"",leaderFullName:"",status:!0,checkMessage:!1,checkChildern:!1},t.leaderData={leaderId:"",leaderMemberCode:"",leaderFullName:""},t.rules={locationCode:[{required:!0,message:"Mã ĐVKD không được để trống",trigger:"blur"}],name:[{required:!0,message:"Tên ĐVKD không được để trống",trigger:"blur"}],leaderId:[{required:!0,message:"Lãnh đạo quản lý không được để trống",trigger:"blur"}],parentId:[{required:!0,message:"Chi nhánh không được để trống",trigger:"blur"}],transactionOfficeType:[{required:!0,message:"Loại ĐVKD không được để trống",trigger:"blur"}]},t.memberData={},t.listRelationship=[],t.querySaleMember={i:0,ps:20,search:""},t.query={branches:{i:0,ps:1e4,search:"",type:2}},t.response={},t.childrenBranch={},t}return Object(r["a"])(a,[{key:"handleChangeInput",value:function(t){var e=this.listRelationship.filter((function(e){return e.id==t}));this.memberData=e[0],console.log("memeber",this.memberData),this.leaderData.leaderId=this.memberData.id,this.leaderData.leaderFullName=this.memberData.fullName,this.leaderData.leaderMemberCode=this.memberData.memberNo}},{key:"showAvatar",value:function(t){this.imageUrl=t.raw,this.isUpload=!0;var e=t.size/1024/1024<10;e?(this.form.avatar=URL.createObjectURL(t.raw),this.$forceUpdate()):this.$message.error("Ảnh không được quá 20mb")}},{key:"handleAvatarSuccess",value:function(t){this.imageUrl=URL.createObjectURL(t.raw)}},{key:"beforeAvatarUpload",value:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("Avatar picture must be JPG format!"),a||this.$message.error("Avatar picture size can not exceed 2MB!"),e&&a}},{key:"handleChangeStatus",value:function(t){0==t&&1==this.dataProp.levelDepth&&(1==this.dataForm.checkMessage?(this.$message({message:"Cập nhật thất bại do còn ĐVKD trực thuộc đang hoạt động",type:"error"}),this.dataForm.status=!0):this.dataForm.status=!1),1==t&&2==this.dataProp.levelDepth&&(0==this.dataForm.checkChildern?(this.$message({message:"Cập nhật thất bại do ĐVQL không hoạt động. Vui lòng cập nhật đúng ĐVQL hoạt động & thử lại.",type:"error"}),this.dataForm.status=!1):this.dataForm.status=!0),1==this.dataForm.status?this.dataInput.status="ACTIVE":this.dataInput.status="INACTIVE"}},{key:"loadMoreSaleMember",value:function(){this.querySaleMember.i+=20;var t=Object(y["debounce"])(this.getSaleMemberList,500);t(this.querySaleMember.search,!0)}},{key:"remoteSaleMembers",value:function(t){this.querySaleMember.search=Object(y["trim"])(t),this.querySaleMember.i=0,this.querySaleMember.ps=20;var e=Object(y["debounce"])(this.getSaleMemberList,500);e(t)}},{key:"getSaleMemberList",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(e){var a,i,n,s,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=r.length>1&&void 0!==r[1]&&r[1],t.prev=1,t.next=4,this.apiEmployee.getEmployeeList({search:Object(y["trim"])(e),i:this.querySaleMember.i,ps:this.querySaleMember.ps,statusAccount:0,groupCode:"INSURANCE"});case 4:i=t.sent,a?(n=i.data||[],this.listRelationship=[].concat(Object(h["a"])(this.listRelationship),Object(h["a"])(n))):this.listRelationship=i.data||[],s={id:+this.dataProp.leaderId,memberNo:this.dataProp.leaderMemberCode,fullName:this.dataProp.leaderFullName},this.listRelationship.push(s),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),this.listRelationship=[];case 13:case"end":return t.stop()}}),t,this,[[1,10]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getLocationList",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(e){var a,i,n,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,null===(a=this.apiUser)||void 0===a?void 0:a.getAreaList({search:Object(y["trim"])(e),type:1,i:0,districtId:null===(i=this.user)||void 0===i||null===(n=i.districts)||void 0===n?void 0:n[0].id,ps:20}).then((function(t){s.areaList=t.data})).catch((function(t){return console.log(t)}));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"loadMoreBranch",value:function(){this.query.branches.i+=20;var t=Object(y["debounce"])(this.getBranch,100);t(this.query.branches.search,!0)}},{key:"remoteBranch",value:function(t){this.query.branches.search=Object(y["trim"])(t),this.query.branches.i=0,this.query.branches.ps=20;var e=Object(y["debounce"])(this.getBranch,500);e(t)}},{key:"getBranch",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(e){var a,i,n,s,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=r.length>1&&void 0!==r[1]&&r[1],t.prev=1,t.next=4,null===(i=this.locationRes)||void 0===i?void 0:i.list("branch",{search:Object(y["trim"])(e),i:this.query.branches.i,ps:this.query.branches.ps});case 4:n=t.sent,a?(s=n||[],this.branchList=[].concat(Object(h["a"])(this.branchList),Object(h["a"])(s))):this.branchList=n||[],t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),this.branchList=[];case 11:console.log("branch",this.branchList);case 12:case"end":return t.stop()}}),t,this,[[1,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"handleCancel",value:function(){this.setOpenPopup({popupName:"edit-unit",isOpen:!1})}},{key:"updateAvatar",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(e){var a,i,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=new FormData,a.append("avatar",this.imageUrl),!this.imageUrl){t.next=5;break}return t.next=5,null===(i=this.api)||void 0===i?void 0:i.uploadAvatar(e,a).then((function(t){n.form.avatar=t})).catch((function(){}));case 5:this.isUpload=!1;case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"handleSave",value:function(){var t=this,e=this.$refs.dataInput;e.validate((function(e){if(!e)return console.log("error validate data!"),!1;var a;1==t.dataProp.levelDepth?t.dataInput.locationType="BRANCH":t.dataInput.locationType="TRANSACTION_OFFICE",t.handleChangeInput(t.dataInput.leaderId);var i=Object(p["a"])(Object(p["a"])({},t.leaderData),{},{name:t.dataInput.name?t.dataInput.name:null,locationCode:t.dataInput.locationCode?t.dataInput.locationCode:null,parentId:t.dataInput.parentId?t.dataInput.parentId:null,status:t.dataInput.status?t.dataInput.status:null,locationType:t.dataInput.locationType?t.dataInput.locationType:null,contactEmailList:t.dataInput.contactEmailList?t.dataInput.contactEmailList:null,transactionOfficeType:t.dataInput.transactionOfficeType?t.dataInput.transactionOfficeType:null}),n=t.dataInput.id;null===(a=t.api)||void 0===a||a.updateLocation(i,n).then((function(){t.updateAvatar(n),t.$message.success("Cập nhật đơn vị thành công"),t.setOpenPopup({popupName:"edit-unit",isOpen:!1}),t.$emit("edit",123)})).catch((function(e){t.$message.error(e.message)}))}))}},{key:"created",value:function(){var t,e,a,i,n,s,r,l;this.locationRes=Object(g["a"])("location",{districtId:this.districtId}),this.apiUser=Object(g["a"])("user",{districtId:null===(t=this.user)||void 0===t||null===(e=t.districts)||void 0===e?void 0:e[0].id}),this.apiEmployee=Object(g["a"])("employee",{districtId:null===(a=this.user)||void 0===a||null===(i=a.districts)||void 0===i?void 0:i[0].id}),this.api=Object(g["a"])("transaction",{districtId:null===(n=this.user)||void 0===n||null===(s=n.districts)||void 0===s?void 0:s[0].id}),this.apiLocation=Object(g["a"])("location",{districtId:null===(r=this.user)||void 0===r||null===(l=r.districts)||void 0===l?void 0:l[0].id})}},{key:"getDetailLocation",value:function(t){var e=this;this.api.getDetailLocation(t).then((function(t){e.response=t,e.dataInput=t,e.form.avatar=t.avatar,0==e.dataInput.leaderId&&(e.dataInput.leaderId=null),"ACTIVE"==e.dataInput.status?e.dataForm.status=!0:e.dataForm.status=!1,0==e.dataInput.parentId&&(e.dataInput.parentId="",console.log("id",e.dataInput.parentId)),e.getChildenList()})).catch((function(t){return console.log(t)}))}},{key:"getChildenList",value:function(){var t=this;if(1==this.dataProp.levelDepth){var e={parentId:this.dataProp.id};this.apiLocation.getListLocationTree(e).then((function(e){t.childrenList=e;var a=t.childrenList.filter((function(t){return"ACTIVE"==t.status}));a.length>0?t.dataForm.checkMessage=!0:t.dataForm.checkMessage=!1}))}else this.checkBranchList=this.branchList.filter((function(e){return e.id==t.dataProp.parentId})),this.childrenBranch=this.checkBranchList[0],"ACTIVE"==this.childrenBranch.status?this.dataForm.checkChildern=!0:this.dataForm.checkChildern=!1}},{key:"handleOpen",value:function(){1==this.dataProp.levelDepth?this.getLocationList(""):this.getBranch(""),this.getSaleMemberList(""),this.getDetailLocation(this.dataProp.id),console.log("cai nay",this.dataProp)}},{key:"handleClose",value:function(){this.$refs.dataInput.clearValidate(),this.setOpenPopup({popupName:"edit-unit",isOpen:!1}),this.dataInput={},this.form={}}}]),a}(Object(v["b"])(f["a"]));Object(o["a"])([Object(v["c"])()],M.prototype,"dataProp",void 0),Object(o["a"])([x.State("user")],M.prototype,"user",void 0),M=Object(o["a"])([Object(v["a"])({components:{}})],M);var A=M,_=A,N=(a("75cf"),Object(L["a"])(_,w,S,!1,null,null,null)),D=N.exports,R=a("1abc"),E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-popup",{attrs:{name:"employeeunit",open:t.handleOpen,close:t.handleClose,hiddenFooter:!0,width:"1000px"}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("Danh sách nhân viên")]),a("div",{staticClass:"div-action2"},[a("div",{staticClass:"search"},[a("span",{staticClass:"flex"},[a("base-icon",{staticClass:"icon-search",attrs:{icon:"search"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],staticClass:"searchBar",attrs:{type:"text",placeholder:"Tìm kiếm..."},domProps:{value:t.searchValue},on:{input:[function(e){e.target.composing||(t.searchValue=e.target.value)},t.handleSearch]}})],1)])]),a("div",{staticClass:"basehehe"},[a("base-table",{staticClass:"base",attrs:{data:t.dataList,table:t.pageQuery,showPagination:!0,showSummary:!1,"default-expand-all":!1,paginationInfo:"nhân viên",showAppend:!1},on:{sizeChange:t.handleSizeChange,currentChange:t.handleCurrentChange}},[a("el-table-column",{attrs:{type:"index",prop:"id",label:"#",width:"68",align:"center"}}),a("el-table-column",{attrs:{label:"Nhân viên",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"row-user"},[e.row.avatar?a("el-avatar",{attrs:{size:"medium",src:e.row.avatar}}):a("base-icon",{staticClass:"avatar__imployee--defalt",attrs:{icon:"icon-avatar-default"}}),a("span",[t._v(" "+t._s(e.row.fullName)+" ")])],1)]}}])}),a("el-table-column",{attrs:{prop:"phone",label:"Số điện thoại",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"email",label:"Email","min-width":"200"}}),a("el-table-column",{attrs:{prop:"titleName",label:"Chức danh","min-width":"200"}})],1)],1)])},V=[],P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"import-filterh"},[a("div",{staticClass:"be-flex jc-space-between"},[a("div",{staticClass:"action-left flex"},[a("div",{staticClass:"search"},[a("span",{staticClass:"flex"},[a("base-icon",{staticClass:"icon-search",attrs:{icon:"search"}}),a("input",{staticClass:"searchBar",attrs:{type:"text",placeholder:"Tìm kiếm..."}})],1)])])])])},U=[],q=a("6d3f"),$=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){return Object(s["a"])(this,a),e.apply(this,arguments)}return a}(v["d"]);$=Object(o["a"])([Object(v["a"])({components:{BaseIcon:q["a"]}})],$);var F=$,B=F,K=(a("564a"),Object(L["a"])(B,P,U,!1,null,"54dc4a2c",null)),Q=K.exports,H=Object(b["a"])("beUser"),z=Object(b["a"])("beEmployee"),G=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.pageQuery={limit:10,page:1,total:0,search:""},t.searchValue="",t.paginitInfo={i:0,ps:20,limit:10,page:1,search:"",sort:1,locationId:0,statusAccount:0,total:0},t.dataList=[],t}return Object(r["a"])(a,[{key:"handleSearch",value:function(){var t=this;this.pageQuery.page=1,setTimeout((function(){t.pageQuery.search=t.searchValue,t.init()}),500)}},{key:"handleOpen",value:function(){this.init()}},{key:"created",value:function(){var t,e;this.api=Object(g["a"])("employee",{districtId:null===(t=this.user)||void 0===t||null===(e=t.districts)||void 0===e?void 0:e[0].id})}},{key:"handleSizeChange",value:function(t){this.pageQuery.page=1,this.pageQuery.limit=t,this.init()}},{key:"handleCurrentChange",value:function(t){this.pageQuery.page=t,this.init()}},{key:"init",value:function(){var t,e=this,a=Object(p["a"])(Object(p["a"])({},this.pageQuery),{},{locationId:null===(t=this.unitDetail)||void 0===t?void 0:t.id});this.api.all(a).then((function(t){e.dataList=t})).catch((function(t){console.log(t)})),this.api.getCountMembers(a).then((function(t){e.pageQuery.total=+t})).catch((function(t){console.log(t)}))}},{key:"handleClose",value:function(){console.log("close")}}]),a}(Object(v["b"])(f["a"]));Object(o["a"])([H.State("user")],G.prototype,"user",void 0),Object(o["a"])([z.State("unitDetail")],G.prototype,"unitDetail",void 0),G=Object(o["a"])([Object(v["a"])({components:{ImportFilter:Q}})],G);var J=G,W=J,X=(a("e48f"),Object(L["a"])(W,E,V,!1,null,"61187f78",null)),Y=X.exports,Z=Object(b["a"])("beUser"),tt=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.respones=[],t.locationList=[],t.dataList=[],t.listTotal=[],t.data=[],t.valueActive="",t.dropDownText="Hoạt động",t.isSearch=!1,t.locationId=0,t.locationRes=void 0,t.pageQuery={page:1,limit:20,total:0,search:"",status:"ACTIVE"},t.options=[{value:"1",label:"Hoạt động"},{value:"2",label:"Không hoạt động"}],t.statusList=[{id:0,label:"Hoạt động",value:"ACTIVE"},{id:1,label:"Không hoạt động",value:"INACTIVE"}],t.paymentPeriodList=[{value:"1",lable:"1"},{value:"2",lable:"2"},{value:"4",lable:"4"}],t.idArea="",t.searchValue="",t.status="Hoạt động",t.childrens=[],t.check=!1,t.params={page:1,limit:10,ps:10,i:10},t.dataPopup={},t.type="",t.expandRowKeys=[],t}return Object(r["a"])(a,[{key:"checkRole",value:function(t){t.includes("ADMIN")?this.check=!0:this.check=!1,console.log("check",this.check)}},{key:"mounted",value:function(){var t=this,e={parentId:0};this.api.getListLocationTree(e).then((function(e){t.data=e})),this.checkRole(this.roleMembers.userRole)}},{key:"handleCommand",value:function(t){var e=this;this.dropDownText="ACTIVE"==t?"Hoạt động":"Không hoạt động",this.pageQuery.status=t,"ACTIVE"==t?(this.isSearch=!1,""==this.searchValue||null==this.searchValue?(this.isSearch=!1,setTimeout((function(){e.getFirstList()}),500)):(this.isSearch=!0,setTimeout((function(){e.getLocationList()}),500))):(this.isSearch=!0,setTimeout((function(){e.getLocationList()}),100))}},{key:"editItem",value:function(t){this.dataPopup=t}},{key:"createItem",value:function(t){this.type=t}},{key:"getIdArea",value:function(t){this.idArea=t}},{key:"createBranch",value:function(t){this.type=t}},{key:"handleExpandChange",value:function(t){var e=this,a=t.row.id,i={parentId:a};this.api.getListLocationTree(i).then((function(t){e.dataList=t}))}},{key:"hackleClickAddUnit",value:function(t){this.type=t,this.setOpenPopup({popupName:"create-unit",isOpen:!0})}},{key:"handleSearch",value:function(){var t=this;this.pageQuery.page=1,this.pageQuery.search=this.searchValue,""==this.searchValue||null==this.searchValue?(this.isSearch=!1,setTimeout((function(){t.getFirstList()}),500)):(this.isSearch=!0,setTimeout((function(){t.getLocationList()}),500))}},{key:"handleSizeChange",value:function(t){this.params.page=1,this.params.limit=t,this.pageQuery.page=1,this.pageQuery.limit=t,this.getLocationList()}},{key:"handleCurrentChange",value:function(t){this.pageQuery.page=t,this.getLocationList()}},{key:"handleChangeStatsus",value:function(t){var e=this;this.pageQuery.status=t,"ACTIVE"==t?(this.isSearch=!1,""==this.searchValue||null==this.searchValue?(this.isSearch=!1,setTimeout((function(){e.getFirstList()}),500)):(this.isSearch=!0,setTimeout((function(){e.getLocationList()}),500))):(this.isSearch=!0,setTimeout((function(){e.getLocationList()}),100))}},{key:"getLocationList",value:function(){var t=this;this.api.getLocationList(this.pageQuery).then((function(e){t.data=e}))}},{key:"getFirstList",value:function(){var t=this,e={parentId:0};this.api.getListLocationTree(e).then((function(e){t.data=e}))}},{key:"handleFilter",value:function(t){this.pageQuery.page=1,this.getFirstList()}},{key:"created",value:function(){var t,e;this.api=Object(g["a"])("location",{districtId:null===(t=this.user)||void 0===t||null===(e=t.districts)||void 0===e?void 0:e[0].id})}}]),a}(f["a"]);Object(o["a"])([Z.State("user")],tt.prototype,"user",void 0),Object(o["a"])([Z.State("role")],tt.prototype,"roleMembers",void 0),tt=Object(o["a"])([Object(v["a"])({components:{UnitItem:R["default"],EmployeeUnitInfo:Y,PopupCreateUnit:T,PopupEditUnit:D}})],tt);var et=tt,at=et,it=(a("fe3a"),Object(L["a"])(at,i,n,!1,null,null,null));e["default"]=it.exports},"51c3":function(t,e,a){"use strict";a("9c1c")},"564a":function(t,e,a){"use strict";a("bc90")},"75cf":function(t,e,a){"use strict";a("f839")},"9c1c":function(t,e,a){},b05f:function(t,e,a){},bc90:function(t,e,a){},c073:function(t,e,a){"use strict";a("012d")},e48f:function(t,e,a){"use strict";a("03d4")},f839:function(t,e,a){},fe3a:function(t,e,a){"use strict";a("b05f")}}]);
//# sourceMappingURL=chunk-57d59c21.3b25cfc0.js.map