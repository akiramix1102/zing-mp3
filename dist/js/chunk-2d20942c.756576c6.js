(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20942c"],{a7ff:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"report-page"},[n("base-tree-table",{staticClass:"table-text-body-bold table-expanded table-width-background table-with-summary-2 custom-table custom-table-height custom-table-height-9e",attrs:{data:t.data,table:t.table,filters:t.filters,showPagination:!0,showSummary:!0,summaryMethod:t.summaryMethod,"default-expand-all":!1,sumText:"Tổng",paginationInfo:"khu vực",rowKey:"id",emptyText:"Không có dữ liệu báo cáo"},on:{sizeChange:t.handleSizeChange,currentChange:t.handleCurrentChange,filterChange:t.handleFiltersChange,"expand-change":t.handleExpandChange},scopedSlots:t._u([{key:"header",fn:function(e){var a=e.filters,r=e.events;return n("div",{staticClass:"be-flex align-center header"},[n("report-filter",{staticClass:"be-flex-item",attrs:{filters:a,type:"pl9g"},on:{change:r}}),n("div",{staticClass:"actions"},[n("el-button",{staticClass:"custom-button",attrs:{loading:t.isExcelLoading},on:{click:function(e){return t.handleExport("pl9g","excel",a,t.table,t.data)}}},[n("span",{staticClass:"be-inline-flex align-center"},[n("base-icon",{staticClass:"icon",attrs:{icon:"excel-fullcolor"}}),t._v(" Xuất Excel ")],1)]),n("el-button",{staticClass:"custom-button",attrs:{loading:t.isPdfLoading},on:{click:function(e){return t.handleExport("pl9g","pdf",a,t.table,t.data)}}},[n("span",{staticClass:"be-inline-flex align-center"},[n("base-icon",{staticClass:"icon",attrs:{icon:"pdf"}}),t._v(" Xuất PDF ")],1)])],1)],1)}}])},[n("el-table-column",{attrs:{type:"expand",width:"40px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("base-tree-table",{staticClass:"table-text-body-normal table-no-background table-child-table table-hidden-scroll custom-table",attrs:{data:e.row.childrens,isLoading:t.isLoading,table:t.table,showPagination:!1,showTableHeader:!1,sumText:"Tổng",paginationInfo:"khu vực",rowKey:"id"}},[n("el-table-column",{attrs:{width:"40px"}}),n("el-table-column",{attrs:{label:"#",prop:"id",align:"left",width:"57px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(""+(e.$index+1)))]}}],null,!0)}),n("el-table-column",{attrs:{label:"ĐƠN VỊ KINH DOANH",prop:"branch_name",width:"311px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("div",[n("span",[t._v(t._s(a.branch_code)+" - "+t._s(a.branch_name))])])]}}],null,!0)}),n("el-table-column",{attrs:{label:"Luỹ kế năm",prop:"commission_k2_amount",width:"140px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(t._s(t._f("formatNumber")(n.commission_k2_amount)))]}}],null,!0)}),t._l(12,(function(e){return n("el-table-column",{key:e,attrs:{label:"Tháng "+e,width:"420px",align:"center"}},[n("el-table-column",{attrs:{label:"Năm 2",prop:"commission_year2_month"+e+"_amount",width:"140px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.row;return[t._v(t._s(t._f("formatNumber")(a["commission_year2_month"+e+"_amount"])))]}}],null,!0)}),n("el-table-column",{attrs:{label:"Năm 3",prop:"commission_year3_month"+e+"_amount",width:"140px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.row;return[t._v(t._s(t._f("formatNumber")(a["commission_year3_month"+e+"_amount"])))]}}],null,!0)}),n("el-table-column",{attrs:{label:"Năm 4",prop:"commission_year4_month"+e+"_amount",width:"140px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.row;return[t._v(t._s(t._f("formatNumber")(a["commission_year4_month"+e+"_amount"])))]}}],null,!0)})],1)}))],2)]}}])}),n("el-table-column",{attrs:{label:"#",type:"index",align:"left",width:"57px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("numberToRomanNumberal")(e.$index+(t.table.page-1)*t.table.limit+1)))]}}])}),n("el-table-column",{attrs:{label:"ĐƠN VỊ KINH DOANH",prop:"area_name",width:"311px"}}),n("el-table-column",{attrs:{label:"Luỹ kế năm",prop:"commission_k2_amount",width:"140px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(t._s(t._f("formatNumber")(n.commission_k2_amount)))]}}])}),t._l(12,(function(e){return n("el-table-column",{key:e,attrs:{label:"Tháng "+e,width:"420px",align:"center"}},[n("el-table-column",{attrs:{label:"Năm 2",prop:"commission_year2_month"+e+"_amount",width:"140px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.row;return[t._v(t._s(t._f("formatNumber")(a["commission_year2_month"+e+"_amount"])))]}}],null,!0)}),n("el-table-column",{attrs:{label:"Năm 3",prop:"commission_year3_month"+e+"_amount",width:"140px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.row;return[t._v(t._s(t._f("formatNumber")(a["commission_year3_month"+e+"_amount"])))]}}],null,!0)}),n("el-table-column",{attrs:{label:"Năm 4",prop:"commission_year4_month"+e+"_amount",width:"140px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.row;return[t._v(t._s(t._f("formatNumber")(a["commission_year4_month"+e+"_amount"])))]}}],null,!0)})],1)}))],2)],1)},r=[],o=n("f3f3"),i=n("c964"),l=n("276c"),s=n("e954"),u=n("920b"),c=n("92a6"),m=(n("96cf"),n("9ab4")),h=n("08ba"),d=n("2ef0"),b=n("1b40"),p=n("08e1"),f=n("e383"),g=function(t){Object(u["a"])(n,t);var e=Object(c["a"])(n);function n(){var t;return Object(l["a"])(this,n),t=e.apply(this,arguments),t.data=[],t.filters={month:(new Date).getMonth()+1,year:new Date},t.table={total:0,page:1,limit:20},t.isLoading=!1,t.tableHeight="auto",t.reportRes=void 0,t.summary={},t.debounceFilter=Object(d["debounce"])((function(){t.init(),t.getSummary()}),600),t}return Object(s["a"])(n,[{key:"handleLoad",value:function(t,e,n){setTimeout(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n([]);case 1:case"end":return t.stop()}}),t)}))),500)}},{key:"init",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.isLoading){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,this.isLoading=!0,t.next=6,null===(e=this.reportRes)||void 0===e?void 0:e.getPl9defghReport({type:"PL9G",zone:"area"},Object(d["assign"])(this.filters,this.table));case 6:n=t.sent,this.data=(null===n||void 0===n?void 0:n.contents)||[],this.table.total=(null===n||void 0===n?void 0:n.totalElements)||0,this.isLoading=!1,t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),this.isLoading=!1;case 15:case"end":return t.stop()}}),t,this,[[2,12]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleExpandChange",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0!==Object(d["size"])(e.row.childrens)){t.next=6;break}return t.next=4,null===(n=this.reportRes)||void 0===n?void 0:n.getPl9defghReport({type:"PL9G",zone:"branch",areaId:e.row.area_id},Object(o["a"])(Object(o["a"])({},this.filters),{},{year:this.filters.year,month:this.filters.month,limit:1e4,page:1}));case 4:a=t.sent,e.row.childrens=(null===a||void 0===a?void 0:a.contents)||[];case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getSummary",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,null===(e=this.reportRes)||void 0===e?void 0:e.getPl9defghReportSummary("pl9g",Object(d["assign"])(this.filters,this.table));case 3:n=t.sent,this.summary=n||{},console.log("result",n),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"summaryMethod",value:function(t){var e=this,n=t.columns,a=[];return Object(d["forEach"])(n,(function(t,n){if(n<2)a[n]="";else if(2!==n){var r=e.summary[t.property];a[n]=r?e.$options.filters.formatNumber(r):""}else a[n]="Tổng"})),console.log(a),a}},{key:"handleSizeChange",value:function(t){this.table.limit=t,this.table.page=1,this.init(),this.getSummary()}},{key:"handleCurrentChange",value:function(t){this.table.page=t,this.init(),this.getSummary()}},{key:"handleFiltersChange",value:function(t){this.filters=Object(o["a"])(Object(o["a"])({},t),{},{reportType:"9g"}),this.table.page=1,this.debounceFilter()}},{key:"getHeightOfTable",value:function(){this.tableHeight="".concat(window.innerHeight-233,"px")}},{key:"mounted",value:function(){this.getHeightOfTable()}},{key:"created",value:function(){this.reportRes=Object(h["a"])("report",{districtId:this.districtId})}}]),n}(Object(b["b"])(f["a"]));g=Object(m["a"])([Object(b["a"])({components:{ReportFilter:p["a"]}})],g);var _=g,v=_,y=n("2877"),w=Object(y["a"])(v,a,r,!1,null,null,null);e["default"]=w.exports}}]);
//# sourceMappingURL=chunk-2d20942c.756576c6.js.map