(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a8561b5a"],{"12aa":function(t,e,a){"use strict";a("6cde")},1585:function(t,e,a){},1868:function(t,e,a){},"2a8b":function(t,e,a){},"2d5d":function(t,e,a){"use strict";a("1868")},"34de":function(t,e,a){"use strict";a("1585")},4792:function(t,e,a){},"4ce7":function(t,e,a){"use strict";a("b739")},"524a":function(t,e,a){"use strict";a("2a8b")},"6cde":function(t,e,a){},"76c9":function(t,e,a){"use strict";a("c09e")},"806c":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-content"},[a("base-table",{ref:"contractTable",attrs:{data:t.data,table:t.query,showPagination:!0,paginationInfo:"chương trình thi đua",emptyText:"Không có dữ liệu chương trình thi đua"},on:{sizeChange:t.handleSizeChange,currentChange:t.handleCurrentChange,rowClick:t.handleRowClick}},[a("template",{slot:"header"},[a("div",{staticClass:"header-action be-flex jc-space-between"},[a("div",{staticClass:"aciton-left flex"},[a("search-bar",{on:{search:t.handleSearch}}),a("filter-program",{staticClass:"filter",attrs:{typeProgramSource:t.typeProgramSource,typeApplyLevel:t.typeApplyLevel,typeApplyFee:t.typeApplyFee,productCategory:t.productCategory},on:{search:t.handleSearchFillter}}),a("el-dropdown",{staticClass:"import-sort",attrs:{trigger:"click"},on:{command:t.handleCommand}},[a("el-button",{staticClass:"be-button-unset custom-button text-filter"},[a("base-icon",{staticClass:"icon",attrs:{icon:"sort"}}),t._v(" Sắp xếp ")],1),a("el-dropdown-menu",{staticClass:"sort-menu-custom",attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.option,(function(e){return a("el-dropdown-item",{key:e.id,class:e.active?"active":null,attrs:{command:e,divided:e.divided}},[a("span",{staticClass:"be-flex"},[a("span",{staticClass:"be-flex-item"},[t._v(" "+t._s(e.name)+" ")])])])})),1)],1)],1),a("div",{staticClass:"action-right flex actions"},["1"===t.params.emulationStatus?a("el-button",{staticClass:"custom-button be-btn-danger",attrs:{loading:t.isLoading},on:{click:t.handleCreate}},[t._v(" Thêm mới ")]):t._e()],1)])]),a("el-table-column",{attrs:{type:"index",index:t.indexMethod,label:"#",width:"50",align:"center"}}),a("el-table-column",{attrs:{prop:"programCode",label:"Mã CTTĐ ","min-width":"200",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.programCode))])]}}])}),a("el-table-column",{attrs:{label:"Tên CTTĐ ","min-width":"250",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.programName))])]}}])}),a("el-table-column",{attrs:{label:"Ngày Bắt Đầu ","min-width":"140",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t._f("formatDateTime")(e.row.fromDate)))])]}}])}),a("el-table-column",{attrs:{label:"Ngày Kết Thúc","min-width":"140",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t._f("formatDateTime")(e.row.toDate)))])]}}])}),a("el-table-column",{attrs:{label:"Mô Tả","min-width":"270",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.description))])]}}])}),a("el-table-column",{attrs:{label:"Thao Tác",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"===t.params.emulationStatus?a("div",{staticClass:"be-flex table-action-list"},[a("base-icon",{staticClass:"action-item",attrs:{slot:"reference",icon:"action"},nativeOn:{click:function(a){return t.handleClickAction(e.row,"edit")}},slot:"reference"}),a("el-dropdown",{attrs:{trigger:"click"}},[a("span",{on:{click:t.showDropDown}},[a("base-icon",{staticClass:"action-item",attrs:{slot:"reference",icon:"icon-more"},slot:"reference"})],1),a("el-dropdown-menu",{staticClass:"el-dropdown-action",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(a){return t.handleClickAction(e.row,"copy")}}},[t._v("Sao chép")]),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(a){return t.handleClickAction(e.row,"delete")}}},[t._v("Xóa")])],1)],1)],1):t._e()]}}])})],2),a("create-program",{attrs:{typeProgramSource:t.typeProgramSource,typeApplyLevel:t.typeApplyLevel,typeApplyFee:t.typeApplyFee,productCategory:t.productCategory,isAction:t.isAction,emulationProgramEdit:t.emulationProgram},on:{save:t.saveProgram,delete:t.deleteProgramEdit}}),a("detail-program",{attrs:{emulationProgram:t.emulationProgram},on:{editProgram:t.editProgram}}),a("delete-program",{attrs:{emulationProgram:t.emulationProgram},on:{delete:t.deleteProgram}})],1)},i=[],o=a("f3f3"),s=a("276c"),l=a("e954"),n=a("920b"),c=a("92a6"),u=(a("ac1f"),a("841c"),a("9ab4")),m=a("1b40"),p=a("9f48"),h=a("08ba"),d=a("2ef0"),f=a("4bb5"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"search flex"},[a("base-icon",{staticClass:"icon-search",attrs:{icon:"search"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.valueSearch,expression:"valueSearch"}],staticClass:"searchBar",attrs:{type:"text",placeholder:"Tìm kiếm..."},domProps:{value:t.valueSearch},on:{input:function(e){e.target.composing||(t.valueSearch=e.target.value)}}})],1)},b=[],v=function(t){Object(n["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.valueSearch="",t.searchText=Object(d["debounce"])((function(e){t.$emit("search",Object(d["trim"])(e))}),500),t}return Object(l["a"])(a,[{key:"handleSearch",value:function(t){this.searchText(t)}},{key:"handleReset",value:function(){this.valueSearch=""}}]),a}(m["d"]);Object(u["a"])([Object(m["e"])("valueSearch",{immediate:!1})],v.prototype,"handleSearch",null),v=Object(u["a"])([Object(m["a"])({components:{}})],v);var y=v,C=y,k=(a("34de"),a("2877")),P=Object(k["a"])(C,g,b,!1,null,"7f8c0298",null),T=P.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"popover-filter"},[a("div",{staticClass:"be-flex jc-space-between"},[a("div",{staticClass:"action-left flex"},[a("div",{staticClass:"filter-item"},[a("el-popover",{attrs:{placement:"bottom","popper-class":"popper-filter-custom",width:"340",trigger:"click"},model:{value:t.isClose,callback:function(e){t.isClose=e},expression:"isClose"}},[a("div",{staticClass:"cursor text-filter",attrs:{slot:"reference"},slot:"reference"},[a("base-icon",{attrs:{icon:"filter"}}),a("span",[t._v("Bộ lọc")])],1),a("div",{staticClass:"be-flex-column select-date-upload"},[a("span",{staticClass:"label small"},[t._v("Thời gian thực hiện")]),a("div",{staticClass:"be-flex select-date-time"},[a("div",{staticClass:"date-item"},[a("el-date-picker",{attrs:{format:"dd/MM/yyyy","value-format":"timestamp",type:"date",placeholder:"Từ ngày"},on:{change:t.handleChangeDate},model:{value:t.filter.fromDate,callback:function(e){t.$set(t.filter,"fromDate",e)},expression:"filter.fromDate"}})],1),a("div",{staticClass:"date-item"},[a("el-date-picker",{attrs:{"picker-options":t.dateOption,format:"dd/MM/yyyy","value-format":"timestamp",type:"date",placeholder:"Đến ngày"},on:{change:t.handleChangeDate},model:{value:t.filter.toDate,callback:function(e){t.$set(t.filter,"toDate",e)},expression:"filter.toDate"}})],1)])]),a("div",{staticClass:"content"},[a("div",{staticClass:"be-flex-column uploader"},[a("span",{staticClass:"label small"},[t._v("Nguồn chương trình")]),a("el-select",{attrs:{"popper-class":"uploader-select",placeholder:"Nguồn chương trình"},model:{value:t.filter.programSource,callback:function(e){t.$set(t.filter,"programSource",e)},expression:"filter.programSource"}},t._l(t.typeProgramSource,(function(e){return a("el-option",{key:e.id,attrs:{label:t.$t("program.programSource."+e.code),value:e.code}})})),1)],1)]),a("div",{staticClass:"content"},[a("div",{staticClass:"be-flex-column uploader"},[a("span",{staticClass:"label small"},[t._v("Đối tượng áp dụng")]),a("el-select",{attrs:{"popper-class":"uploader-select",placeholder:"Đối tượng áp dụng"},model:{value:t.filter.applyLevel,callback:function(e){t.$set(t.filter,"applyLevel",e)},expression:"filter.applyLevel"}},t._l(t.typeApplyLevel,(function(e){return a("el-option",{key:e.id,attrs:{label:t.$t("program.applyLevel."+e.code),value:e.code}})})),1)],1)]),a("el-row",{staticClass:"row"},[a("el-col",{attrs:{span:10}},[a("span",{staticClass:"label small"},[t._v("Loại phí áp dụng")]),a("el-select",{attrs:{"popper-class":"uploader-select",placeholder:"Phí áp dụng"},model:{value:t.filter.applyFeeType,callback:function(e){t.$set(t.filter,"applyFeeType",e)},expression:"filter.applyFeeType"}},t._l(t.typeApplyFee,(function(t){return a("el-option",{key:t.id,attrs:{label:t.code,value:t.code}})})),1)],1),a("el-col",{staticClass:"float-right",attrs:{span:11}},[a("span",{staticClass:"label small"},[t._v("Nhóm sản phẩm")]),a("el-select",{attrs:{"popper-class":"uploader-select",placeholder:"Nhóm sản phẩm"},model:{value:t.filter.productCategoryCode,callback:function(e){t.$set(t.filter,"productCategoryCode",e)},expression:"filter.productCategoryCode"}},t._l(t.productCategory,(function(t){return a("el-option",{key:t.id,attrs:{label:t.categoryCode+" - "+t.categoryName,value:t.categoryCode}})})),1)],1)],1),a("div",{staticClass:"popper-filter-footer"},[a("div",{staticClass:"block-bottom"},[a("el-button",{staticClass:"be-btn-danger",on:{click:t.handleSearch}},[t._v("Áp dụng")]),a("el-button",{staticClass:"btn",on:{click:t.handleReset}},[t._v("Mặc định")])],1)])],1)],1)])])])},A=[],w=(a("4de4"),a("a15b"),a("1276"),a("6d3f")),O=function(t){Object(n["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.isClose=!1,t.filter={programSource:"",fromDate:null,toDate:null,applyLevel:"",applyFeeType:"",productCategoryCode:""},t}return Object(l["a"])(a,[{key:"handleSearch",value:function(){this.$emit("search",this.filter),this.isClose=!1}},{key:"handleReset",value:function(){this.filter={programSource:"",fromDate:null,toDate:null,applyLevel:"",applyFeeType:"",productCategoryCode:""}}},{key:"dateOption",get:function(){var t=this;return{disabledDate:function(e){return t.disabledDate(e)}}}},{key:"disabledDate",value:function(t){if(this.filter.fromDate)return t.getTime()<this.filter.fromDate+864e5}},{key:"handleChangeDate",value:function(){if(this.filter.fromDate&&this.filter.toDate){var t=new Date(this.filter.fromDate),e=new Date(this.filter.toDate),a=this.$options.filters.formatDateTime(t),r=a.split("/").reverse().join("-"),i=this.$options.filters.formatDateTime(e),o=i.split("/").reverse().join("-");this.$emit("filterDate",{fd:r,td:o})}if(!this.filter.fromDate&&!this.filter.toDate){var s=null,l=null;this.$emit("filterDate",{fd:s,td:l})}}}]),a}(m["d"]);Object(u["a"])([Object(m["c"])({required:!1,type:Array,default:[]})],O.prototype,"typeProgramSource",void 0),Object(u["a"])([Object(m["c"])({required:!1,type:Array,default:[]})],O.prototype,"typeApplyLevel",void 0),Object(u["a"])([Object(m["c"])({required:!1,type:Array,default:[]})],O.prototype,"typeApplyFee",void 0),Object(u["a"])([Object(m["c"])({required:!1,type:Array,default:[]})],O.prototype,"productCategory",void 0),O=Object(u["a"])([Object(m["a"])({components:{BaseIcon:w["a"]}})],O);var L=O,x=L,j=(a("12aa"),Object(k["a"])(x,_,A,!1,null,"13ab0c0c",null)),E=j.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-popup",{staticClass:"popup-valid program-create",attrs:{name:"program-create",open:t.handleOpen,close:t.handleClose,width:"980px",top:"25px",hiddenFooter:!0,closeClickModal:!1}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s("edit"===t.isAction?"Sửa":"copy"===t.isAction?"Sao chép":"Tạo")+" chương trình thi đua")]),a("el-form",{ref:"formInput",attrs:{model:t.emulationProgram,rules:t.rules}},[a("fieldset",[a("div",{staticClass:"title"},[t._v("Thông tin chung "),a("i",{staticClass:"el-icon-caret-bottom"})]),a("el-row",{staticClass:"row"},[a("el-col",{attrs:{span:10}},[a("label",{staticClass:"title-label"},[t._v(" Mã chương trình ")]),a("el-form-item",{attrs:{prop:"programCode"}},[a("el-input",{staticClass:"form-control",attrs:{placeholder:"Mã chương trình"},on:{input:t.handleChangeProgramCode},model:{value:t.emulationProgram.programCode,callback:function(e){t.$set(t.emulationProgram,"programCode",e)},expression:"emulationProgram.programCode"}}),t.objError.programCode?a("small",{staticClass:"error"},[t._v("Mã chương trình không được nhập quá 100 kí tự")]):t._e()],1)],1),a("el-col",{staticClass:"float-right",attrs:{span:10}},[a("label",{staticClass:"title-label"},[t._v(" Thời gian thực hiện ")]),a("el-row",{staticClass:"flex_line form-control"},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"fromDate"}},[a("el-date-picker",{staticClass:"block",attrs:{format:"dd/MM/yyyy","value-format":"timestamp",type:"date",placeholder:"Từ ngày"},model:{value:t.emulationProgram.fromDate,callback:function(e){t.$set(t.emulationProgram,"fromDate",e)},expression:"emulationProgram.fromDate"}})],1)],1),a("span",{staticClass:"dash"},[a("i",{staticClass:"el-icon-minus icon-dash"})]),a("el-col",{staticClass:"float-right",attrs:{span:11}},[a("el-form-item",{attrs:{prop:"toDate"}},[a("el-date-picker",{staticClass:"block",attrs:{"picker-options":t.pickerFromDate,format:"dd/MM/yyyy","value-format":"timestamp",type:"date",placeholder:"Đến ngày"},model:{value:t.emulationProgram.toDate,callback:function(e){t.$set(t.emulationProgram,"toDate",e)},expression:"emulationProgram.toDate"}})],1)],1)],1)],1)],1),a("el-row",{staticClass:"row"},[a("el-col",{attrs:{span:10}},[a("label",{staticClass:"title-label"},[t._v(" Tên chương trình ")]),a("el-form-item",{attrs:{prop:"programName"}},[a("el-input",{staticClass:"form-control",attrs:{placeholder:"Tên chương trình"},on:{input:t.handleChangeProgramName},model:{value:t.emulationProgram.programName,callback:function(e){t.$set(t.emulationProgram,"programName",e)},expression:"emulationProgram.programName"}}),t.objError.programName?a("small",{staticClass:"error"},[t._v("Tên chương trình không được nhập quá 250 kí tự")]):t._e()],1)],1),a("el-col",{staticClass:"float-right",attrs:{span:10}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("label",{staticClass:"title-label"},[t._v(" Ngày chốt ")])]),a("el-col",{attrs:{span:12}},[a("label",{staticClass:"title-label",staticStyle:{"margin-left":"10px"}},[t._v(" Tháng chi trả dự kiến ")])])],1),a("el-row",{staticClass:"flex_line form-control"},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"expireDate"}},[a("el-date-picker",{staticClass:"block",attrs:{format:"dd/MM/yyyy","value-format":"timestamp",type:"date",placeholder:"Chọn ngày"},model:{value:t.emulationProgram.expireDate,callback:function(e){t.$set(t.emulationProgram,"expireDate",e)},expression:"emulationProgram.expireDate"}})],1)],1),a("el-col",{staticClass:"float-right",staticStyle:{"margin-left":"10px"},attrs:{span:11}},[a("el-form-item",{attrs:{prop:"payroll"}},[a("el-date-picker",{staticClass:"block",attrs:{format:"MM/yyyy",type:"month",placeholder:"Chọn tháng","picker-options":t.pickerToday},on:{change:function(e){return t.valueEmulationChange(e,"payroll")}},model:{value:t.payroll,callback:function(e){t.payroll=e},expression:"payroll"}})],1)],1)],1)],1)],1),a("el-row",{staticClass:"row"},[a("el-col",{attrs:{span:10}},[a("label",{staticClass:"title-label"},[t._v(" Nguồn chương trình ")]),a("div",{staticClass:"form-control"},[a("el-form-item",{attrs:{prop:"programSource"}},[a("el-radio-group",{on:{change:function(e){return t.valueEmulationChange(e,"programSource")}},model:{value:t.emulationProgram.programSource,callback:function(e){t.$set(t.emulationProgram,"programSource",e)},expression:"emulationProgram.programSource"}},t._l(t.typeProgramSource,(function(e){return a("el-radio",{key:e.id,staticClass:"radio-control",attrs:{label:e.code}},[t._v(" "+t._s(t.$t("program.programSource."+e.code))+" ")])})),1)],1)],1)]),a("el-col",{staticClass:"float-right",attrs:{span:10}},[a("label",{staticClass:"title-label"},[t._v(" Mô tả ")]),a("el-input",{staticClass:"form-control",attrs:{type:"textarea",maxlength:250,"show-word-limit":"",autosize:{minRows:3,maxRows:3},placeholder:"Mô tả"},model:{value:t.emulationProgram.description,callback:function(e){t.$set(t.emulationProgram,"description",e)},expression:"emulationProgram.description"}})],1)],1)],1),a("fieldset",[a("div",{staticClass:"title"},[t._v("Đối tượng áp dụng "),a("i",{staticClass:"el-icon-caret-bottom"})]),a("el-row",{staticClass:"row"},[a("el-col",{attrs:{span:24}},[a("label",{staticClass:"title-label"},[t._v(" Đối tượng áp dụng ")]),a("div",{staticClass:"form-control"},[a("el-form-item",{attrs:{prop:"applyLevel"}},t._l(t.typeApplyLevel,(function(e){return a("el-radio",{key:e.id,staticClass:"radio-control",attrs:{label:e.code},on:{change:function(e){return t.valueEmulationChange(e,"applyLevel")}},model:{value:t.emulationProgram.applyLevel,callback:function(e){t.$set(t.emulationProgram,"applyLevel",e)},expression:"emulationProgram.applyLevel"}},[t._v(" "+t._s(t.$t("program.applyLevel."+e.code))+" ")])})),1)],1)])],1),a("el-row",{staticClass:"row"},[a("el-col",{attrs:{span:10}},[a("label",{staticClass:"title-label"},[t._v(" Khu vực ")]),a("el-form-item",{attrs:{prop:"areaCodeList"}},[a("el-select",{staticClass:"form-control",attrs:{remote:"","remote-method":t.remoteArea,filterable:"",multiple:"",placeholder:"Chọn khu vực"},on:{change:function(e){return t.selectEmulationChange(e,"areaCodeList")}},model:{value:t.areaCodeList,callback:function(e){t.areaCodeList=e},expression:"areaCodeList"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMoreArea,expression:"loadMoreArea"}],staticClass:"list-uploader",attrs:{"infinite-scroll-delay":"500"}},t._l(t.listArea,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)])],1)],1),a("el-col",{staticClass:"float-right",attrs:{span:10}},[a("label",{staticClass:"title-label"},[t._v("Nhóm sản phẩm ")]),a("el-form-item",{attrs:{prop:"productCategoryCodeList"}},[a("el-select",{staticClass:"form-control",attrs:{filterable:"",multiple:"",placeholder:"Chọn nhóm sản phẩm"},on:{change:function(e){return t.selectEmulationChange(e,"productCategoryCodeList")}},model:{value:t.productCategoryCodeList,callback:function(e){t.productCategoryCodeList=e},expression:"productCategoryCodeList"}},t._l(t.productCategory,(function(t){return a("el-option",{key:t.id,attrs:{label:t.categoryCode+" - "+t.categoryName,value:t.categoryCode}})})),1)],1)],1)],1),a("el-row",{staticClass:"row"},[a("el-col",{attrs:{span:10}},[a("label",{staticClass:"title-label"},[t._v(" Chi nhánh ")]),a("el-form-item",{attrs:{prop:"branchCodeList"}},[a("el-select",{staticClass:"form-control",attrs:{remote:"","remote-method":t.remoteBranch,filterable:"",multiple:"",placeholder:"Chọn chi nhánh"},on:{change:function(e){return t.selectEmulationChange(e,"branchCodeList")}},model:{value:t.branchCodeList,callback:function(e){t.branchCodeList=e},expression:"branchCodeList"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMoreBranch,expression:"loadMoreBranch"}],staticClass:"list-uploader",attrs:{"infinite-scroll-delay":"500"}},t._l(t.listBranch,(function(t){return a("el-option",{key:t.id,attrs:{label:t.locationCode+" - "+t.name,value:t.id}})})),1)])],1)],1),a("el-col",{staticClass:"float-right",attrs:{span:10}},[a("label",{staticClass:"title-label"},[t._v(" Phân loại KH ")]),a("el-form-item",{attrs:{prop:"customerTypeList"}},[a("el-select",{staticClass:"form-control",attrs:{filterable:"",multiple:"",placeholder:"Chọn phân loại KH"},on:{change:function(e){return t.selectEmulationChange(e,"customerTypeList")}},model:{value:t.customerTypeList,callback:function(e){t.customerTypeList=e},expression:"customerTypeList"}},t._l(t.listRelationship,(function(e){return a("el-option",{key:e.id,attrs:{value:e.code,label:t.getRelationship(e.code)}})})),1)],1)],1)],1),a("el-row",{staticClass:"row"},[a("el-col",{attrs:{span:10}},[a("label",{staticClass:"title-label"},[t._v(" Đơn vị kinh doanh ")]),a("el-form-item",{attrs:{prop:"transactionOfficeCodeList"}},[a("el-select",{staticClass:"form-control",attrs:{remote:"","remote-method":t.remoteTrans,filterable:"",multiple:"",placeholder:"Chọn đơn vị kinh doanh"},on:{change:function(e){return t.selectEmulationChange(e,"transactionOfficeCodeList")}},model:{value:t.transactionOfficeCodeList,callback:function(e){t.transactionOfficeCodeList=e},expression:"transactionOfficeCodeList"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMoreTrans,expression:"loadMoreTrans"}],staticClass:"list-uploader",attrs:{"infinite-scroll-delay":"500"}},t._l(t.listTrans,(function(t){return a("el-option",{key:t.id,attrs:{label:t.locationCode+" - "+t.name,value:t.id}})})),1)])],1)],1)],1)],1),a("fieldset",[a("div",{staticClass:"title"},[t._v("Điều kiện áp dụng "),a("i",{staticClass:"el-icon-caret-bottom"})]),a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"float-right",attrs:{span:24}},[a("label",{staticClass:"title-label"},[t._v(" Loại CTTĐ ")]),a("div",{staticClass:"form-control flex jc-space-between"},[a("el-form-item",{attrs:{prop:"criteriaObject"}},t._l(t.typeCriteriaObject,(function(e){return a("el-radio",{key:e.id,staticClass:"radio-control",attrs:{label:e.code},on:{change:function(e){return t.valueEmulationChange(e,"criteriaObject")}},model:{value:t.emulationProgram.criteriaObject,callback:function(e){t.$set(t.emulationProgram,"criteriaObject",e)},expression:"emulationProgram.criteriaObject"}},[t._v(" "+t._s(t.$t("program.criteriaObject."+e.code))+" ")])})),1)],1)])],1),a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"float-right",attrs:{span:24}},[a("label",{staticClass:"title-label"},[t._v(" Tính trên ")]),a("div",{staticClass:"form-control flex jc-space-between"},[a("el-form-item",{attrs:{prop:"criteriaType"}},t._l(t.typeCriteriaType,(function(e){return a("el-radio",{key:e.id,staticClass:"radio-control",attrs:{label:e.code},on:{change:function(e){return t.valueEmulationChange(e,"criteriaType")}},model:{value:t.emulationProgram.criteriaType,callback:function(e){t.$set(t.emulationProgram,"criteriaType",e)},expression:"emulationProgram.criteriaType"}},[t._v(" "+t._s(t.$t("program.criteriaType."+e.code))+" ")])})),1)],1)])],1),a("el-row",{staticClass:"row"},[a("el-col",{attrs:{span:5}},[a("label",{staticClass:"title-label"},[t._v(" Điều kiện cần ")]),a("div",{staticClass:"form-control",staticStyle:{"margin-bottom":"22px"}},[a("el-select",{staticClass:"form-control",attrs:{placeholder:"Chọn điều kiện cần"},on:{change:t.kpiValueSelectChange},model:{value:t.kpiValueSelect,callback:function(e){t.kpiValueSelect=e},expression:"kpiValueSelect"}},t._l(t.typeApplyType,(function(e){return a("el-option",{key:e.id,attrs:{value:e.value,label:t.$t("program.applyType."+e.code)}})})),1)],1)]),t.showKpiValue?a("el-col",{attrs:{span:1}},[a("div",{staticClass:"form-control",staticStyle:{"padding-top":"34px"}},[a("span",{staticStyle:{"margin-left":"10px","font-weight":"700"}},[t._v(">=")])])]):t._e(),t.showKpiValue?a("el-col",{attrs:{span:4}},[a("div",{staticClass:"form-control",staticStyle:{"margin-top":"24px !important"}},[a("el-form-item",{attrs:{prop:"kpiValueFrom"}},[a("el-input",{staticClass:"form-control",attrs:{placeholder:"Tỷ lệ",maxlength:"5"},nativeOn:{keypress:function(e){return t.onlyNumberFloat.apply(null,arguments)}},model:{value:t.emulationProgram.kpiValueFrom,callback:function(e){t.$set(t.emulationProgram,"kpiValueFrom",e)},expression:"emulationProgram.kpiValueFrom"}},[a("template",{slot:"append"},[t._v("%")])],2)],1)],1)]):t._e()],1),a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"float-right",attrs:{span:24}},[a("label",{staticClass:"title-label"},[t._v(" Áp dụng theo ")]),a("div",{staticClass:"form-control flex jc-space-between"},[a("el-form-item",{attrs:{prop:"applyContractType"}},[a("el-checkbox-group",{on:{change:function(e){return t.selectEmulationChange(e,"applyContractType")}},model:{value:t.applyContractType,callback:function(e){t.applyContractType=e},expression:"applyContractType"}},t._l(t.typeApplyFee,(function(e){return a("el-checkbox",{key:e.id,attrs:{label:e.code}},[t._v(t._s(t.$t("program.applyFeeType."+e.code)))])})),1)],1)],1)])],1),a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"float-right",attrs:{span:24}},[a("label",{staticClass:"title-label"},[t._v(" Hình thức hợp đồng ")]),a("div",{staticClass:"form-control flex jc-space-between"},[a("el-form-item",{attrs:{prop:"customerChannelList"}},[a("el-checkbox-group",{on:{change:function(e){return t.selectEmulationChange(e,"customerChannelList")}},model:{value:t.customerChannelList,callback:function(e){t.customerChannelList=e},expression:"customerChannelList"}},t._l(t.typeCustomerChannel,(function(e){return a("el-checkbox",{key:e.id,attrs:{label:e.code}},[t._v(t._s(t.$t("program.customerChannel."+e.code)))])})),1)],1)],1)])],1),a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"float-right",attrs:{span:24}},[a("label",{staticClass:"title-label"},[t._v(" Loại hỗ trợ ")]),a("div",{staticClass:"form-control flex jc-space-between"},[a("el-form-item",{attrs:{prop:"bonusType"}},t._l(t.typeBonusType,(function(e){return a("el-radio",{key:e.id,staticClass:"radio-control",attrs:{label:e.code},on:{change:function(e){return t.valueEmulationChange(e,"bonusType")}},model:{value:t.emulationProgram.bonusType,callback:function(e){t.$set(t.emulationProgram,"bonusType",e)},expression:"emulationProgram.bonusType"}},[t._v(" "+t._s(t.$t("program.bonusType."+e.code))+" ")])})),1)],1)])],1)],1),a("fieldset",{staticStyle:{"margin-bottom":"0"}},[a("div",{staticClass:"title"},[t._v("Giải thưởng "),a("i",{staticClass:"el-icon-caret-bottom"})]),a("el-row",{staticClass:"row"},[a("el-col",{attrs:{span:7}},[a("label",{staticClass:"title-label"},[t._v(" Điều kiện nhận thưởng ")]),a("div",{staticClass:"form-control",staticStyle:{margin:"15px 0"}},[a("el-radio",{staticClass:"radio-control",attrs:{label:"1"},model:{value:t.rdBonus,callback:function(e){t.rdBonus=e},expression:"rdBonus"}},[t._v("Đủ điều kiện")]),a("el-radio",{staticClass:"radio-control",attrs:{label:"2"},model:{value:t.rdBonus,callback:function(e){t.rdBonus=e},expression:"rdBonus"}},[t._v("Top cao nhất")])],1)]),t.showCriteriaTop?a("el-col",{attrs:{span:4}},[a("div",{staticClass:"form-control",staticStyle:{"margin-top":"11px !important"}},[a("el-form-item",{attrs:{prop:"criteriaTop"}},[a("el-input",{staticClass:"form-control rank",attrs:{size:"small",placeholder:"Thứ hạng",maxlength:2},on:{blur:t.criteriaTopBlur},nativeOn:{keypress:function(e){return t.onlyNumber.apply(null,arguments)}},model:{value:t.emulationProgram.criteriaTop,callback:function(e){t.$set(t.emulationProgram,"criteriaTop",e)},expression:"emulationProgram.criteriaTop"}},[a("template",{slot:"prepend"},[t._v("Top")])],2)],1)],1)]):t._e()],1),a("el-row",{staticClass:"row"},[a("el-form",{ref:"formRule",attrs:{model:t.formEmulationRule,rules:t.formEmulationRule.rules}},[a("base-table",{attrs:{data:t.formEmulationRule.dataEmulationRule,showPagination:!1}},[a("template",{slot:"header"}),a("template",{slot:"append"},[a("div",{attrs:{slot:"append"},slot:"append"},[a("div",{staticClass:"append-btn"},[a("div",{staticClass:"icon-btn",on:{click:t.handleAddRule}},[a("el-button",{staticClass:"is-small btn-hyperlink is-dashed",attrs:{icon:"el-icon-plus icon-hyper",circle:""}}),a("span",{staticClass:"is-hyperlink"},[t._v("Thêm mức")])],1)])])]),a("el-table-column",{attrs:{type:"index",label:"#",width:"61",align:"center"}}),a("el-table-column",{attrs:{prop:"fromValue",label:t.titleBonus,width:"250",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form-item",{staticClass:"form-item-100",attrs:{prop:"dataEmulationRule."+e.$index+".fromValue",rules:t.formEmulationRule.rules.fromValue}},[a("el-input",{staticClass:"remove-border input-table",attrs:{size:"small",maxlength:"20",placeholder:t.titleBonus},nativeOn:{keypress:function(e){return t.onlyNumber.apply(null,arguments)},keyup:function(a){return t.numberFormat(a,e.$index,"fromValue")}},model:{value:e.row.fromValue,callback:function(a){t.$set(e.row,"fromValue",a)},expression:"scope.row.fromValue"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"bonusAmount",width:"250",label:"Mức hỗ trợ ",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form-item",{staticClass:"form-item-100",attrs:{prop:"dataEmulationRule."+e.$index+".bonusAmount",rules:t.formEmulationRule.rules.bonusAmount}},[a("el-input",{staticClass:"remove-border input-table",attrs:{size:"small",maxlength:t.maxLengthBonus,placeholder:"Mức hỗ trợ"},nativeOn:{keypress:function(e){return t.pressBonusAmount.apply(null,arguments)},keyup:function(a){return t.keyupBonusAmount(a,e.$index)}},model:{value:e.row.bonusAmount,callback:function(a){t.$set(e.row,"bonusAmount",a)},expression:"scope.row.bonusAmount"}},[a("template",{slot:"append"},[t._v(t._s(t.txtBonus))])],2)],1)]}}])}),a("el-table-column",{attrs:{label:"Thao Tác",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"table-action-list"},[e.$index>0?a("base-icon",{staticClass:"action-item",attrs:{slot:"reference",icon:"remove"},nativeOn:{click:function(a){return t.handleDeleteRule(e.row,"more")}},slot:"reference"}):t._e()],1)]}}])})],2)],1)],1)],1)]),a("template",{slot:"footer"},[a("div",{staticClass:"footer-action flex jc-space-between"},[a("div",["edit"===t.isAction?a("el-button",{staticClass:"be-btn-delete",on:{click:t.handleDelete}},[t._v("Xoá")]):t._e(),a("el-button",{on:{click:t.handleReset}},[t._v("Làm lại")]),a("el-button",{staticClass:"be-btn-danger",on:{click:t.handleSave}},[t._v("Lưu")])],1)])])],2)},S=[],B=a("c964"),N=a("d0ff"),D=(a("96cf"),a("99af"),a("caad"),a("2532"),a("d81d"),a("d3b7"),a("25f0"),a("a434"),a("9f13")),$=Object(f["a"])("beUser"),M=function(t){Object(n["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.emulationProgram={criteriaTop:""},t.formEmulationRule={rules:{fromValue:[{required:!0,message:"Không được để trống",trigger:"blur"}],toValue:[{required:!0,message:"Không được để trống",trigger:"blur"}],bonusAmount:[{required:!0,message:"Nhập mức hỗ trợ",trigger:"blur"}]},dataEmulationRule:[{}]},t.rules={programSource:[{required:!0,message:"Chọn nguồn chương trình",trigger:"blur"}],programCode:[{required:!0,message:"Mã chương trình không được để trống",trigger:"blur"}],programName:[{required:!0,message:"Tên chương trình không được để trống",trigger:"blur"}],fromDate:[{required:!0,message:"Chọn Ngày thực hiện",trigger:"blur"}],toDate:[{required:!0,message:"Chọn Ngày kết thúc",trigger:"blur"}],expireDate:[{required:!0,message:"Chọn Ngày chốt",trigger:"blur"}],applyLevel:[{required:!0,message:"Chọn đối tượng áp dụng",trigger:"blur"}],applyContractType:[{required:!0,validator:t.customValidator,message:"Chọn áp dụng theo loại hợp đồng",trigger:"blur"}],areaCodeList:[{validator:t.validatorLocation,message:"Chọn khu vực",trigger:"blur"}],productCategoryCodeList:[{required:!0,validator:t.customValidator,message:"Chọn sản phẩm",trigger:"blur"}],branchCodeList:[{validator:t.validatorLocation,message:"Chọn chi nhánh",trigger:"blur"}],transactionOfficeCodeList:[{validator:t.validatorLocation,message:"Chọn đơn vị kinh doanh",trigger:"blur"}],criteriaObject:[{required:!0,message:"Chọn chương trình thi đua",trigger:"blur"}],criteriaType:[{required:!0,message:"Chọn cách tính",trigger:"blur"}],customerChannelList:[{required:!0,validator:t.customValidator,message:"Chọn hình thức hợp đồng",trigger:"blur"}],bonusType:[{required:!0,message:"Chọn loại hỗ trợ",trigger:"blur"}],kpiValueFrom:[{required:!0,message:"Chọn tỉ lệ hoàn thành",trigger:"blur"}],criteriaTop:[{required:!0,message:"Nhập tổng thứ hạng",trigger:"blur"}]},t.typeCriteriaObject=[],t.typeCriteriaType=[],t.typeApplyType=[],t.typeBonusType=[],t.typeCustomerChannel=[],t.payroll=null,t.listArea=[],t.listBranch=[],t.listTrans=[],t.listRelationship=[],t.applyContractType=[],t.customerChannelList=[],t.areaCodeList=[],t.branchCodeList=[],t.customerTypeList=[],t.productCategoryCodeList=[],t.transactionOfficeCodeList=[],t.rdBonus="1",t.titleBonus="Giá trị từ",t.kpiValueSelect="1",t.showKpiValue=!1,t.showCriteriaTop=!1,t.txtBonus="",t.maxLengthBonus=20,t.paramArea={search:"",type:1,districtId:0,i:0,ps:20},t.paramBranch={search:"",type:2,districtId:0,i:0,ps:20},t.paramTrans={search:"",type:3,districtId:0,i:0,ps:20},t.objError={programCode:!1,programName:!1},t}return Object(l["a"])(a,[{key:"rdBonusChange",value:function(t){"1"===t?(this.showCriteriaTop=!1,this.titleBonus="Giá trị từ"):(this.showCriteriaTop=!0,this.titleBonus="Thứ hạng")}},{key:"created",value:function(){var t,e,a=null===(t=this.user)||void 0===t||null===(e=t.districts)||void 0===e?void 0:e[0].id;this.paramArea.districtId=a,this.paramBranch.districtId=a,this.paramTrans.districtId=a,this.apiUser=Object(h["a"])("user",{districtId:a}),this.apiParam=Object(h["a"])("param",{districtId:a}),this.apiProgram=Object(h["a"])("program",{districtId:a})}},{key:"handleChangeProgramCode",value:function(t){this.objError.programCode=t.length>100}},{key:"handleChangeProgramName",value:function(t){this.objError.programName=t.length>250}},{key:"initData",value:function(){var t=this;if(this.paramArea.search="",this.paramArea.i=0,this.getAreaList(this.paramArea).then((function(e){t.listArea=e.data})),"add"===this.isAction)this.paramBranch.search="",this.paramBranch.i=0,this.getAreaList(this.paramBranch).then((function(e){t.listBranch=e.data})),this.paramTrans.search="",this.paramTrans.i=0,this.getAreaList(this.paramTrans).then((function(e){t.listTrans=e.data}));else{this.paramBranch.search="",this.paramBranch.i=0;var e=Object(o["a"])(Object(o["a"])({},this.paramBranch),{},{ids:this.emulationProgram.branchCodeList});this.getAreaList(e).then((function(e){t.listBranch=e.data,t.getAreaList(t.paramBranch).then((function(e){t.listBranch=[].concat(Object(N["a"])(t.listBranch),Object(N["a"])(e.data))}))})),this.paramTrans.search="",this.paramTrans.i=0;var a=Object(o["a"])(Object(o["a"])({},this.paramTrans),{},{ids:this.emulationProgram.transactionOfficeCodeList});this.getAreaList(a).then((function(e){t.listTrans=e.data,t.getAreaList(t.paramTrans).then((function(e){t.listTrans=[].concat(Object(N["a"])(t.listTrans),Object(N["a"])(e.data))}))}))}this.apiParam.getParamRelationship().then((function(e){return t.listRelationship=e.data}))}},{key:"handleOpen",value:function(){var t=this;this.apiParam.getEmulationCriteriaObject().then((function(e){t.typeCriteriaObject=e.data})).catch((function(t){console.log(t)})),this.apiParam.getEmulationCriteriaType().then((function(e){t.typeCriteriaType=e.data})).catch((function(t){console.log(t)})),this.apiParam.getEmulationApplyType().then((function(e){t.typeApplyType=e.data})).catch((function(t){console.log(t)})),this.apiParam.getEmulationBonusType().then((function(e){t.typeBonusType=e.data})).catch((function(t){console.log(t)})),this.apiParam.getEmulationCustomerChannel().then((function(e){t.typeCustomerChannel=e.data})).catch((function(t){console.log(t)})),this.handleReset();var e=this.$refs;this.emulationProgram=new Proxy(this.emulationProgram,{set:function(t,a,r){t[a]=r;var i=e.formInput;return i.validateField(a),!0}})}},{key:"handleClose",value:function(){}},{key:"validateForm",value:function(){var t=this.$refs.formInput,e=!1,a=!1;t.validate((function(t){e=t}));var r=this.$refs.formRule;return r.validate((function(t){a=t})),e&&a}},{key:"handleSave",value:function(){var t=this,e=this.validateForm();if(!e||this.objError.programCode||this.objError.programName)this.$message.error("Nhập đầy đủ thông tin bắt buộc!");else{var a=this.emulationProgram;a.payroll&&(a.payrollMonth=a.payroll.getMonth()+1,a.payrollYear=a.payroll.getFullYear()),this.showKpiValue||(a.kpiValueFrom=""),this.applyContractType.includes("FYP")?a.isNewContract="1":a.isNewContract="",this.applyContractType.includes("RYP")&&this.applyContractType.includes("RFYP")?a.isRenewContract="1,2":this.applyContractType.includes("RYP")?a.isRenewContract="1":this.applyContractType.includes("RFYP")?a.isRenewContract="2":a.isRenewContract="",this.applyContractType.includes("ARPS")?a.isExpireContract="1":a.isExpireContract="",a.rules=this.formEmulationRule.dataEmulationRule,this.emulationProgram.rules=this.emulationProgram.rules.map((function(t){var e=t.fromValue.toString(),a=t.bonusAmount.toString();return t.fromValue=e.replaceAll(",",""),t.bonusAmount=a.replaceAll(",",""),t})),"add"===this.isAction||"copy"===this.isAction?(delete a.id,a.approveStatus="1",this.apiProgram.saveProgram(a).then((function(e){t.setOpenPopup({popupName:"program-create",isOpen:!1}),t.$message.success("Thêm dữ liệu thành công!"),t.$emit("save",e)})).catch((function(e){t.$message.error(e.message)}))):a.id&&this.apiProgram.saveProgram(a).then((function(e){t.setOpenPopup({popupName:"program-create",isOpen:!1}),t.$message.success("Cập nhật dữ liệu thành công!"),t.$emit("save",e)})).catch((function(e){t.$message.error(e.message)}))}}},{key:"handleDelete",value:function(){var t=this;this.setOpenPopup({popupName:"program-create",isOpen:!1}),setTimeout((function(){t.$emit("delete")}),500)}},{key:"handleReset",value:function(){"add"===this.isAction?(this.objError.programCode=!1,this.objError.programName=!1,this.handleResetNew()):this.handleResetEdit(),this.$refs.formInput&&this.$refs.formInput.clearValidate(),this.$refs.formRule&&this.$refs.formRule.clearValidate(),this.initData()}},{key:"handleResetNew",value:function(){this.emulationProgram={},this.formEmulationRule.dataEmulationRule=[{}],this.applyContractType=[],this.customerChannelList=[],this.areaCodeList=[],this.branchCodeList=[],this.customerTypeList=[],this.productCategoryCodeList=[],this.transactionOfficeCodeList=[]}},{key:"handleResetEdit",value:function(){var t=this;if(this.emulationProgram=Object(d["clone"])(this.emulationProgramEdit),this.formEmulationRule.dataEmulationRule=this.emulationProgram.rules,Object(d["forEach"])(this.formEmulationRule.dataEmulationRule,(function(e){var a,r=e.fromValue;return e.fromValue=null===(a=t.$options.filters)||void 0===a?void 0:a.formatNumber(parseInt(r)),e})),this.emulationProgram.fromDate=new Date(this.emulationProgram.fromDate),this.emulationProgram.toDate=new Date(this.emulationProgram.toDate),this.emulationProgram.expireDate=new Date(this.emulationProgram.expireDate),this.emulationProgram.payrollMonth&&this.emulationProgram.payrollYear){var e=new Date;e.setMonth(this.emulationProgram.payrollMonth-1),e.setFullYear(this.emulationProgram.payrollYear),this.payroll=e,this.emulationProgram.payroll=e}this.applyContractType=[],"1"===this.emulationProgram.isNewContract&&this.applyContractType.push("FYP"),"1,2"===this.emulationProgram.isRenewContract?(this.applyContractType.push("RYP"),this.applyContractType.push("RFYP")):"1"===this.emulationProgram.isRenewContract?this.applyContractType.push("RYP"):"2"===this.emulationProgram.isRenewContract&&this.applyContractType.push("RFYP"),"1"===this.emulationProgram.isExpireContract&&this.applyContractType.push("ARPS"),this.emulationProgram.applyContractType=this.applyContractType.join(","),this.customerChannelList=this.emulationProgram.customerChannelList.split(","),this.emulationProgram.areaCodeList&&this.emulationProgram.areaCodeList.length>0&&(this.areaCodeList=this.emulationProgram.areaCodeList.split(",").map((function(t){return parseInt(t)}))),this.emulationProgram.branchCodeList&&this.emulationProgram.branchCodeList.length>0&&(this.branchCodeList=this.emulationProgram.branchCodeList.split(",").map((function(t){return parseInt(t)}))),this.customerTypeList=this.emulationProgram.customerTypeList.split(","),this.emulationProgram.productCategoryCodeList&&this.emulationProgram.productCategoryCodeList.length>0&&(this.productCategoryCodeList=this.emulationProgram.productCategoryCodeList.split(",")),this.emulationProgram.transactionOfficeCodeList&&this.emulationProgram.transactionOfficeCodeList.length>0&&(this.transactionOfficeCodeList=this.emulationProgram.transactionOfficeCodeList.split(",").map((function(t){return parseInt(t)})));var a=parseInt(this.emulationProgram.kpiValueFrom);a&&a>0?(this.kpiValueSelect="2",this.showKpiValue=!0):(this.kpiValueSelect="1",this.showKpiValue=!1);var r=parseInt(this.emulationProgram.criteriaTop);this.rdBonus=r&&r>0?"2":"1";var i=this.emulationProgram.bonusType;"PERCENT"===i?(this.txtBonus="(%)",this.maxLengthBonus=5):"VOUCHER"===i?(this.txtBonus="(quà tặng)",this.maxLengthBonus=20):(this.txtBonus="",this.maxLengthBonus=20)}},{key:"pickerToday",get:function(){var t=new Date;return t.setTime(t.getTime()-864e5),{disabledDate:function(e){return e.getTime()<t}}}},{key:"pickerFromDate",get:function(){var t=this,e=this.emulationProgram.fromDate;return{disabledDate:function(a){return t.disabledDate(a,e)}}}},{key:"disabledDate",value:function(t,e){if(e)return t.getTime()<e+864e5}},{key:"remoteArea",value:function(t){var e=this;this.paramArea.search=t,this.paramArea.i=0,this.getAreaList(this.paramArea).then((function(t){e.listArea=t.data}))}},{key:"loadMoreArea",value:function(){var t=this;this.paramArea.i+=this.paramArea.ps,this.getAreaList(this.paramArea).then((function(e){t.listArea=[].concat(Object(N["a"])(t.listArea),Object(N["a"])(e.data))}))}},{key:"remoteBranch",value:function(t){var e=this;this.paramBranch.search=t,this.paramBranch.i=0,this.getAreaList(this.paramBranch).then((function(t){e.listBranch=t.data}))}},{key:"loadMoreBranch",value:function(){var t=this;this.paramBranch.i+=this.paramBranch.ps,this.getAreaList(this.paramBranch).then((function(e){t.listBranch=[].concat(Object(N["a"])(t.listBranch),Object(N["a"])(e.data))}))}},{key:"remoteTrans",value:function(t){var e=this;this.paramTrans.search=t,this.paramTrans.i=0,this.getAreaList(this.paramTrans).then((function(t){e.listTrans=t.data}))}},{key:"loadMoreTrans",value:function(){var t=this;this.paramTrans.i+=this.paramTrans.ps,this.getAreaList(this.paramTrans).then((function(e){t.listTrans=[].concat(Object(N["a"])(t.listTrans),Object(N["a"])(e.data))}))}},{key:"getAreaList",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.apiUser.getAreaList(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getRelationship",value:function(t){return D["RELATIONSHIP_TYPE"][t]}},{key:"kpiValueSelectChange",value:function(t){this.showKpiValue=!(!t||"2"!=t)}},{key:"valueEmulationChange",value:function(t,e){"bonusType"===e&&("PERCENT"===t?(this.txtBonus="(%)",this.maxLengthBonus=5):"VOUCHER"===t?(this.txtBonus="(quà tặng)",this.maxLengthBonus=20):(this.txtBonus="",this.maxLengthBonus=20),this.formEmulationRule.dataEmulationRule.map((function(t){return t.bonusAmount&&t.bonusAmount.length>0&&(t.bonusAmount=""),t}))),this.emulationProgram[e]=t}},{key:"selectEmulationChange",value:function(t,e){t.length>0?this.emulationProgram[e]=t.join(","):this.emulationProgram[e]="",this.validateForm()}},{key:"customerChannelChange",value:function(t){t.length>0?this.emulationProgram.customerChannelList=t.join(","):(this.emulationProgram.customerChannelList="",this.validateForm())}},{key:"customValidator",value:function(t,e,a){var r=a,i=t.field;this.emulationProgram[i]?r():r(new Error("Không được để trống"))}},{key:"validatorLocation",value:function(t,e,a){var r=a;this.emulationProgram.areaCodeList||this.emulationProgram.branchCodeList||this.emulationProgram.transactionOfficeCodeList?r():r(new Error("Không được để trống"))}},{key:"handleAddRule",value:function(){var t={};this.formEmulationRule.dataEmulationRule.push(t),this.showCriteriaTop&&(this.emulationProgram.criteriaTop=this.formEmulationRule.dataEmulationRule.length.toString())}},{key:"handleDeleteRule",value:function(t){var e=this.formEmulationRule.dataEmulationRule.indexOf(t);this.formEmulationRule.dataEmulationRule.splice(e,1),this.showCriteriaTop&&(this.emulationProgram.criteriaTop=this.formEmulationRule.dataEmulationRule.length.toString())}},{key:"onlyNumber",value:function(t){var e=t.keyCode?t.keyCode:t.which;(e<48||e>57)&&t.preventDefault()}},{key:"onlyNumberFloat",value:function(t){var e=t.keyCode?t.keyCode:t.which;if((e<48||e>57)&&46!==e)t.preventDefault();else if(46==e){var a=t.target,r=a.value;r.length>0?r.includes(".")&&t.preventDefault():t.preventDefault()}}},{key:"pressBonusAmount",value:function(t){"PERCENT"===this.emulationProgram.bonusType?this.onlyNumberFloat(t):this.onlyNumber(t)}},{key:"keyupBonusAmount",value:function(t,e){if("PERCENT"!==this.emulationProgram.bonusType){var a,r=t,i=r.target.value;if(i.length>0)i=i.replaceAll(",",""),i=null===(a=this.$options.filters)||void 0===a?void 0:a.formatNumber(parseInt(i)),r.target.value=i,this.formEmulationRule.dataEmulationRule[e].bonusAmount=i}}},{key:"criteriaTopBlur",value:function(t){var e=t,a=e.target.value;if(a.length>0)if(a=parseInt(a),a&&a>0){this.formEmulationRule.dataEmulationRule=[];for(var r=0;r<a;r++){var i={};i.fromValue=r+1,this.formEmulationRule.dataEmulationRule.push(i)}}else a="";else a="";e.target.value=a,this.emulationProgram.criteriaTop=a}},{key:"numberFormat",value:function(t,e,a){var r,i=t,o=i.target.value;o.length>0&&(o=o.replaceAll(",",""),o=null===(r=this.$options.filters)||void 0===r?void 0:r.formatNumber(parseInt(o)),i.target.value=o,this.formEmulationRule.dataEmulationRule[e][a]=o)}}]),a}(Object(m["b"])(p["a"]));Object(u["a"])([$.State("user")],M.prototype,"user",void 0),Object(u["a"])([Object(m["c"])({required:!1,type:Array,default:[]})],M.prototype,"typeProgramSource",void 0),Object(u["a"])([Object(m["c"])({required:!1,type:Array,default:[]})],M.prototype,"typeApplyLevel",void 0),Object(u["a"])([Object(m["c"])({required:!1,type:Array,default:[]})],M.prototype,"typeApplyFee",void 0),Object(u["a"])([Object(m["c"])({required:!1,type:Array,default:[]})],M.prototype,"productCategory",void 0),Object(u["a"])([Object(m["c"])({required:!1,type:String,default:"add"})],M.prototype,"isAction",void 0),Object(u["a"])([Object(m["c"])({required:!1,type:Object,default:{}})],M.prototype,"emulationProgramEdit",void 0),Object(u["a"])([Object(m["e"])("rdBonus")],M.prototype,"rdBonusChange",null),M=Object(u["a"])([Object(m["a"])({components:{}})],M);var F=M,I=F,V=(a("524a"),Object(k["a"])(I,R,S,!1,null,"0dd0e9e0",null)),q=V.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-popup",{staticClass:"popup-valid p-background-default popup-no-footer",attrs:{name:"program-detail",open:t.handleOpen,close:t.handleClose,width:"980px",hiddenFooter:!1,closeClickModal:!1}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v(" Chi tiết chương trình thi đua "),"1"==t.emulationProgram.approveStatus?a("span",{staticClass:"action-edit",on:{click:t.editDetailProgram}},[a("base-icon",{staticClass:"action-item",attrs:{slot:"reference",icon:"action"},slot:"reference"}),t._v("Chỉnh sửa")],1):t._e()]),a("el-row",{staticClass:"row"},[a("h2",{staticClass:"h2-detail-title"},[t._v(t._s(t.emulationProgram.programName))]),a("span",{},[t._v(t._s(t.emulationProgram.programCode))]),a("div",{staticClass:"icon-dot"},[a("base-icon",{staticClass:"icon",attrs:{icon:"Dot"}})],1),a("span",{staticClass:"description"},[t._v(" Từ "+t._s(t._f("formatDateTime")(t.emulationProgram.fromDate))+" đến "+t._s(t._f("formatDateTime")(t.emulationProgram.toDate)))]),t.emulationProgram.description?a("p",{staticClass:"description"},[t._v(t._s(t.emulationProgram.description))]):t._e()]),a("el-tabs",{staticClass:"tabs",attrs:{type:"card"},on:{"tab-click":t.tabsEmulationClick},model:{value:t.tabSelect,callback:function(e){t.tabSelect=e},expression:"tabSelect"}},[a("el-tab-pane",{attrs:{label:"Thông tin chi tiết",name:"detail"}},[a("el-row",{staticClass:"row row-detail"},[a("el-col",{attrs:{span:11}},[a("label",{staticClass:"title-label type-dot"},[t._v(" Nguồn chương trình: "+t._s(t.$t("program.programSource."+t.emulationProgram.programSource))+" ")])]),a("el-col",{staticClass:"col-right",attrs:{span:11}},[a("label",{staticClass:"title-label type-dot"},[t._v(" Ngày chốt: "+t._s(t._f("formatDateTime")(t.emulationProgram.expireDate))+" ")])])],1),a("el-row",{staticClass:"row row-detail"},[a("el-col",{attrs:{span:11}},[a("label",{staticClass:"title-label type-dot"},[t._v(" Thời gian thực hiện: "+t._s(t._f("formatDateTime")(t.emulationProgram.fromDate))+" - "+t._s(t._f("formatDateTime")(t.emulationProgram.toDate))+" ")])]),a("el-col",{staticClass:"col-right",attrs:{span:11}},[a("label",{staticClass:"title-label type-dot"},[t._v(" Tháng chi trả dự kiến: "),t.emulationProgram.payrollMonth?a("span",[t._v("Tháng "+t._s(t.emulationProgram.payrollMonth)+"/"+t._s(t.emulationProgram.payrollYear)+" ")]):t._e()])])],1),a("div",{staticClass:"title-detail"},[t._v("Đối tượng áp dụng "),a("i",{staticClass:"el-icon-caret-bottom"})]),a("el-row",{staticClass:"row row-detail"},[a("el-col",{attrs:{span:11}},[a("label",{staticClass:"title-label type-dot"},[t._v(" Đối tượng áp dụng: "+t._s(t.$t("program.applyLevel."+t.emulationProgram.applyLevel))+" ")])]),a("el-col",{staticClass:"col-right",attrs:{span:11}},[a("label",{staticClass:"title-label type-dot"},[t._v(" Nhóm sản phẩm: "+t._s(t.emulationProgram.productCategoryCodeList)+" ")])])],1),a("el-row",{staticClass:"row row-detail"},[a("el-col",{attrs:{span:11}},[a("label",{staticClass:"title-label type-dot"},[t._v(" Khu vực: "+t._s(t.areaCodeList)+" ")])]),a("el-col",{staticClass:"col-right",attrs:{span:11}},[a("label",{staticClass:"title-label type-dot"},[t._v(" Phân loại KH: "+t._s(t.getRelationship(t.emulationProgram.customerTypeList))+" ")])])],1),a("el-row",{staticClass:"row row-detail"},[a("el-col",{attrs:{span:11}},[a("label",{staticClass:"title-label type-dot"},[t._v(" Chi nhánh: "+t._s(t.branchCodeList)+" ")])]),a("el-col",{staticClass:"col-right",attrs:{span:11}},[a("label",{staticClass:"title-label type-dot"},[t._v(" Nhóm chức danh: "+t._s(t.emulationProgram.memberGroupList)+" ")])])],1),a("el-row",{staticClass:"row row-detail"},[a("el-col",{staticClass:"type-dot",attrs:{span:11}},[a("label",{staticClass:"title-label"},[t._v(" Đơn vị kinh doanh: "+t._s(t.transactionOfficeCodeList)+" ")])])],1),a("div",{staticClass:"title-detail"},[t._v("Điều kiện áp dụng "),a("i",{staticClass:"el-icon-caret-bottom"})]),a("el-row",{staticClass:"row row-detail"},[a("el-col",{attrs:{span:11}},[a("label",{staticClass:"title-label type-dot"},[t._v(" Loại CTTĐ: "+t._s(t.$t("program.criteriaObject."+t.emulationProgram.criteriaObject))+" ")])]),a("el-col",{staticClass:"col-right",attrs:{span:11}},[a("label",{staticClass:"title-label type-dot"},[t._v(" Áp dụng theo: "+t._s(t.translateStringArray("applyFeeType",t.applyContractType))+" ")])])],1),a("el-row",{staticClass:"row row-detail"},[a("el-col",{attrs:{span:11}},[a("label",{staticClass:"title-label type-dot"},[t._v(" Tính trên: "+t._s(t.$t("program.criteriaType."+t.emulationProgram.criteriaType))+" ")])]),a("el-col",{staticClass:"col-right",attrs:{span:11}},[a("label",{staticClass:"title-label type-dot"},[t._v(" Hình thức hợp đồng: "+t._s(t.translateArray("customerChannel",t.emulationProgram.customerChannelList))+" ")])])],1),a("el-row",{staticClass:"row row-detail"},[a("el-col",{attrs:{span:11}},[a("label",{staticClass:"title-label type-dot"},[t._v(" Điều kiện cần: "+t._s(t.kpiValueText)+" ")])]),a("el-col",{staticClass:"col-right",attrs:{span:11}},[a("label",{staticClass:"title-label type-dot"},[t._v(" Loại hỗ trợ: "+t._s(t.$t("program.bonusType."+t.emulationProgram.bonusType))+" ")])])],1),a("div",{staticClass:"title-detail"},[t._v("Giải thưởng "),a("i",{staticClass:"el-icon-caret-bottom"})]),a("el-row",{staticClass:"row row-detail"},[a("el-col",{attrs:{span:11}},[a("label",{staticClass:"title-label type-dot"},[t._v(" Điều kiện nhận thưởng: "+t._s(t.titleBonusText)+" ")])])],1),a("base-table",{attrs:{data:t.emulationRules,showPagination:!1}},[a("template",{slot:"header"}),a("el-table-column",{attrs:{type:"index",label:"#",width:"61",align:"center"}}),a("el-table-column",{attrs:{prop:"fromValue",width:"250",label:t.titleBonus,align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("formatNumber")(e.row.fromValue))+" "),t.showCriteriaTop?t._e():a("span",[t._v("VNĐ")])]}}])}),a("el-table-column",{attrs:{prop:"bonusAmount",label:"Mức hỗ trợ ",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.getFormatBonus(e.row.bonusAmount))+" "+t._s(t.txtBonus)+" ")]}}])}),a("el-table-column")],2)],1),a("el-tab-pane",{staticClass:"tab-result",attrs:{label:"Kết quả CTTĐ",name:"result"}},[a("base-tree-table",{attrs:{data:t.resultEmulation,isLoading:t.isLoading,table:t.query,showPagination:!0,showSummary:!0,summaryMethod:t.summaryMethod,sumText:"Tổng",paginationInfo:"CBNV"},on:{sizeChange:t.handleSizeChange,currentChange:t.handleCurrentChange}},[a("template",{slot:"header"},[a("div",{staticClass:"header-action be-flex jc-space-between"},[a("div",{staticClass:"aciton-left flex"},[a("search-bar",{ref:"searchFilter",on:{search:t.handleSearch}}),a("el-button",{staticClass:"be-button-unset btn-filter-result",on:{click:t.handleOpentFilter}},[a("base-icon",{attrs:{icon:"filter"}}),t._v(" Bộ lọc ")],1),a("el-dropdown",{staticClass:"import-sort",attrs:{trigger:"click"},on:{command:t.handleCommand}},[a("el-button",{staticClass:"be-button-unset custom-button"},[a("base-icon",{staticClass:"icon",attrs:{icon:"sort"}}),t._v(" Sắp xếp ")],1),a("el-dropdown-menu",{staticClass:"sort-menu-custom",attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.option,(function(e){return a("el-dropdown-item",{key:e.id,class:e.active?"active":null,attrs:{command:e,divided:e.divided}},[a("span",{staticClass:"be-flex"},[a("span",{staticClass:"be-flex-item"},[t._v(" "+t._s(e.name)+" ")])])])})),1)],1)],1),a("div",{staticClass:"action-right flex actions"},[a("el-button",{staticClass:"custom-button",attrs:{loading:t.isExcelLoading},on:{click:function(e){return t.handleExport("xlsx")}}},[a("span",{staticClass:"be-flex align-center"},[a("base-icon",{staticClass:"icon",attrs:{icon:"excel-fullcolor"}}),t._v(" Xuất Excel ")],1)])],1)])]),a("el-table-column",{attrs:{type:"index",index:t.indexMethod,label:"#",width:"61",align:"center"}}),a("el-table-column",{attrs:{label:"Mã ĐVKD ","min-width":"100",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.transactionOfficeCode))])]}}])}),a("el-table-column",{attrs:{label:"Đơn vị kinh doanh ","min-width":"200",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.transactionOfficeName))])]}}])}),a("el-table-column",{attrs:{label:"Mã NV ","min-width":"150",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.memberNo))])]}}])}),a("el-table-column",{attrs:{label:"Tên CBNV ","min-width":"200",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.fullName))])]}}])}),a("el-table-column",{attrs:{label:"Kết quả ","min-width":"150",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t._f("formatNumber")(e.row.resultAmount)))])]}}])}),a("el-table-column",{attrs:{label:"Mức hỗ trợ ","min-width":"150",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t._f("formatNumber")(e.row.bonusAmount))+" "+t._s(t.txtBonus))])]}}])}),a("el-table-column",{attrs:{label:"Thành tiền ","min-width":"150",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t._f("formatNumber")(e.row.emulationAmount)))])]}}])})],2)],1)],1),a("filter-result",{ref:"filterReult",on:{search:t.handleFilter}})],1)},Y=[],z=(a("b0c0"),a("3ca3"),a("ddb0"),a("2b3d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-popup",{staticClass:"popup-valid p-background-default",attrs:{name:"program-result-filter",open:t.handleOpen,close:t.handleClose,width:"772px",top:"15vh",hiddenFooter:!0,closeClickModal:!1}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("Bộ lọc")]),a("fieldset",[a("el-row",{staticClass:"row"},[a("el-col",{attrs:{span:10}},[a("label",{staticClass:"title-label"},[t._v(" Khu vực ")]),a("el-select",{staticClass:"form-control",attrs:{remote:"","remote-method":t.remoteArea,filterable:"",multiple:"",placeholder:"Chọn khu vực"},on:{change:function(e){return t.selectParamChange(e,"areaIdArray")}},model:{value:t.areaCodeList,callback:function(e){t.areaCodeList=e},expression:"areaCodeList"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMoreArea,expression:"loadMoreArea"}],staticClass:"list-uploader",attrs:{"infinite-scroll-delay":"500"}},t._l(t.listArea,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)])],1),a("el-col",{staticClass:"float-right",attrs:{span:12}},[a("label",{staticClass:"title-label"},[t._v(" Kết quả ")]),a("el-row",{staticClass:"flex_line form-control"},[a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:"Từ"},nativeOn:{keypress:function(e){return t.onlyNumber.apply(null,arguments)},keyup:function(e){return t.numberFormat(e,"frmResultAmount")}},model:{value:t.params.frmResultAmount,callback:function(e){t.$set(t.params,"frmResultAmount",e)},expression:"params.frmResultAmount"}})],1),a("span",{staticClass:"dash"},[a("i",{staticClass:"el-icon-minus icon-dash"})]),a("el-col",{staticClass:"float-right",attrs:{span:11}},[a("el-input",{attrs:{placeholder:"Đến"},nativeOn:{keypress:function(e){return t.onlyNumber.apply(null,arguments)},keyup:function(e){return t.numberFormat(e,"toResultAmount")}},model:{value:t.params.toResultAmount,callback:function(e){t.$set(t.params,"toResultAmount",e)},expression:"params.toResultAmount"}})],1)],1)],1)],1),a("el-row",{staticClass:"row"},[a("el-col",{attrs:{span:10}},[a("label",{staticClass:"title-label"},[t._v(" Chi nhánh ")]),a("el-select",{staticClass:"form-control",attrs:{remote:"","remote-method":t.remoteBranch,filterable:"",multiple:"",placeholder:"Chọn chi nhánh"},on:{change:function(e){return t.selectParamChange(e,"branchIdArray")}},model:{value:t.branchCodeList,callback:function(e){t.branchCodeList=e},expression:"branchCodeList"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMoreBranch,expression:"loadMoreBranch"}],staticClass:"list-uploader",attrs:{"infinite-scroll-delay":"500"}},t._l(t.listBranch,(function(t){return a("el-option",{key:t.id,attrs:{label:t.locationCode+" - "+t.name,value:t.id}})})),1)])],1),a("el-col",{staticClass:"float-right",attrs:{span:12}},[a("label",{staticClass:"title-label"},[t._v(" Mức hỗ trợ ")]),a("el-row",{staticClass:"flex_line form-control"},[a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:"Từ"},nativeOn:{keypress:function(e){return t.onlyNumber.apply(null,arguments)},keyup:function(e){return t.numberFormat(e,"frmBonusAmount")}},model:{value:t.params.frmBonusAmount,callback:function(e){t.$set(t.params,"frmBonusAmount",e)},expression:"params.frmBonusAmount"}})],1),a("span",{staticClass:"dash"},[a("i",{staticClass:"el-icon-minus icon-dash"})]),a("el-col",{staticClass:"float-right",attrs:{span:11}},[a("el-input",{attrs:{placeholder:"Đến"},nativeOn:{keypress:function(e){return t.onlyNumber.apply(null,arguments)},keyup:function(e){return t.numberFormat(e,"toBonusAmount")}},model:{value:t.params.toBonusAmount,callback:function(e){t.$set(t.params,"toBonusAmount",e)},expression:"params.toBonusAmount"}})],1)],1)],1)],1),a("el-row",{staticClass:"row"},[a("el-col",{attrs:{span:10}},[a("label",{staticClass:"title-label"},[t._v(" Đơn vị kinh doanh ")]),a("el-select",{staticClass:"form-control",attrs:{remote:"","remote-method":t.remoteTrans,filterable:"",multiple:"",placeholder:"Chọn đơn vị kinh doanh"},on:{change:function(e){return t.selectParamChange(e,"transOfficeIdArray")}},model:{value:t.transactionOfficeCodeList,callback:function(e){t.transactionOfficeCodeList=e},expression:"transactionOfficeCodeList"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMoreTrans,expression:"loadMoreTrans"}],staticClass:"list-uploader",attrs:{"infinite-scroll-delay":"500"}},t._l(t.listTrans,(function(t){return a("el-option",{key:t.id,attrs:{label:t.locationCode+" - "+t.name,value:t.id}})})),1)])],1),a("el-col",{staticClass:"float-right",attrs:{span:12}},[a("label",{staticClass:"title-label"},[t._v(" Thành tiền ")]),a("el-row",{staticClass:"flex_line form-control"},[a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:"Từ"},nativeOn:{keypress:function(e){return t.onlyNumber.apply(null,arguments)},keyup:function(e){return t.numberFormat(e,"frmEmulationAmount")}},model:{value:t.params.frmEmulationAmount,callback:function(e){t.$set(t.params,"frmEmulationAmount",e)},expression:"params.frmEmulationAmount"}})],1),a("span",{staticClass:"dash"},[a("i",{staticClass:"el-icon-minus icon-dash"})]),a("el-col",{staticClass:"float-right",attrs:{span:11}},[a("el-input",{attrs:{placeholder:"Đến"},nativeOn:{keypress:function(e){return t.onlyNumber.apply(null,arguments)},keyup:function(e){return t.numberFormat(e,"toEmulationAmount")}},model:{value:t.params.toEmulationAmount,callback:function(e){t.$set(t.params,"toEmulationAmount",e)},expression:"params.toEmulationAmount"}})],1)],1)],1)],1),a("el-row",{staticClass:"row"},[a("el-col",{attrs:{span:10}},[a("label",{staticClass:"title-label"},[t._v(" CBNV ")]),a("el-select",{staticClass:"form-control",attrs:{remote:"","remote-method":t.remoteMembers,filterable:"",multiple:"",placeholder:"Chọn CBNV"},on:{change:function(e){return t.selectParamChange(e,"memberIdArray")}},model:{value:t.memberCodeList,callback:function(e){t.memberCodeList=e},expression:"memberCodeList"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMoreMembers,expression:"loadMoreMembers"}],staticClass:"list-uploader",attrs:{"infinite-scroll-delay":"500"}},t._l(t.listMembers,(function(t){return a("el-option",{key:t.id,attrs:{label:t.memberNo+" - "+t.fullName,value:t.id}})})),1)])],1)],1)],1),a("template",{slot:"footer"},[a("div",{staticClass:"footer-action flex jc-space-between"},[a("div",[a("el-button",{on:{click:t.handleReset}},[t._v("Mặc định")]),a("el-button",{staticClass:"be-btn-danger",on:{click:t.handleSearch}},[t._v("Áp dụng")])],1)])])],2)}),U=[],H=Object(f["a"])("beUser"),G=function(t){Object(n["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.params={areaIdArray:"",branchIdArray:"",transOfficeIdArray:"",memberIdArray:"",frmResultAmount:null,toResultAmount:null,frmEmulationAmount:null,toEmulationAmount:null,frmBonusAmount:null,toBonusAmount:null,pageNo:1},t.areaCodeList=[],t.branchCodeList=[],t.transactionOfficeCodeList=[],t.memberCodeList=[],t.listArea=[],t.listBranch=[],t.listTrans=[],t.listMembers=[],t.paramArea={search:"",type:1,districtId:0,i:0,ps:20},t.paramBranch={search:"",type:2,districtId:0,i:0,ps:20},t.paramTrans={search:"",type:3,districtId:0,i:0,ps:20},t.paramMember={i:0,ps:20,limit:"",page:1,search:"",statusAccount:0,groupCode:"INSURANCE",sort:1},t}return Object(l["a"])(a,[{key:"created",value:function(){var t,e,a=null===(t=this.user)||void 0===t||null===(e=t.districts)||void 0===e?void 0:e[0].id;this.paramArea.districtId=a,this.paramBranch.districtId=a,this.paramTrans.districtId=a,this.apiUser=Object(h["a"])("user",{districtId:a}),this.apiEmployee=Object(h["a"])("employee",{districtId:a})}},{key:"handleOpen",value:function(){this.initData()}},{key:"handleClose",value:function(){}},{key:"handleSearch",value:function(){if(this.params.frmResultAmount){var t=this.params.frmResultAmount.toString();this.params.frmResultAmount=t.replaceAll(",","")}if(this.params.toResultAmount){var e=this.params.toResultAmount.toString();this.params.toResultAmount=e.replaceAll(",","")}if(this.params.frmEmulationAmount){var a=this.params.frmEmulationAmount.toString();this.params.frmEmulationAmount=a.replaceAll(",","")}if(this.params.toEmulationAmount){var r=this.params.toEmulationAmount.toString();this.params.toEmulationAmount=r.replaceAll(",","")}if(this.params.frmBonusAmount){var i=this.params.frmBonusAmount.toString();this.params.frmBonusAmount=i.replaceAll(",","")}if(this.params.toBonusAmount){var o=this.params.toBonusAmount.toString();this.params.toBonusAmount=o.replaceAll(",","")}this.$emit("search",this.params),this.setOpenPopup({popupName:"program-result-filter",isOpen:!1})}},{key:"handleReset",value:function(){this.params={programId:"",areaIdArray:"",branchIdArray:"",transOfficeIdArray:"",memberIdArray:"",frmResultAmount:null,toResultAmount:null,frmEmulationAmount:null,toEmulationAmount:null,frmBonusAmount:null,toBonusAmount:null,pageNo:1},this.areaCodeList=[],this.branchCodeList=[],this.transactionOfficeCodeList=[],this.memberCodeList=[],this.initData()}},{key:"initData",value:function(){var t=this;this.paramArea.search="",this.paramArea.i=0,this.getAreaList(this.paramArea).then((function(e){t.listArea=e.data})),this.paramBranch.search="",this.paramBranch.i=0,this.getAreaList(this.paramBranch).then((function(e){t.listBranch=e.data})),this.paramTrans.search="",this.paramTrans.i=0,this.getAreaList(this.paramTrans).then((function(e){t.listTrans=e.data})),this.paramMember.search="",this.paramMember.i=0,this.apiEmployee.getEmployeeList(this.paramMember).then((function(e){t.listMembers=e.data})).catch((function(t){console.log(t)}))}},{key:"remoteArea",value:function(t){var e=this;this.paramArea.search=t,this.paramArea.i=0,this.getAreaList(this.paramArea).then((function(t){e.listArea=t.data}))}},{key:"loadMoreArea",value:function(){var t=this;this.paramArea.i+=this.paramArea.ps,this.getAreaList(this.paramArea).then((function(e){t.listArea=[].concat(Object(N["a"])(t.listArea),Object(N["a"])(e.data))}))}},{key:"remoteBranch",value:function(t){var e=this;this.paramBranch.search=t,this.paramBranch.i=0,this.getAreaList(this.paramBranch).then((function(t){e.listBranch=t.data}))}},{key:"loadMoreBranch",value:function(){var t=this;this.paramBranch.i+=this.paramBranch.ps,this.getAreaList(this.paramBranch).then((function(e){t.listBranch=[].concat(Object(N["a"])(t.listBranch),Object(N["a"])(e.data))}))}},{key:"remoteTrans",value:function(t){var e=this;this.paramTrans.search=t,this.paramTrans.i=0,this.getAreaList(this.paramTrans).then((function(t){e.listTrans=t.data}))}},{key:"loadMoreTrans",value:function(){var t=this;this.paramTrans.i+=this.paramTrans.ps,this.getAreaList(this.paramTrans).then((function(e){t.listTrans=[].concat(Object(N["a"])(t.listTrans),Object(N["a"])(e.data))}))}},{key:"getAreaList",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.apiUser.getAreaList(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"remoteMembers",value:function(t){var e=this;this.paramMember.search=t,this.paramMember.i=0,this.apiEmployee.getEmployeeList(this.paramMember).then((function(t){e.listMembers=t.data})).catch((function(t){console.log(t)}))}},{key:"loadMoreMembers",value:function(){var t=this;this.paramMember.i+=this.paramMember.ps,this.apiEmployee.getEmployeeList(this.paramMember).then((function(e){t.listMembers=[].concat(Object(N["a"])(t.listMembers),Object(N["a"])(e.data))})).catch((function(t){console.log(t)}))}},{key:"selectParamChange",value:function(t,e){t.length>0?this.params[e]=t.join(","):this.params[e]=""}},{key:"onlyNumber",value:function(t){var e=t.keyCode?t.keyCode:t.which;(e<48||e>57)&&t.preventDefault()}},{key:"numberFormat",value:function(t,e){var a,r=t,i=r.target.value;i.length>0&&(i=i.replaceAll(",",""),i=null===(a=this.$options.filters)||void 0===a?void 0:a.formatNumber(parseInt(i)),r.target.value=i,this.params[e]=i)}}]),a}(Object(m["b"])(p["a"]));Object(u["a"])([H.State("user")],G.prototype,"user",void 0),G=Object(u["a"])([Object(m["a"])({components:{SearchBar:T}})],G);var X=G,J=X,Q=(a("e887"),Object(k["a"])(J,z,U,!1,null,"6f4557f0",null)),W=Q.exports,Z=Object(f["a"])("beUser"),tt=function(t){Object(n["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.emulationRules=[],t.resultEmulation=[],t.applyContractType=[],t.kpiValueText="",t.titleBonus="",t.titleBonusText="",t.showCriteriaTop=!1,t.areaCodeList="",t.branchCodeList="",t.transactionOfficeCodeList="",t.tabSelect="detail",t.txtBonus="",t.isLoading=!1,t.isExcelLoading=!1,t.option=[{id:1,name:"Đơn vị kinh doanh",active:!1,divided:!1},{id:2,name:"Kết quả",active:!1,divided:!0},{id:3,name:"Mức hỗ trợ",active:!1,divided:!1},{id:4,name:"Thành tiền",active:!1,divided:!1}],t.params={keywordString:"",programId:"",areaIdArray:"",branchIdArray:"",applyLevel:"",transOfficeIdArray:"",memberIdArray:"",frmResultAmount:null,toResultAmount:null,frmEmulationAmount:null,toEmulationAmount:null,frmBonusAmount:null,toBonusAmount:null,orderByClause:0,pageNo:1,pageSize:20},t.query={total:0,page:t.params.pageNo,limit:t.params.pageSize},t.summary={},t}return Object(l["a"])(a,[{key:"created",value:function(){var t,e,a=null===(t=this.user)||void 0===t||null===(e=t.districts)||void 0===e?void 0:e[0].id;this.apiUser=Object(h["a"])("user",{districtId:a}),this.apiSalary=Object(h["a"])("salary",{districtId:a})}},{key:"handleOpen",value:function(){var t=this;this.tabSelect="detail",this.applyContractType=[],"1"===this.emulationProgram.isNewContract&&this.applyContractType.push("FYP"),"1,2"===this.emulationProgram.isRenewContract?(this.applyContractType.push("RYP"),this.applyContractType.push("RFYP")):"1"===this.emulationProgram.isRenewContract?this.applyContractType.push("RYP"):"2"===this.emulationProgram.isRenewContract&&this.applyContractType.push("RFYP"),"1"===this.emulationProgram.isExpireContract&&this.applyContractType.push("ARPS");var e=parseInt(this.emulationProgram.kpiValueFrom);this.kpiValueText=e&&e>0?"Tỷ lệ hoàn thành >= "+e+"%":"Không áp dụng";var a=parseInt(this.emulationProgram.criteriaTop);a&&a>0?(this.titleBonusText="Đạt Top cao nhất (Top "+a+")",this.titleBonus="Thứ hạng",this.showCriteriaTop=!0):(this.titleBonusText="Đủ điều kiện",this.titleBonus="Giá trị từ",this.showCriteriaTop=!1),this.emulationProgram.areaCodeList&&this.emulationProgram.areaCodeList.length>0?this.getAreaList(this.emulationProgram.areaCodeList,1).then((function(e){t.areaCodeList=e.data.map((function(t){return t.name})).join(", ")})):this.areaCodeList="",this.emulationProgram.branchCodeList&&this.emulationProgram.branchCodeList.length>0?this.getAreaList(this.emulationProgram.branchCodeList,2).then((function(e){t.branchCodeList=e.data.map((function(t){return t.name})).join(", ")})):this.branchCodeList="",this.emulationProgram.transactionOfficeCodeList&&this.emulationProgram.transactionOfficeCodeList.length>0?this.getAreaList(this.emulationProgram.transactionOfficeCodeList,3).then((function(e){t.transactionOfficeCodeList=e.data.map((function(t){return t.name})).join(", ")})):this.transactionOfficeCodeList="",this.emulationProgram.rules&&(this.emulationRules=this.emulationProgram.rules);var r=this.emulationProgram.bonusType;if(this.txtBonus="PERCENT"===r?"(%)":"VOUCHER"===r?"(quà tặng)":"",this.params={keywordString:"",programId:"",areaIdArray:"",branchIdArray:"",applyLevel:"",transOfficeIdArray:"",memberIdArray:"",frmResultAmount:null,toResultAmount:null,frmEmulationAmount:null,toEmulationAmount:null,frmBonusAmount:null,toBonusAmount:null,orderByClause:0,pageNo:1,pageSize:20},this.$refs.searchFilter){var i=this.$refs.searchFilter;i.handleReset()}if(this.$refs.filterReult){var o=this.$refs.filterReult;o.handleReset()}this.params.bonusType=this.emulationProgram.bonusType,this.params.programId=this.emulationProgram.id}},{key:"handleClose",value:function(){}},{key:"translateArray",value:function(t,e){var a=this,r="";if(e&&e.length>0){var i=e.split(",");i.length>0&&(r+=i.map((function(e){return a.$i18n.t("program."+t+"."+e)})).join(", "))}return r}},{key:"translateStringArray",value:function(t,e){var a=this,r="";return e.length>0&&(r+=e.map((function(e){return a.$i18n.t("program."+t+"."+e)})).join(", ")),r}},{key:"getRelationship",value:function(t){var e="";if(t&&t.length>0){var a=t.split(",");e+=a.map((function(t){return D["RELATIONSHIP_TYPE"][t]})).join(", ")}return e}},{key:"getAreaList",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(e,a){var r,i,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=null===(r=this.user)||void 0===r||null===(i=r.districts)||void 0===i?void 0:i[0].id,s={ids:e,type:a,districtId:o},t.abrupt("return",this.apiUser.getAreaList(s));case 3:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"tabsEmulationClick",value:function(t){"result"===t.name&&this.getResultEmulation()}},{key:"handleSearch",value:function(t){this.params.keywordString=t,this.params.pageNo=1,this.getResultEmulation()}},{key:"handleFilter",value:function(t){this.params=Object(o["a"])(Object(o["a"])({},this.params),t),this.getResultEmulation()}},{key:"handleCommand",value:function(t){Object(d["forEach"])(this.option,(function(e){t.id===e.id?e.active=!0:e.active=!1})),this.params.orderByClause=t.id,this.getResultEmulation()}},{key:"handleOpentFilter",value:function(){this.setOpenPopup({popupName:"program-result-filter",isOpen:!0})}},{key:"handleSizeChange",value:function(t){this.params.pageSize=t,this.getResultEmulation()}},{key:"handleCurrentChange",value:function(t){this.params.pageNo=t,this.getResultEmulation()}},{key:"getResultEmulation",value:function(){var t=this;this.isLoading=!0,this.apiSalary.searchEmulations(this.params).then((function(e){t.resultEmulation=e.data,t.isLoading=!1})).catch((function(t){console.log(t)})),this.apiSalary.countEmulations(this.params).then((function(e){t.query.total=e.data.numOfRow,t.summary=e.data})).catch((function(t){console.log(t)}))}},{key:"indexMethod",value:function(t){return(this.params.pageNo-1)*this.params.pageSize+t+1}},{key:"getFormatBonus",value:function(t){var e=this.emulationProgram.bonusType;return"PERCENT"===e?this.$options.filters.formatFloat(t):this.$options.filters.formatNumber(t)}},{key:"handleExport",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(e){var a,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:"xlsx"===e&&(this.isExcelLoading=!0),null===(a=this.apiSalary)||void 0===a||a.exportEmulations(Object(o["a"])(Object(o["a"])({},this.params),{},{ext:e,bonusType:this.emulationProgram.bonusType,applyLevel:this.emulationProgram.applyLevel})).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a;var o=new Date,s="".concat(o.getFullYear()).concat(o.getMonth()+1).concat(o.getDate()).concat(o.getHours()).concat(o.getMinutes()).concat(o.getMilliseconds());i.setAttribute("download","Ket_qua_CTTD_".concat(s,".").concat("pdf"===e?"pdf":"xlsx")),document.body.appendChild(i),i.click(),"xlsx"===e&&(r.isExcelLoading=!1)})).catch((function(t){"xlsx"===e&&(r.isExcelLoading=!1),404===t.response.status&&r.$message.error("Không tìm thấy dữ liệu xuất file")}));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"summaryMethod",value:function(t){var e=this,a=t.columns,r=[];return Object(d["forEach"])(a,(function(t,a){if(a<6)r[a]="";else if(6!==a){var i=e.summary[t.property];if(r[a]=i?e.$options.filters.formatNumber(i):"",7===a){var o=e.summary["emulationAmount"];r[7]=e.$options.filters.formatNumber(o)}}else r[a]="Tổng"})),r}},{key:"editDetailProgram",value:function(){this.setOpenPopup({popupName:"program-detail",isOpen:!1}),this.$emit("editProgram",this.emulationProgram)}}]),a}(Object(m["b"])(p["a"]));Object(u["a"])([Z.State("user")],tt.prototype,"user",void 0),Object(u["a"])([Object(m["c"])({required:!1,type:Object,default:{}})],tt.prototype,"emulationProgram",void 0),tt=Object(u["a"])([Object(m["a"])({components:{SearchBar:T,FilterResult:W}})],tt);var et=tt,at=et,rt=(a("76c9"),Object(k["a"])(at,K,Y,!1,null,"b3983ff4",null)),it=rt.exports,ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-popup",{staticClass:"action",attrs:{name:"program-delete",open:t.handleOpen,hiddenFooter:!0,width:"370px",top:"25vh"}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("Xác nhận xóa")]),a("div",{staticClass:"body-content"},[a("div",[a("span",{staticClass:"styleTitle"},[t._v(" Bạn có chắc chắn muốn xóa CTTĐ "),a("span",{staticClass:"text-bold"},[t._v(t._s(t.emulationProgram.programName))]),t._v("?")])])]),a("template",{slot:"footer"},[a("div",{staticClass:"bottom"},[a("div",{staticClass:"bt-top flex"},[a("div",{staticClass:"bt-center"},[a("el-button",{staticClass:"be-button-unset",attrs:{size:"mini"},on:{click:t.handleClose}},[t._v("Hủy")]),a("el-button",{staticClass:"be-btn-danger",on:{click:t.handleSave}},[t._v("Xác nhận")])],1)])])])],2)},st=[],lt=Object(f["a"])("beUser"),nt=function(t){Object(n["a"])(a,t);var e=Object(c["a"])(a);function a(){return Object(s["a"])(this,a),e.apply(this,arguments)}return Object(l["a"])(a,[{key:"created",value:function(){var t,e,a=null===(t=this.user)||void 0===t||null===(e=t.districts)||void 0===e?void 0:e[0].id;this.apiProgram=Object(h["a"])("program",{districtId:a})}},{key:"handleClose",value:function(){this.setOpenPopup({popupName:"program-delete",isOpen:!1})}},{key:"handleSave",value:function(){var t=this;this.apiProgram.deleteProgram(this.emulationProgram.id).then((function(){t.$message.success("Xóa thành công!"),t.$emit("delete"),t.handleClose()})).catch((function(e){t.$message.error(e.message)}))}},{key:"handleOpen",value:function(){}}]),a}(Object(m["b"])(p["a"]));Object(u["a"])([Object(m["c"])({required:!1,type:Object,default:{}})],nt.prototype,"emulationProgram",void 0),Object(u["a"])([lt.State("user")],nt.prototype,"user",void 0),nt=Object(u["a"])([Object(m["a"])({components:{}})],nt);var ct=nt,ut=ct,mt=(a("4ce7"),Object(k["a"])(ut,ot,st,!1,null,null,null)),pt=mt.exports,ht=Object(f["a"])("beUser"),dt=function(t){Object(n["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.isConflickClick=!1,t.isLoading=!1,t.isAction="add",t.typeProgramSource=[],t.typeApplyLevel=[],t.typeApplyFee=[],t.productCategory=[],t.emulationProgram={},t.data=[],t.params={keywordString:"",programSource:"",fromDate:null,toDate:null,applyLevel:"",applyFeeType:"",productCategoryCode:"",orderByClause:0,emulationStatus:"1",pageNo:1,pageSize:20},t.query={total:0,page:t.params.pageNo,limit:t.params.pageSize},t.option=[{id:2,name:"Thời gian thực  hiện",active:!1,divided:!1},{id:3,name:"Nguồn chương trình",active:!1,divided:!1}],t}return Object(l["a"])(a,[{key:"created",value:function(){var t,e,a=this.$route.params.status;this.checkStatusRoute(a);var r=null===(t=this.user)||void 0===t||null===(e=t.districts)||void 0===e?void 0:e[0].id;this.apiParam=Object(h["a"])("param",{districtId:r}),this.apiProgram=Object(h["a"])("program",{districtId:r}),this.apiContract=Object(h["a"])("contract",{districtId:r}),this.getParamEmulation(),this.getProgramList()}},{key:"checkStatusRoute",value:function(t){var e="";e="xem-xet-lai"==t?"2":"da-chi-tra"==t?"4":"chua-chi-tra"==t?"3":"1",this.params.emulationStatus=e}},{key:"routeStatusChange",value:function(t){this.checkStatusRoute(t),this.getProgramList()}},{key:"getParamEmulation",value:function(){var t=this;this.apiParam.getEmulationProgramSource().then((function(e){t.typeProgramSource=e.data})).catch((function(t){console.log(t)})),this.apiParam.getEmulationApplyLevel().then((function(e){t.typeApplyLevel=e.data})).catch((function(t){console.log(t)})),this.apiParam.getEmulationApplyFeeTypel().then((function(e){t.typeApplyFee=e.data})).catch((function(t){console.log(t)})),this.apiContract.getProductCategoryList({}).then((function(e){t.productCategory=e.data})).catch((function(t){console.log(t)}))}},{key:"handleSearch",value:function(t){this.params.pageNo=1,this.query.page=1,this.params.keywordString=t,this.getProgramList()}},{key:"getProgramList",value:function(){var t=this;this.apiProgram.search(this.params).then((function(e){t.data=e})).catch((function(t){console.log(t)})),this.apiProgram.count(this.params).then((function(e){t.query.total=e})).catch((function(t){console.log(t)}))}},{key:"handleRowClick",value:function(t){var e=this;if(this.isConflickClick)this.isConflickClick=!1;else{var a=t.row;this.apiProgram.getProgram(a.id).then((function(t){e.emulationProgram=t,e.setOpenPopup({popupName:"program-detail",isOpen:!0})})).catch((function(t){console.log(t),e.$message.error(t)}))}}},{key:"showDropDown",value:function(){this.isConflickClick=!0}},{key:"handleClickAction",value:function(t,e){var a=this;this.isConflickClick=!0,"edit"===e||"copy"===e?(this.isAction=e,this.apiProgram.getProgram(t.id).then((function(t){a.emulationProgram=t,a.setOpenPopup({popupName:"program-create",isOpen:!0})})).catch((function(t){console.log(t),a.$message.error(t)}))):"delete"===e&&(this.emulationProgram=t,this.setOpenPopup({popupName:"program-delete",isOpen:!0}))}},{key:"deleteProgramEdit",value:function(){this.setOpenPopup({popupName:"program-delete",isOpen:!0})}},{key:"handleSizeChange",value:function(t){this.params.pageSize=t,this.getProgramList()}},{key:"handleCurrentChange",value:function(t){this.params.pageNo=t,this.getProgramList()}},{key:"handleSearchFillter",value:function(t){this.params=Object(o["a"])(Object(o["a"])({},this.params),t),this.params.pageNo=1,this.query.page=1,this.params.fromDate=this.formatDateTime(this.params.fromDate),this.params.toDate=this.formatDateTime(this.params.toDate),this.getProgramList()}},{key:"formatDateTime",value:function(t){if(!t)return"";var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())}},{key:"handleCommand",value:function(t){Object(d["forEach"])(this.option,(function(e){t.id===e.id?e.active=!0:e.active=!1})),this.params.orderByClause=t.id,this.getProgramList()}},{key:"handleCreate",value:function(){this.isAction="add",this.emulationProgram={},this.setOpenPopup({popupName:"program-create",isOpen:!0})}},{key:"indexMethod",value:function(t){return(this.params.pageNo-1)*this.params.pageSize+t+1}},{key:"saveProgram",value:function(){this.getProgramList()}},{key:"deleteProgram",value:function(){this.getProgramList()}},{key:"editProgram",value:function(t){this.handleClickAction(t,"edit")}}]),a}(Object(m["b"])(p["a"]));Object(u["a"])([ht.State("user")],dt.prototype,"user",void 0),Object(u["a"])([Object(m["e"])("$route.params.status")],dt.prototype,"routeStatusChange",null),dt=Object(u["a"])([Object(m["a"])({components:{SearchBar:T,FilterProgram:E,CreateProgram:q,DetailProgram:it,DeleteProgram:pt}})],dt);var ft=dt,gt=ft,bt=(a("2d5d"),Object(k["a"])(gt,r,i,!1,null,"767f2a3c",null));e["default"]=bt.exports},b739:function(t,e,a){},c09e:function(t,e,a){},e887:function(t,e,a){"use strict";a("4792")}}]);
//# sourceMappingURL=chunk-a8561b5a.0e5d3cc0.js.map