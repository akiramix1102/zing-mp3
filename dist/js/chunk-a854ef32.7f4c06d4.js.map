{"version":3,"sources":["webpack:///./src/modules/deals/components/draggable/Draggable.vue?b49c","webpack:///./src/modules/deals/components/draggable/Draggable.vue","webpack:///./src/modules/deals/components/draggable/Draggable.vue?6027","webpack:///./src/modules/deals/components/draggable/Draggable.vue?a115","webpack:///./src/modules/customer/components/popup/PopupAddUploadFile.vue?4505","webpack:///./src/modules/deals/views/DealDragPage.vue?0efc","webpack:///./src/modules/customer/components/popup/PopupAddUploadFile.vue?749e","webpack:///./src/modules/customer/components/popup/PopupAddUploadFile.vue","webpack:///./src/modules/customer/components/popup/PopupAddUploadFile.vue?794e","webpack:///./src/modules/customer/components/popup/PopupAddUploadFile.vue?e131","webpack:///./src/modules/deals/components/draggable/Draggable.vue?64cb","webpack:///./src/modules/deals/views/DealDragPage.vue?9a2c","webpack:///./src/modules/deals/views/DealDragPage.vue","webpack:///./src/modules/deals/views/DealDragPage.vue?917b","webpack:///./src/modules/deals/views/DealDragPage.vue?ed21"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","classHeader","firstColumn","borderHeader","_e","_v","_s","dataProp","name","_f","totalValue","numOfSalesDeal","attrs","salesDeals","on","change","nativeOn","$event","e","handleScroll","id","apply","arguments","_l","element","key","handleItemClick","hideAction","handleConflictClick","handleClickOpenAction","status","data","handleOpenPopupNote","customerId","slot","salesFullName","salesAvatar","dealValue","staticRenderFns","isLog","dataPopup","title","code","isConflictClick","debounceLoadMore","handleLoadMore","target","scrollTop","offsetHeight","scrollHeight","$emit","evt","console","log","value","params","type","Object","components","draggable","component","handleOpen","handleClose","fileList","handleChangeFile","file","uid","handleDeleteFile","handleAddFile","beUser","dataInput","attachFiles","formData","FormData","raw","push","append","percentage","processFunction","progressEvent","progress","loaded","total","apiUpload","uploadFile","result","index","item","url","success","length","idUpload","$route","api","then","res","$message","catch","uploadFileDeal","idUploadDeal","setOpenPopup","popupName","isOpen","districtId","user","districts","State","filters","handleFiltersChange","handleChangPipeLine","model","callback","$$v","$set","expression","directives","rawName","loadMore","pipelineId","handleRedirect","keys","dataDrag","handleOpenCreateNote","loadMoreDrag","handleClickItem","handleChangeItem","init","handleConfirm","handleCreateNote","dataRow","idCustomer","beDeal","listPipeline","isLoading","dataSelect","query","limit","queryLoadMorePipeline","page","queryLoadMore","dealId","paramUpdateDrag","param","elementId","currentStageId","moved","newStageId","position","newIndex","removed","added","apiDeal","updateDrag","error","$router","post","createNote","description","content","getDataSalesPipelines","listFilter","Map","map","values","includes","deleteDealOrCusById","toString","err","message","assignDeal","stageId","getDataBoard","view","filter","setDealFilter","dealName","dataChange","el","Action","Getter","DealFilter","Draggable","CreateDeal","PopupConfirmDeal","PopupConfirm","PopupNote","AppointCustomer","EmptyBlock","PopupAddUploadFile"],"mappings":"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","file":"js/chunk-a854ef32.7f4c06d4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"draggable\"},[_c('div',{class:_vm.classHeader},[(!_vm.firstColumn && !_vm.borderHeader)?_c('div',{staticClass:\"stripe\"}):_vm._e(),_c('div',{staticClass:\"content\"},[_c('h3',[_vm._v(_vm._s(_vm.dataProp.name ? _vm.dataProp.name : ''))]),_c('div',{staticClass:\"flex\"},[_c('span',{staticClass:\"price\"},[_vm._v(_vm._s(_vm._f(\"formatNumber\")(_vm.dataProp.totalValue)))]),_c('span',{staticClass:\"dot\"}),_c('span',{staticClass:\"count\"},[_vm._v(_vm._s(_vm._f(\"formatNumber\")(_vm.dataProp.numOfSalesDeal))+\" cơ hội\")])])])]),_c('draggable',{staticClass:\"list-group\",attrs:{\"list\":_vm.dataProp.salesDeals,\"group\":\"people\"},on:{\"change\":_vm.change},nativeOn:{\"scroll\":function($event){return (function (e) { return _vm.handleScroll(e, _vm.dataProp.id); }).apply(null, arguments)}}},[_vm._l((_vm.dataProp.salesDeals),function(element){return _c('div',{key:element.id,staticClass:\"list-group-item cursor\",on:{\"click\":function($event){return _vm.handleItemClick(element)}}},[_c('div',{staticClass:\"be-flex jc-space-between\"},[_c('h3',[_vm._v(_vm._s(element.name ? element.name : ''))]),_c('el-popover',{attrs:{\"placement\":\"bottom\",\"popper-class\":\"popper-action-deal\"},on:{\"hide\":_vm.hideAction},nativeOn:{\"click\":function($event){return _vm.handleConflictClick.apply(null, arguments)}}},[_c('div',{staticClass:\"be-flex-column content\"},[_c('div',{staticClass:\"content-item cursor\",on:{\"click\":function($event){return _vm.handleClickOpenAction({ status: 'edit', id: element.id })}}},[_c('span',[_vm._v(\"Sửa thông tin\")])]),_c('div',{staticClass:\"content-item cursor\",on:{\"click\":function($event){return _vm.handleClickOpenAction({ status: 'assign', id: element.id, data: element })}}},[_c('span',[_vm._v(\"Gán phụ trách\")])]),_c('div',{staticClass:\"content-item cursor\",on:{\"click\":function($event){return _vm.handleOpenPopupNote(element)}}},[_c('span',[_vm._v(\"Ghi chú\")])]),_c('div',{staticClass:\"content-item cursor\",on:{\"click\":function($event){return _vm.handleClickOpenAction({ status: 'createCalen', id: element.customerId, data: element })}}},[_c('span',[_vm._v(\"Tạo lịch hẹn\")])]),_c('div',{staticClass:\"content-item cursor\",on:{\"click\":function($event){return _vm.handleClickOpenAction({ status: 'uploadFile', id: element.id})}}},[_c('span',[_vm._v(\"Upload tài liệu\")])]),_c('div',{staticClass:\"content-item cursor\",on:{\"click\":function($event){return _vm.handleClickOpenAction({ status: 'delete', id: element.id })}}},[_c('span',[_vm._v(\"Xóa cơ hội\")])])]),_c('div',{staticClass:\"reference\",attrs:{\"slot\":\"reference\"},slot:\"reference\"},[_c('i',{staticClass:\"el-icon-more\"})])])],1),_c('p',{staticClass:\"small\"},[_vm._v(_vm._s(element.salesFullName ? element.salesFullName : ''))]),_c('span',{staticClass:\"flex\"},[(element.id && element.salesAvatar)?_c('el-avatar',{attrs:{\"src\":element.salesAvatar,\"size\":\"small\"}}):_c('base-icon',{staticClass:\"avatar__imployee--defalt\",attrs:{\"icon\":\"icon-avatar-default\"}}),_c('span',{staticClass:\"deal-value\"},[_vm._v(_vm._s(_vm._f(\"formatNumber\")(element.dealValue)))])],1)])}),(_vm.firstColumn)?_c('el-button',{staticClass:\"btn-add-deal\",attrs:{\"slot\":\"footer\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){return _vm.handleClickOpenAction({ status: 'add', id: '' })}},slot:\"footer\"},[_vm._v(\"Thêm cơ hội\")]):_vm._e()],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { debounce } from 'lodash'\nimport { Component, Prop, Mixins } from 'vue-property-decorator'\nimport draggable from 'vuedraggable'\nimport CommonMixin from '@/mixins/commonMixin'\nimport PopupMixin from '@/mixins/popup'\n// import CreateDeal from '@/modules/deals/components/popup/CreateDeal.vue'\n\n@Component({ components: { draggable } })\nexport default class Draggable extends Mixins(CommonMixin, PopupMixin) {\n  @Prop({ type: Object }) dataProp!: Record<string, any>\n  @Prop() firstColumn?: boolean\n  @Prop() borderHeader?: boolean\n  isLog = false\n  get classHeader(): string {\n    if (this.borderHeader && !this.firstColumn) {\n      return 'flex draggable-header header-border-left'\n    }\n    return 'flex draggable-header'\n  }\n  dataPopup: any = {\n    title: 'Thêm mới cơ hội bán hàng',\n    code: '',\n    id: '',\n    data: {}\n  }\n  isConflictClick = false\n  handleScroll(e: Record<string, any>, id: string | number): void {\n    // console.log(e.target.scrollTop, e.target.offsetHeight, e.target.scrollHeight)\n\n    if (e.target.scrollTop + e.target.offsetHeight + 1 >= e.target.scrollHeight) {\n      this.debounceLoadMore(id)\n    }\n  }\n  debounceLoadMore = debounce(this.handleLoadMore, 500)\n  handleLoadMore(id: string | number): void {\n    this.$emit('loadMore', id)\n  }\n  hideAction(): void {\n    this.isConflictClick = false\n  }\n  handleConflictClick(): void {\n    this.isConflictClick = true\n  }\n  change(evt: Record<string, any>): void {\n    console.log(evt)\n    if (evt['added']) {\n      evt['added'].id = this.dataProp.id\n    }\n    if (evt['removed']) {\n      evt['removed'].id = this.dataProp.id\n    }\n    if (evt['moved']) {\n      evt['moved'].id = this.dataProp.id\n    }\n    this.$emit('log', evt)\n  }\n  handleItemClick(value: any): void {\n    if (this.isConflictClick) {\n      return\n    }\n    this.$emit('clickItem', value)\n  }\n  handleClickOpenAction(params: { status: string; id: number; data?: Record<string, any> }): void {\n    this.$emit('action', params)\n  }\n\n  handleOpenPopupNote(value: Record<string, any>): void {\n    this.$emit('createNote', value)\n  }\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Draggable.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Draggable.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Draggable.vue?vue&type=template&id=a686cdf4&scoped=true&\"\nimport script from \"./Draggable.vue?vue&type=script&lang=ts&\"\nexport * from \"./Draggable.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Draggable.vue?vue&type=style&index=0&id=a686cdf4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a686cdf4\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PopupAddUploadFile.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DealDragPage.vue?vue&type=style&index=0&id=271619f9&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('base-popup',{staticClass:\"addUploadFile\",attrs:{\"name\":\"add-upload-file\",\"open\":_vm.handleOpen,\"close\":_vm.handleClose,\"hiddenFooter\":true,\"width\":\"520px\",\"top\":\"5vh\"}},[_c('div',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"Thêm file tài liệu\")]),_c('el-upload',{staticClass:\"upload body-Upload\",attrs:{\"drag\":\"\",\":file-list\":_vm.fileList,\"on-change\":_vm.handleChangeFile,\"auto-upload\":false,\"show-file-list\":false,\"action\":\"\",\"multiple\":\"\"}},[_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"Kéo thả file hoặc\"),_c('em',[_vm._v(\" Chọn từ máy tính\")])])]),(_vm.fileList.length)?_c('div',{staticClass:\"list-file\"},_vm._l((_vm.fileList),function(file){return _c('div',{key:file.uid,staticClass:\"flex jc-space-between file-item\"},[_c('div',{staticClass:\"left\"},[_c('p',[_vm._v(_vm._s(file.name))])]),_c('div',{staticClass:\"right\",on:{\"click\":function($event){return _vm.handleDeleteFile(file.uid)}}},[_c('base-icon',{staticClass:\"icon-action cursor\",attrs:{\"icon\":\"delete\"}})],1)])}),0):_vm._e(),_c('template',{slot:\"footer\"},[_c('div',{staticClass:\"bottom\"},[_c('div',{staticClass:\"bt-top flex\"},[_c('div',{staticClass:\"bt-center\"},[_c('el-button',{staticClass:\"group-button-cencel\",on:{\"click\":_vm.handleClose}},[_vm._v(\"Hủy\")]),(_vm.fileList.length)?_c('el-button',{staticClass:\"be-btn-danger group-button-save\",on:{\"click\":_vm.handleAddFile}},[_vm._v(\"Thêm\")]):_vm._e()],1)])])])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport PopupMixin from '@/mixins/popup'\nimport { Component, Mixins, Prop } from 'vue-property-decorator'\nimport { namespace } from 'vuex-class'\nimport getRepository from '@/services'\nimport CategoryRepository from '@/services/repositories/category'\nimport UploadRepository from '@/services/repositories/upload'\nimport { findIndex, filter } from 'lodash'\nconst beUser = namespace('beUser')\n@Component({ components: {} })\nexport default class CreateUnit extends Mixins(PopupMixin) {\n  @beUser.State('user') user?: Record<string, any>\n  @Prop() idUpload: any\n  @Prop() idUploadDeal: any\n  apiUpload!: UploadRepository\n  api!: CategoryRepository\n  fileList: any = []\n  dataInput: any = {\n    attachFiles: []\n  }\n  async handleChangeFile(file: Record<string, any>): Promise<void> {\n    const formData = new FormData()\n    if (file.status === 'ready') {\n      file.type = file.raw.type\n      // const newFile: Record<string, any> = {}\n      // newFile.name = file.name\n      // newFile.size = file.raw.size\n      this.fileList.push(file)\n      formData.append('files', file.raw)\n      // formData.append('name', file.name)\n      file.percentage = 1\n      const processFunction = function (progressEvent: any) {\n        let progress = (progressEvent.loaded / progressEvent.total) * 100\n        file.percentage = progress\n      }\n      const data: Record<string, any> = {}\n      data.data = formData\n      data.progress = processFunction\n      const uid = file.uid\n      const result = await this.apiUpload.uploadFile(data)\n      const index = findIndex(this.fileList, (item: Record<string, any>) => item.uid === uid)\n      this.fileList[index].url = result.success[0].url\n    }\n  }\n\n  handleDeleteFile(uid: number): void {\n    this.fileList = filter(this.fileList, (item: Record<string, any>) => item.uid !== uid)\n  }\n\n  handleAddFile(): void {\n    if (this.fileList.length) {\n      this.dataInput.attachFiles = [...this.fileList]\n    }\n    if ((this.idUpload && this.$route.name == 'customer') || this.$route.name == 'customerNewsfeed') {\n      this.api\n        ?.uploadFile(this.idUpload, this.dataInput)\n        .then((res: any) => {\n          this.$message.success('Upload file thành công')\n          this.fileList = []\n          this.$emit('load')\n          this.handleClose()\n        })\n        .catch(e => {\n          console.log(e)\n        })\n    } else {\n      this.api\n        ?.uploadFileDeal(this.idUploadDeal, this.dataInput)\n        .then((res: any) => {\n          this.$message.success('Upload file thành công')\n          this.fileList = []\n          this.$emit('load')\n          this.handleClose()\n        })\n        .catch(e => {\n          console.log(e)\n        })\n    }\n  }\n  handleOpen(): void {\n    console.log('test id bên khách hàng', this.idUpload)\n    console.log('test id dell', this.idUploadDeal)\n    console.log('route', this.$route)\n  }\n  handleClose(): void {\n    this.fileList = []\n    // this.idUpload = null\n    // this.idUploadDeal = null\n    this.setOpenPopup({\n      popupName: 'add-upload-file',\n      isOpen: false\n    })\n  }\n  created(): void {\n    this.apiUpload = getRepository('upload', {\n      districtId: this.user?.districts?.[0].id\n    })\n    this.api = getRepository('category', {\n      districtId: this.user?.districts?.[0].id\n    })\n  }\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PopupAddUploadFile.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PopupAddUploadFile.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PopupAddUploadFile.vue?vue&type=template&id=4de61d2c&\"\nimport script from \"./PopupAddUploadFile.vue?vue&type=script&lang=ts&\"\nexport * from \"./PopupAddUploadFile.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PopupAddUploadFile.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Draggable.vue?vue&type=style&index=0&id=a686cdf4&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"deal-page draggable-page\"},[_c('div',{staticClass:\"header be-flex jc-space-between\"},[_c('deal-filter',{staticClass:\"be-flex-item\",attrs:{\"filters\":_vm.filters,\"isPipeline\":false},on:{\"change\":_vm.handleFiltersChange}}),_c('div',{staticClass:\"actions\"},[_c('el-select',{staticClass:\"custom-button\",attrs:{\"popper-class\":\"popper-action-deal\",\"size\":\"medium\",\"placeholder\":\"Chọn Pipeline\"},on:{\"change\":_vm.handleChangPipeLine},model:{value:(_vm.filters.pipelineId),callback:function ($$v) {_vm.$set(_vm.filters, \"pipelineId\", $$v)},expression:\"filters.pipelineId\"}},[_c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(function () { return _vm.loadMore('pipeline'); }),expression:\"() => loadMore('pipeline')\"}],attrs:{\"infinite-scroll-delay\":\"500\"}},[_vm._l((_vm.listPipeline),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),_c('el-option',{staticClass:\"option-sticky\",attrs:{\"label\":\"\",\"value\":_vm.filters.pipelineId},nativeOn:{\"click\":function($event){return _vm.handleRedirect.apply(null, arguments)}}},[_c('i',{staticClass:\"el-icon-plus\"}),_vm._v(\" Thêm Pipeline\")])],2)]),_c('el-dropdown',{staticClass:\"custom-button\",attrs:{\"size\":\"medium\",\"split-button\":\"\"},on:{\"click\":function($event){return _vm.handleClickOpenAction({ status: 'add', id: '' })}}},[_vm._v(\" Thêm mới \"),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',[_vm._v(\"Thêm mới từ Excel\")])],1)],1),_c('el-button',{staticClass:\"custom-button\",attrs:{\"loading\":false}},[_c('span',{staticClass:\"be-inline-flex align-center\"},[_c('base-icon',{staticClass:\"icon\",attrs:{\"icon\":\"excel-fullcolor\"}}),_vm._v(\" Xuất Excel \")],1)])],1)],1),(Object.keys(_vm.dataDrag).length > 0)?_c('div',{staticClass:\"content\"},[_c('el-row',{staticClass:\"be-flex\"},_vm._l((_vm.dataDrag),function(item,name,index){return _c('el-col',{key:item.id,staticClass:\"be-flex-item\"},[_c('draggable',{attrs:{\"dataProp\":item,\"firstColumn\":index == 0 ? true : false,\"borderHeader\":_vm.borderHeader},on:{\"createNote\":_vm.handleOpenCreateNote,\"loadMore\":_vm.loadMoreDrag,\"clickItem\":_vm.handleClickItem,\"log\":_vm.handleChangeItem,\"action\":_vm.handleClickOpenAction}})],1)}),1)],1):_vm._e(),_c('empty-block',{attrs:{\"show\":Object.keys(_vm.dataDrag).length <= 0,\"emptyText\":\"Không có dữ liệu cơ hội bán hàng\"}}),_c('create-deal',{attrs:{\"dataProp\":_vm.dataPopup},on:{\"apply\":_vm.init,\"openDestroy\":_vm.handleClickOpenAction}}),_c('popup-confirm-deal',{attrs:{\"dataProp\":_vm.dataPopup},on:{\"confirm\":_vm.handleConfirm}}),_c('popup-note',{attrs:{\"type\":_vm.type},on:{\"update\":_vm.handleCreateNote}}),_c('appoint-customer',{attrs:{\"dataRows\":_vm.dataRow,\"idCustomer\":_vm.idCustomer}}),_c('popup-add-upload-file',{attrs:{\"idUploadDeal\":_vm.idUploadDeal}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Mixins, Watch } from 'vue-property-decorator'\nimport DealFilter from '../components/filters/DealFilter.vue'\nimport getRepository from '@/services'\nimport CommonMixin from '@/mixins/commonMixin'\nimport { trim } from 'lodash'\nimport CreateDeal from '../components/popup/CreateDeal.vue'\nimport PopupMixin from '@/mixins/popup'\nimport Draggable from '../components/draggable/Draggable.vue'\nimport DealRepository from '@/services/repositories/deal'\nimport { Pipeline } from '../interface'\nimport PopupConfirmDeal from '../components/popup/PopupConfirm.vue'\nimport PopupNote from '@/modules/customer/components/popup/PopupNote.vue'\nimport AppointCustomer from '@/modules/customer/components/popup/AppointCustomer.vue'\nimport { namespace } from 'vuex-class'\nimport EmptyBlock from '@/components/base/empty/EmptyBlock.vue'\nimport PopupAddUploadFile from '@/modules/customer/components/popup/PopupAddUploadFile.vue'\nconst beDeal = namespace('beDeal')\n\n@Component({ components: { DealFilter, Draggable, CreateDeal, PopupConfirmDeal, PopupNote, AppointCustomer, EmptyBlock,PopupAddUploadFile } })\nexport default class DealPipelinePage extends Mixins(CommonMixin, PopupMixin) {\n  @beDeal.Action('setDealFilter') setDealFilter!: (data: { dealName: string; filters: Record<string, any>; data: Record<string, any> }) => void\n  @beDeal.Getter('getDealFilter') getDealFilter!: (dealName: string) => {\n    dealName: string\n    filters: Record<string, any>\n    data: Record<string, any>\n  }\n  apiDeal!: DealRepository\n  listPipeline: Pipeline[] = []\n  isLoading = false\n  filters: Record<string, any> = {\n    // pipelineId: 1\n  }\n  dataPopup: any = {\n    title: '',\n    code: '',\n    id: '',\n    data: {},\n    dataSelect: []\n  }\n  dataRow: any = {\n    data: {}\n  }\n  idCustomer: string | number = ''\n  idUploadDeal: string | number = ''\n  query: Record<string, any> = {\n    limit: 10\n  }\n  queryLoadMorePipeline = {\n    page: 1,\n    limit: 20\n  }\n  queryLoadMore: Record<string, any> = {}\n  dataDrag: Record<string, any> = {}\n\n  dealId = 0\n  type = 'add'\n  paramUpdateDrag = {}\n  get borderHeader(): boolean {\n    if (this.$route.name == 'forecast') {\n      return true\n    }\n    return false\n  }\n  @Watch('paramUpdateDrag')\n  async handleUpdateDrag(value: Record<string, any>): Promise<void> {\n    if ((value['removed'] && value['added']) || value['moved']) {\n      console.log('ada', value['moved'])\n\n      let param: Record<string, any> = {}\n      let elementId = ''\n      if (value['moved']) {\n        elementId = value['moved'].element.id\n        param = {\n          currentStageId: value['moved'] ? value.moved.id : '',\n          newStageId: value['moved'] ? value.moved.id : '',\n          position: value['moved'] ? +value.moved.newIndex + 1 : ''\n        }\n      } else {\n        elementId = value['removed'].element.id ? value['removed'].element.id : value['added'].element.id\n        param = {\n          currentStageId: value['removed'] ? value.removed.id : '',\n          newStageId: value['added'] ? value.added.id : '',\n          position: value['added'] ? +value.added.newIndex + 1 : ''\n        }\n      }\n      await this.apiDeal\n        .updateDrag(elementId, param)\n        .then(() => this.$message.success('Thay đổi vị trí thành công'))\n        .catch(() => {\n          this.$message.error('Thay đổi vị trí thất bại')\n        })\n      this.paramUpdateDrag = {}\n      this.init()\n    }\n  }\n  handleChangeItem(value: Record<string, any>): void {\n    this.paramUpdateDrag = { ...this.paramUpdateDrag, ...value }\n  }\n  handleChangPipeLine(pipelineId: number): void {\n    this.filters.pipelineId = +pipelineId\n    this.init()\n  }\n  handleRedirect(): void {\n    this.$router.push({\n      name: 'ProgressiveSales',\n      params: {\n        type: 'them'\n      }\n    })\n  }\n  handleClick(): void {\n    this.setOpenPopup({\n      popupName: 'create-deal',\n      isOpen: true\n    })\n  }\n\n  handleOpenCreateNote(value: Record<string, any>): any {\n    this.dealId = value.id\n    this.setOpenPopup({\n      popupName: 'popup-note',\n      isOpen: true\n    })\n  }\n\n  handleCreateNote(post: Record<string, any>): void {\n    const type = 'DEAL'\n    this.apiDeal.createNote(type, { description: post.content, dealId: this.dealId }).then(() => {\n      this.$message.success('Tạo ghi chú thành công')\n    })\n  }\n\n  loadMore(type: string): void {\n    switch (type) {\n      case 'pipeline':\n        this.queryLoadMorePipeline.limit += 10\n        this.apiDeal.getDataSalesPipelines(this.queryLoadMorePipeline).then(res => {\n          const listFilter = [...this.listPipeline, ...res.data.content]\n          this.listPipeline = [...new Map(listFilter.map(item => [item['id'], item])).values()]\n        })\n        break\n    }\n  }\n  handleClickOpenAction(params: { status: string; id: number; data?: Record<string, any> }): void {\n    const { status, id } = params\n    this.dataPopup.code = status\n    this.dataPopup.id = id\n    if (status.includes('assign') || status == 'delete') {\n      this.dataPopup.title = status == 'delete' ? 'Xác nhận xóa' : 'Gán Nhân viên phụ trách'\n      this.dataPopup.data = params?.data\n      this.setOpenPopup({\n        popupName: 'popup-confirm-deal',\n        isOpen: true\n      })\n    }\n    if (status == 'add' || status == 'edit') {\n      this.dataPopup.title = status == 'add' ? 'Thêm mới cơ hội bán hàng' : 'Sửa thông tin cơ hội bán hàng'\n      this.setOpenPopup({\n        popupName: 'create-deal',\n        isOpen: true\n      })\n    }\n    if (status == 'createCalen') {\n      this.idCustomer = id\n      this.dataRow = params?.data\n      console.log('dac biet', this.dataRow)\n      this.setOpenPopup({\n        popupName: 'appoint-customer',\n        isOpen: true\n      })\n    }\n    if (status == 'uploadFile') {\n      this.idUploadDeal = id\n      this.setOpenPopup({\n        popupName: 'add-upload-file',\n        isOpen: true\n      })\n    }\n  }\n  async handleConfirm(params?: Record<string, any>): Promise<any> {\n    if (this.dataPopup.code == 'delete') {\n      if (this.dataPopup.id && this.dataPopup.id != 0) {\n        await this.apiDeal\n          .deleteDealOrCusById('sales-deals', trim(this.dataPopup.id.toString()))\n          .then(() => {\n            this.$message.success('Xóa thành công')\n            this.setOpenPopup({\n              popupName: 'popup-confirm-deal',\n              isOpen: false\n            })\n            this.init()\n          })\n          .catch(err => this.$message.error(err.message))\n      }\n    } else {\n      await this.apiDeal\n        .assignDeal('sales-deals', params)\n        .then(() => {\n          this.$message.success('Gán thành công')\n          this.setOpenPopup({\n            popupName: 'popup-confirm-deal',\n            isOpen: false\n          })\n          this.init()\n        })\n        .catch(err => this.$message.error(err.message))\n    }\n  }\n  loadMoreDrag(stageId: string | number): void {\n    this.queryLoadMore[stageId].limit += 5\n    // this.query[stageId].currentStageId = +stageId\n    this.apiDeal.getDataBoard('sales-deals', { ...this.filters, ...this.queryLoadMore[stageId] }).then(res => {\n      const listFilter = [...this.dataDrag[stageId].salesDeals, ...res[stageId].salesDeals]\n      this.dataDrag[stageId].salesDeals = [...new Map(listFilter.map(item => [item['id'], item])).values()]\n    })\n  }\n\n  handleClickItem(value: Record<string, any>): void {\n    this.$router.push({\n      name: 'dealNewsfeed',\n      params: {\n        type: this.$route.params.type,\n        view: 'bang-tin',\n        id: value.id\n      }\n    })\n  }\n  handleFiltersChange(filter: Record<string, any>): void {\n    this.setDealFilter({\n      dealName: this.$route.name as string,\n      filters: filter,\n      data: filter.dataChange || {}\n    })\n    delete filter.dataChange\n    this.filters = filter\n    // const filterStore = this.getDealFilter(this.$route.name as string)\n    // if (filterStore) {\n    //   this.filters = { ...filterStore.filters, ...filter }\n    // }\n\n    this.init()\n  }\n  async init(): Promise<any> {\n    this.isLoading = true\n    if (this.listPipeline.length < 1) {\n      await this.apiDeal.getDataSalesPipelines(this.queryLoadMorePipeline).then(res => {\n        this.listPipeline = res.data.content\n        if (!this.filters.pipelineId) {\n          this.filters.pipelineId = this.listPipeline[0].id\n        }\n      })\n    }\n    if (this.listPipeline.length > 0) {\n      const param = { ...this.query, ...this.filters }\n      await this.apiDeal\n        .getDataBoard('sales-deals', param)\n        .then(res => {\n          this.dataDrag = res\n          for (let el in this.dataDrag) {\n            this.queryLoadMore[el] = {\n              limit: 10,\n              currentStageId: el\n            }\n          }\n        })\n        .catch(err => this.$message.error(err.message))\n    }\n  }\n  created(): void {\n    this.apiDeal = getRepository('deal', {\n      districtId: this.districtId\n    })\n\n    // this.init()\n  }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DealDragPage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DealDragPage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DealDragPage.vue?vue&type=template&id=271619f9&scoped=true&\"\nimport script from \"./DealDragPage.vue?vue&type=script&lang=ts&\"\nexport * from \"./DealDragPage.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DealDragPage.vue?vue&type=style&index=0&id=271619f9&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"271619f9\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}