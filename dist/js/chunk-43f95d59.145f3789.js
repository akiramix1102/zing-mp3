(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43f95d59"],{"19f6":function(e,t,a){"use strict";var r=a("276c"),i=a("e954"),s=a("920b"),n=a("92a6"),l=(a("caad"),a("2532"),a("9ab4")),o=a("1b40"),c=a("4bb5"),h=Object(c["a"])("beUser"),d=function(e){Object(s["a"])(a,e);var t=Object(n["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return Object(i["a"])(a,[{key:"memberLogin",get:function(){return this.user}},{key:"branchId",get:function(){return this.user.branchId}},{key:"memberId",get:function(){return this.user.id}},{key:"brandName",get:function(){return this.user.branchName}},{key:"memberFullName",get:function(){return this.user.fullName}},{key:"roleHOLEADERAmin",get:function(){var e=!1;return this.user.role&&(this.roleMembers.userRole.includes("HO_LEADER")||this.roleMembers.userRole.includes("HO_MEMBER")||this.roleMembers.userRole.includes("ADMIN"))&&(e=!0),e}},{key:"roleSaleMember",get:function(){var e=!1;return!this.roleMembers.userRole.includes("TRANSACTION_OFFICE_MEMBER")||this.roleOfficeLeaderMember||this.roleBranchMember||this.roleBranchLeader||this.roleHOLEADERAmin||(e=!0),e}},{key:"roleOfficeLeaderMember",get:function(){var e=!1;return!this.roleMembers.userRole.includes("TRANSACTION_OFFICE_LEADER")||this.roleBranchMember||this.roleBranchLeader||this.roleHOLEADERAmin||(e=!0),e}},{key:"roleBranchMember",get:function(){var e=!1;return!this.roleMembers.userRole.includes("BRANCH_MEMBER")||this.roleBranchLeader||this.roleHOLEADERAmin||(e=!0),e}},{key:"roleBranchLeader",get:function(){var e=!1;return this.roleMembers.userRole.includes("BRANCH_LEADER")&&!this.roleHOLEADERAmin&&(e=!0),e}}]),a}(o["d"]);Object(l["a"])([h.State("user")],d.prototype,"user",void 0),Object(l["a"])([h.State("role")],d.prototype,"roleMembers",void 0),d=Object(l["a"])([o["a"]],d),t["a"]=d},"5ee4":function(e,t,a){},"7cab":function(e,t,a){"use strict";var r=a("f3f3"),i=a("c964"),s=a("276c"),n=a("e954"),l=a("920b"),o=a("92a6"),c=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("99af"),a("9ab4")),h=a("08ba"),d=a("1b40"),u=function(e){Object(l["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.reportRes2=void 0,e.isExcelLoading=!1,e.isPdfLoading=!1,e}return Object(n["a"])(a,[{key:"handleExport",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,s,n,l,o,c,h,d=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=d.length>1&&void 0!==d[1]?d[1]:"excel",i=d.length>2?d[2]:void 0,d.length>3?d[3]:void 0,"excel"===a&&(this.isExcelLoading=!0),"pdf"===a&&(this.isPdfLoading=!0),e.prev=5,e.next=8,null===(s=this.reportRes2)||void 0===s?void 0:s.exportKpi(t,Object(r["a"])(Object(r["a"])({},i),{},{ext:"excel"==a?"xlsx":"pdf"}));case 8:n=e.sent,l=window.URL.createObjectURL(new Blob([n.data])),o=document.createElement("a"),o.href=l,c=new Date,h="".concat(c.getFullYear()).concat(c.getMonth()+1).concat(c.getDate()).concat(c.getHours()).concat(c.getMinutes()).concat(c.getMilliseconds()),o.setAttribute("download","KPI_".concat("member"==t?"CBNV":"DVKD","_").concat(h,".").concat("pdf"===a?"pdf":"xlsx")),document.body.appendChild(o),o.click(),this.isExcelLoading=!1,this.isPdfLoading=!1,e.next=26;break;case 21:e.prev=21,e.t0=e["catch"](5),404===e.t0.response.status&&this.$message.error("Không tìm thấy dữ liệu xuất file"),this.isExcelLoading=!1,this.isPdfLoading=!1;case 26:case"end":return e.stop()}}),e,this,[[5,21]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"created",value:function(){this.reportRes2=Object(h["a"])("report",{districtId:this.districtId})}}]),a}(d["d"]);u=Object(c["a"])([d["a"]],u),t["a"]=u},"8a5d":function(e,t,a){"use strict";a("8e69")},"8e69":function(e,t,a){},"8fba":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"report-page"},[a("base-tree-table",{staticClass:"PL9L table-expanded custom-table custom-table-height custom-kpi-cbnv",attrs:{data:e.data,isLoading:e.isLoading,table:e.table,filters:e.filters,showPagination:!0,showSummary:!0,summaryMethod:e.summaryMethod,"default-expand-all":!0,sumText:"Tổng",paginationInfo:"CBNV",rowKey:"id",emptyText:"Không có dữ liệu kpi"},on:{sizeChange:e.handleSizeChange,currentChange:e.handleCurrentChange,filterChange:e.handleFiltersChange},scopedSlots:e._u([{key:"header",fn:function(t){var r=t.filters,i=t.events;return a("div",{staticClass:"be-flex align-center header"},[a("report-filter",{staticClass:"be-flex-item",attrs:{filters:r},on:{change:i}}),a("div",{staticClass:"actions"},[a("el-button",{staticClass:"custom-button",attrs:{loading:e.isExcelLoading},on:{click:function(t){return e.handleExportFile("member","excel",r)}}},[a("span",{staticClass:"be-inline-flex align-center"},[a("base-icon",{staticClass:"icon",attrs:{icon:"excel-fullcolor"}}),e._v(" Xuất Excel ")],1)]),a("el-button",{staticClass:"custom-button",attrs:{loading:e.isPdfLoading},on:{click:function(t){return e.handleExportFile("member","pdf",r)}}},[a("span",{staticClass:"be-inline-flex align-center"},[a("base-icon",{staticClass:"icon",attrs:{icon:"pdf"}}),e._v(" Xuất PDF ")],1)])],1)],1)}}])},[a("el-table-column",{attrs:{label:"#",type:"index",align:"center",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+(e.table.page-1)*e.table.limit+1))]}}])}),a("el-table-column",{attrs:{label:"MÃ ĐVKD",prop:"transactionOfficeCode","min-width":"100px",align:"center"}}),a("el-table-column",{attrs:{label:"ĐƠN VỊ KINH DOANH",prop:"transactionOfficeName","min-width":"220px",align:"left"}}),a("el-table-column",{attrs:{label:"MÃ NV",prop:"memberNo","min-width":"120px",align:"left"}}),a("el-table-column",{attrs:{label:"TÊN CBNV",prop:"fullName","min-width":"180px",align:"left"}}),a("el-table-column",{staticClass:"style-nowrap",attrs:{label:"CHỈ TIÊU",prop:"mtargetAmount","min-width":"160px",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("formatNumber")(t.row.mtargetAmount))+" ")]}}])}),a("el-table-column",{attrs:{label:"KẾT QUẢ",prop:"mresultAmount","min-width":"150px",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("formatNumber")(t.row.mresultAmount))+" ")]}}])}),a("el-table-column",{attrs:{label:"TLHT",prop:"mresultPercent","min-width":"150px",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("formatPercent")(t.row.mresultPercent))+" ")]}}])})],1)],1)},i=[],s=a("f3f3"),n=a("c964"),l=a("276c"),o=a("e954"),c=a("920b"),h=a("92a6"),d=(a("96cf"),a("9ab4")),u=a("08ba"),b=a("2ef0"),m=a("1b40"),f=a("4bb5"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"report-filter"},[a("div",{staticClass:"be-flex align-center"},[a("el-input",{staticClass:"border-input input-width-beedu-prefix custom-report-input custom-input",attrs:{placeholder:e.searchPlaceholder},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("base-icon",{staticStyle:{"font-size":"12px"},attrs:{slot:"prefix",icon:"search"},slot:"prefix",model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("el-button",{staticClass:"be-button-unset custom-button mr-2",on:{click:e.handleClick}},[a("el-popover",{attrs:{placement:"bottom","popper-class":e.getScreen?"popper-filter-import popper-filter-import--screen":"popper-filter-import",width:"340",trigger:"click"},on:{show:e.handleShowPopper},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[a("div",{staticClass:"container"},[a("el-form",{ref:"filterForm",staticClass:"custom-report-form",attrs:{model:e.filters,"label-position":"top"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Năm"}},[a("el-date-picker",{staticClass:"filter-select",attrs:{type:"year",format:"yyyy",placeholder:"Chọn năm",clearable:""},model:{value:e.filters.kpiYear,callback:function(t){e.$set(e.filters,"kpiYear",t)},expression:"filters.kpiYear"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Tháng"}},[a("el-select",{attrs:{placeholder:"Tháng"},model:{value:e.filters.kpiMonth,callback:function(t){e.$set(e.filters,"kpiMonth",t)},expression:"filters.kpiMonth"}},e._l(12,(function(e){return a("el-option",{key:e,attrs:{label:"Tháng "+e,value:e}})})),1)],1)],1)],1),a("el-form-item",{attrs:{label:"Chỉ tiêu"}},[a("el-select",{staticClass:"filter-select",staticStyle:{"margin-right":"20px"},attrs:{placeholder:"Chỉ tiêu"},model:{value:e.filters.kpiCode,callback:function(t){e.$set(e.filters,"kpiCode",t)},expression:"filters.kpiCode"}},e._l(e.chitieu,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"Khu vực"}},[a("el-select",{staticClass:"filter-select",attrs:{size:"large",multiple:"",filterable:"",remote:"",placeholder:"Tìm khu vực","remote-method":function(t){return e.remoteMethod("areas",t)},loading:e.isLoading,disabled:e.disable.area},on:{change:function(t){return e.handleChange("change","areas",t)},"remove-tag":function(t){return e.handleChange("remove","areas",t)},clear:function(t){return e.handleChange("clear","areas",t)}},model:{value:e.filters.areaIdArray,callback:function(t){e.$set(e.filters,"areaIdArray",t)},expression:"filters.areaIdArray"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadAreas,expression:"loadAreas"}]},e._l(e.dataSelect.areas,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)])],1),a("el-form-item",{attrs:{label:"Chi nhánh"}},[a("el-select",{staticClass:"filter-select",attrs:{size:"large",multiple:"",filterable:"",remote:"",placeholder:"Tìm chi nhánh","remote-method":function(t){return e.remoteMethod("branches",t)},loading:e.isLoading,disabled:e.disable.branch},on:{change:function(t){return e.handleChange("change","branches",t)},"remove-tag":function(t){return e.handleChange("remove","branches",t)},clear:function(t){return e.handleChange("clear","branches",t)}},model:{value:e.filters.branchIdArray,callback:function(t){e.$set(e.filters,"branchIdArray",t)},expression:"filters.branchIdArray"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadBranches,expression:"loadBranches"}]},e._l(e.dataSelect.branches,(function(e){return a("el-option",{key:e.id,attrs:{label:e.locationCode+" - "+e.name,value:e.id}})})),1)])],1),a("el-form-item",{attrs:{label:"Đơn vị kinh doanh"}},[a("el-select",{staticClass:"filter-select",attrs:{size:"large",multiple:"",filterable:"",remote:"",placeholder:"Tìm đơn vị kinh doanh","remote-method":function(t){return e.remoteMethod("offices",t)},loading:e.isLoading,disabled:e.disable.office},on:{change:function(t){return e.handleChange("change","offices",t)},"remove-tag":function(t){return e.handleChange("remove","offices",t)},clear:function(t){return e.handleChange("clear","offices",t)}},model:{value:e.filters.transOfficeIdArray,callback:function(t){e.$set(e.filters,"transOfficeIdArray",t)},expression:"filters.transOfficeIdArray"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadOffices,expression:"loadOffices"}]},e._l(e.dataSelect.offices,(function(e){return a("el-option",{key:e.id,attrs:{label:e.locationCode+" - "+e.name,value:e.id}})})),1)])],1),a("el-form-item",{attrs:{label:"CBNV"}},[a("el-select",{staticClass:"filter-select",attrs:{size:"large",multiple:"",filterable:"",remote:"",placeholder:"Cán bộ nhân viên","remote-method":function(t){return e.remoteMethod("members",t)},loading:e.isLoading,disabled:e.disable.member},on:{change:function(t){return e.handleChange("change","members",t)},"remove-tag":function(t){return e.handleChange("remove","members",t)},clear:function(t){return e.handleChange("clear","members",t)}},model:{value:e.filters.memberIdArray,callback:function(t){e.$set(e.filters,"memberIdArray",t)},expression:"filters.memberIdArray"}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMembers,expression:"loadMembers"}]},e._l(e.dataSelect.members,(function(e){return a("el-option",{key:e.id,attrs:{label:e.memberNo+" - "+e.fullName,value:e.id}})})),1)])],1),a("el-form-item",{attrs:{label:"Tỷ lệ hoàn thành"}},[a("el-select",{staticClass:"filter-select",attrs:{placeholder:"Tất cả"},model:{value:e.filters.resultPercent,callback:function(t){e.$set(e.filters,"resultPercent",t)},expression:"filters.resultPercent"}},[a("el-option",{attrs:{value:"0",label:"Tất cả"}}),a("el-option",{attrs:{value:"1",label:"Từ 0% - 50%"}}),a("el-option",{attrs:{value:"2",label:"Từ 50% - 75%"}}),a("el-option",{attrs:{value:"3",label:"Từ 75% - 100%"}}),a("el-option",{attrs:{value:"4",label:"Từ 100% - 130%"}}),a("el-option",{attrs:{value:"5",label:"Trên 130%"}})],1)],1)],1)],1)],1)],1),a("div",{staticClass:"text-right footer"},[a("el-button",{staticClass:"group-filter-button",on:{click:function(t){return e.handleSubmit("reset")}}},[e._v("Mặc định")]),a("el-button",{staticClass:"be-button-danger group-filter-button",on:{click:e.handleSubmit}},[e._v("Áp dụng")])],1),a("div",{staticClass:"cursor text-filter",attrs:{slot:"reference"},slot:"reference"},[a("base-icon",{attrs:{icon:"filter"}}),e._v("Bộ lọc")],1)])],1),a("el-dropdown",{attrs:{trigger:"click",placement:"bottom-end","hide-timeout":500},on:{command:e.handleCommand}},[a("el-button",{staticClass:"be-button-unset custom-button text-filter"},[a("base-icon",{staticClass:"icon",attrs:{icon:"sort"}}),e._v(" Sắp xếp ")],1),a("el-dropdown-menu",{staticClass:"custom-report-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.sorts,(function(t,r){return a("el-dropdown-item",{key:r,class:{active:e.sortType===t.command},attrs:{command:t.command,divided:t.divided}},[a("span",{staticClass:"be-flex"},[a("span",{staticClass:"be-flex-item"},[e._v(" "+e._s(t.label)+" ")])])])})),1)],1)],1)])},g=[],v=a("d0ff"),y=(a("ac1f"),a("841c"),a("4de4"),a("7db0"),a("b0c0"),a("99af"),a("d3b7"),a("3ca3"),a("ddb0"),a("9f48")),k=a("19f6"),O=Object(f["a"])("beAudit"),C=function(e){Object(c["a"])(a,e);var t=Object(h["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.locationRes=void 0,e.isShow=!1,e.search="",e.groupFilters={kpiMonth:(new Date).getMonth()+1,kpiYear:(new Date).getFullYear(),kpiCode:"REVENUE_YEAR1"},e.filters={kpiMonth:(new Date).getMonth()+1,kpiYear:new Date,kpiCode:"REVENUE_YEAR1"},e.isLoading=!1,e.chitieu=[{id:0,label:"Chỉ tiêu doanh số FYP",value:"REVENUE_YEAR1"}],e.query={areas:{i:0,ps:20,search:""},branches:{i:0,ps:20,search:""},offices:{i:0,ps:20,search:""},members:{i:0,ps:20,limit:"",page:1,search:"",statusAccount:0,groupCode:"INSURANCE",sort:1}},e.dataSelect={areas:[],branches:[],offices:[],members:[]},e.sortType="",e.disable={area:!1,branch:!1,office:!1,member:!1},e.filter1=0,e.dataChange={areas:[],branches:[],offices:[],members:[]},e}return Object(o["a"])(a,[{key:"sorts",get:function(){return[{command:1,label:"Đơn vị kinh doanh",divided:!1},{command:3,label:"Chỉ tiêu",divided:!0},{command:4,label:"Kết quả",divided:!1},{command:5,label:"Tỷ lệ hoàn thành",divided:!1}]}},{key:"getScreen",get:function(){return window.screen.availHeight<=900}},{key:"checkChangOrRemove",value:function(e,t,a,r){if("change"===e&&a&&(this.dataChange[t].push(a),console.log(this.dataChange)),"remove"==e)if(this.dataChange[t]&&this.dataChange[t].length>0){var i=this.dataChange[t].filter((function(e){return e.id!=r}));this.dataChange[t]=i}else this.dataChange[t]=[]}},{key:"checkCode",value:function(e,t,a){var r={};r=this.dataSelect[t].find((function(e){return e.id==a})),this.checkChangOrRemove(e,t,r,a)}},{key:"handleChange",value:function(e,t,a){this.$forceUpdate();var r=a[a.length-1],i=this.getFilter(this.$route.name);null!==i&&void 0!==i&&i.data&&(this.dataChange=null===i||void 0===i?void 0:i.data),"clear"===e?this.dataChange[t]=[]:this.checkCode(e,t,r)}},{key:"watchSearch",value:function(e){this.searchText(e)}},{key:"searchText",value:function(e){var t,a;this.$emit("change",Object(b["assign"])(this.filters,{keywordString:e,orderByClause:this.sortType?this.sortType:null})),this.setReportFilter({contract:null===(t=this.$route)||void 0===t?void 0:t.name,filters:Object(b["assign"])(this.filters,{keywordString:this.search,orderByClause:this.sortType?this.sortType:null}),data:(null===(a=this.getFilter(this.$route.name))||void 0===a?void 0:a.data)||{}})}},{key:"handleClick",value:function(){this.isShow=!0}},{key:"handeChangeFilters",value:function(e){this.groupFilters=Object(s["a"])(Object(s["a"])({},this.groupFilters),e),console.log("when submit groupFilters",this.groupFilters),console.log("when submit filters",e)}},{key:"handleCommand",value:function(e){var t,a;this.sortType===e?this.sortType="":this.sortType=e,this.setReportFilter({contract:null===(t=this.$route)||void 0===t?void 0:t.name,filters:Object(s["a"])(Object(s["a"])({},this.filters),{},{orderByClause:this.sortType}),data:(null===(a=this.getFilter(this.$route.name))||void 0===a?void 0:a.data)||{}}),this.$emit("change",Object(s["a"])(Object(s["a"])({},this.filters),{},{orderByClause:this.sortType}))}},{key:"init",value:function(){this.roleSaleMember&&(this.disable.office=!0,this.disable.area=!0,this.disable.branch=!0,this.disable.member=!0,this.filters.memberIdArray=[this.memberLogin.id]),this.roleOfficeLeaderMember&&(this.disable.office=!0,this.disable.area=!0,this.disable.branch=!0,this.filters.areaIdArray=[this.memberLogin.areaId],this.filters.branchIdArray=[this.memberLogin.branchId],this.filters.transOfficeIdArray=[this.memberLogin.transactionOfficeId]),(this.roleBranchMember||this.roleBranchLeader)&&(this.disable.area=!0,this.disable.branch=!0,this.filters.areaIdArray=[this.memberLogin.areaId],this.filters.branchIdArray=[this.memberLogin.branchId])}},{key:"created",value:function(){this.locationRes=Object(u["a"])("location",{districtId:this.districtId}),this.apiEmployee=Object(u["a"])("employee",{districtId:this.districtId});var e=this.getFilter(this.$route.name);e&&(this.filters=Object(b["assign"])(this.filters,e.filters),this.search=this.filters.keywordString,this.sortType=this.filters.orderByClause),this.init(),this.$emit("change",Object(b["assign"])(this.filters,{keywordString:this.search,orderByClause:this.sortType?this.sortType:null}))}},{key:"searchMembers",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r,i,n,l,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=o.length>1&&void 0!==o[1]&&o[1],e.prev=1,!this.disable.member){e.next=7;break}r={id:this.memberLogin.id,memberNo:this.memberLogin.memberNo,fullName:this.memberLogin.fullName},this.dataSelect.members.push(r),e.next=12;break;case 7:return e.next=9,null===(i=this.apiEmployee)||void 0===i?void 0:i.getEmployeeList(Object(s["a"])(Object(s["a"])({},this.query.members),{},{search:Object(b["trim"])(t)}));case 9:n=e.sent,a?(l=n.data||[],this.dataSelect.members=[].concat(Object(v["a"])(this.dataSelect.members),Object(v["a"])(l))):this.dataSelect.members=n.data||[],this.isLoading=!1;case 12:e.next=19;break;case 14:e.prev=14,e.t0=e["catch"](1),this.isLoading=!1,this.dataSelect.members=[],this.disable.member&&this.dataSelect.members.push({id:this.memberId,memberNo:this.user.memberNo,fullName:this.user.fullName});case 19:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"searchArea",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r,i,s,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]&&n[1],e.prev=1,e.next=4,null===(r=this.locationRes)||void 0===r?void 0:r.list("area",{search:Object(b["trim"])(t),i:this.query.areas.i,ps:this.query.areas.ps});case 4:i=e.sent,a?(s=i||[],this.dataSelect.areas=[].concat(Object(v["a"])(this.dataSelect.areas),Object(v["a"])(s))):this.dataSelect.areas=i||[],this.disable.branch&&this.dataSelect.areas.push({id:this.memberLogin.areaId,locationCode:this.memberLogin.areaCode,name:this.memberLogin.areaName}),this.isLoading=!1,e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](1),this.isLoading=!1,this.dataSelect.areas=[],this.disable.branch&&this.dataSelect.areas.push({id:this.memberLogin.locationId,locationCode:this.memberLogin.locationCode,name:this.memberLogin.locationName});case 15:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"searchBranch",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r,i,s,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=n.length>1&&void 0!==n[1]&&n[1],e.prev=1,!this.disable.branch){e.next=6;break}this.dataSelect.branches.push({id:this.memberLogin.branchId,locationCode:this.memberLogin.branchCode,name:this.memberLogin.branchName}),e.next=11;break;case 6:return e.next=8,null===(r=this.locationRes)||void 0===r?void 0:r.list("branch",{search:Object(b["trim"])(t),i:this.query.branches.i,ps:this.query.branches.ps});case 8:i=e.sent,a?(s=i||[],this.dataSelect.branches=[].concat(Object(v["a"])(this.dataSelect.branches),Object(v["a"])(s))):this.dataSelect.branches=i||[],this.isLoading=!1;case 11:e.next=18;break;case 13:e.prev=13,e.t0=e["catch"](1),this.isLoading=!1,this.dataSelect.branches=[],this.disable.branch&&this.dataSelect.branches.push({id:this.memberLogin.branchId,locationCode:this.memberLogin.branchCode,name:this.memberLogin.branchName});case 18:case"end":return e.stop()}}),e,this,[[1,13]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"searchOffice",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r,i,s,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=n.length>1&&void 0!==n[1]&&n[1],e.prev=1,!this.disable.office){e.next=6;break}this.dataSelect.offices.push({id:this.memberLogin.transactionOfficeId,locationCode:this.memberLogin.transactionOfficeCode,name:this.memberLogin.transactionOfficeName}),e.next=11;break;case 6:return e.next=8,null===(r=this.locationRes)||void 0===r?void 0:r.list("office",{search:Object(b["trim"])(t),i:this.query.offices.i,ps:this.query.offices.ps});case 8:i=e.sent,a?(s=i||[],this.dataSelect.offices=[].concat(Object(v["a"])(this.dataSelect.offices),Object(v["a"])(s))):this.dataSelect.offices=i||[],this.isLoading=!1;case 11:e.next=18;break;case 13:e.prev=13,e.t0=e["catch"](1),this.isLoading=!1,this.dataSelect.offices=[],this.disable.office&&this.dataSelect.offices.push({id:this.memberLogin.locationId,locationCode:this.memberLogin.locationCode,name:this.memberLogin.locationName});case 18:case"end":return e.stop()}}),e,this,[[1,13]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleShowPopper",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$forceUpdate(),a=this.getFilter(null===(t=this.$route)||void 0===t?void 0:t.name),a&&a.data&&(console.log("show",a.data),this.dataSelect=Object(s["a"])(Object(s["a"])({},this.dataSelect),a.data)),e.next=5,Promise.all([this.searchArea(""),this.searchBranch(""),this.searchOffice(""),this.searchMembers("")]);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"resetData",value:function(){this.$refs.filterForm.clearValidate(),this.filters.resultPercent="",this.roleSaleMember||this.roleOfficeLeaderMember||this.roleBranchMember||this.roleBranchLeader?(this.roleSaleMember&&(this.filters.areaIdArray=[],this.filters.branchIdArray=[],this.filters.transOfficeIdArray=[]),this.roleOfficeLeaderMember&&(this.filters.memberIdArray=[]),(this.roleBranchMember||this.roleBranchLeader)&&(this.filters.transOfficeIdArray=[],this.filters.memberIdArray=[])):this.filters={kpiMonth:(new Date).getMonth()+1,kpiYear:new Date,kpiCode:"REVENUE_YEAR1",keywordString:this.search?this.search:null,orderByClause:this.sortType?this.sortType:null}}},{key:"remoteMethod",value:function(e,t){var a;switch(this.isLoading=!0,this.query[e].search=Object(b["trim"])(t),this.query[e].i=0,this.query[e].ps=20,e){case"areas":a=Object(b["debounce"])(this.searchArea,500);break;case"branches":a=Object(b["debounce"])(this.searchBranch,500);break;case"members":a=Object(b["debounce"])(this.searchMembers,500);break;case"offices":a=Object(b["debounce"])(this.searchOffice,500);break;default:break}a(t)}},{key:"loadAreas",value:function(){if(Object(b["size"])(this.dataSelect.areas)===this.query.areas.i+this.query.areas.ps){this.query.areas.i=Object(b["size"])(this.dataSelect.areas);var e=Object(b["debounce"])(this.searchArea,500);e(this.query.areas.search,!0)}}},{key:"loadBranches",value:function(){if(Object(b["size"])(this.dataSelect.branches)===this.query.branches.i+this.query.branches.ps){this.query.branches.i=Object(b["size"])(this.dataSelect.branches);var e=Object(b["debounce"])(this.searchBranch,500);e(this.query.branches.search,!0)}}},{key:"loadOffices",value:function(){if(console.log(1),Object(b["size"])(this.dataSelect.offices)===this.query.offices.i+this.query.offices.ps){this.query.offices.i=Object(b["size"])(this.dataSelect.offices);var e=Object(b["debounce"])(this.searchOffice,500);e(this.query.offices.search,!0)}}},{key:"loadMembers",value:function(){if(Object(b["size"])(this.dataSelect.members)===this.query.members.i+this.query.members.ps){this.query.members.i=Object(b["size"])(this.dataSelect.members);var e=Object(b["debounce"])(this.searchMembers,500);e(this.query.members.search,!0)}}},{key:"handleSubmit",value:function(e){var t;"reset"!==e?(this.isShow=!1,this.setReportFilter({contract:null===(t=this.$route)||void 0===t?void 0:t.name,filters:Object(s["a"])({},this.filters),data:this.dataChange}),console.log("submit",this.dataChange),this.$emit("change",this.filters)):this.resetData()}},{key:"handleChangeKpiCode",value:function(){}}]),a}(Object(m["b"])(y["a"],k["a"]));Object(d["a"])([Object(m["c"])({required:!1,type:String,default:"Tìm kiếm..."})],C.prototype,"searchPlaceholder",void 0),Object(d["a"])([O.Action("setReportFilter")],C.prototype,"setReportFilter",void 0),Object(d["a"])([O.Getter("getFilter")],C.prototype,"getFilter",void 0),Object(d["a"])([Object(m["e"])("search",{immediate:!1})],C.prototype,"watchSearch",null),C=Object(d["a"])([Object(m["a"])({components:{}})],C);var j=C,x=j,w=(a("8a5d"),a("2877")),L=Object(w["a"])(x,p,g,!1,null,"1cc027bd",null),S=L.exports,A=a("7cab"),R=Object(f["a"])("beAudit"),I=function(e){Object(c["a"])(a,e);var t=Object(h["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.data=[],e.filters={kpiMonth:(new Date).getMonth()+1,kpiYear:new Date,kpiCode:"REVENUE_YEAR1"},e.table={total:0,page:1,limit:20},e.isLoading=!1,e.tableHeight="auto",e.reportRes=void 0,e.summary={},e.debounceFilter=Object(b["debounce"])((function(){e.init()}),600),e}return Object(o["a"])(a,[{key:"indexMethod",value:function(e){return this.table.limit*(this.table.page-1)+e}},{key:"handleLoad",value:function(e,t,a){setTimeout(Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a([]);case 1:case"end":return e.stop()}}),e)}))),500)}},{key:"init",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{this.isLoading=!0,t=Object(s["a"])({},this.filters),this.roleSaleMember&&delete t.memberIdArray,this.roleOfficeLeaderMember&&(delete t.areaIdArray,delete t.branchIdArray,delete t.transOfficeIdArray),(this.roleBranchMember||this.roleBranchLeader)&&(delete t.areaIdArray,delete t.branchIdArray),this.getSummary(t),this.getData(t),this.isLoading=!1}catch(a){this.isLoading=!1}case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"summaryMethod",value:function(e){var t=this,a=e.columns,r=[];return Object(b["forEach"])(a,(function(e,a){if(a<4)r[a]="";else if(4!==a){var i=t.summary[e.property]||0;r[a]="".concat(Object(b["includes"])(e.property,"Percent")?t.$options.filters.formatPercent(i):t.$options.filters.formatNumber(i))}else r[a]="Tổng"})),r}},{key:"getData",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(a=this.reportRes)||void 0===a?void 0:a.getReportByType("member",Object(b["assign"])(t,{pageSize:this.table.limit,pageNo:this.table.page}));case 3:r=e.sent,this.data=r||[],e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSummary",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(a=this.reportRes)||void 0===a?void 0:a.getSummaryByType("member",Object(b["assign"])(t,{pageSize:this.table.limit,pageNo:this.table.page}));case 3:i=e.sent,this.summary=i||{},this.table.total=null===(r=this.summary)||void 0===r?void 0:r.total,console.log("result",i),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleSizeChange",value:function(e){this.table.limit=e,this.table.page=1,this.init()}},{key:"handleCurrentChange",value:function(e){this.table.page=e,this.init()}},{key:"handleFiltersChange",value:function(e){this.filters=Object(s["a"])({},e),this.table.page=1,this.debounceFilter()}},{key:"getHeightOfTable",value:function(){this.tableHeight="".concat(window.innerHeight-233,"px")}},{key:"mounted",value:function(){this.getHeightOfTable()}},{key:"created",value:function(){this.reportRes=Object(u["a"])("report",{districtId:this.districtId})}},{key:"handleExportFile",value:function(e,t,a,r){if(0===this.data.length)this.$message.error("Không tìm thấy dữ  liệu xuất file");else{var i=Object(s["a"])({},this.filters);this.roleSaleMember&&delete i.memberIdArray,this.roleOfficeLeaderMember&&(delete i.areaIdArray,delete i.branchIdArray,delete i.transOfficeIdArray),(this.roleBranchMember||this.roleBranchLeader)&&(delete i.areaIdArray,delete i.branchIdArray),this.handleExport(e,t,i,r)}}}]),a}(Object(m["b"])(A["a"],k["a"]));Object(d["a"])([R.Getter("getFilter")],I.prototype,"getFilter",void 0),I=Object(d["a"])([Object(m["a"])({components:{ReportFilter:S}})],I);var M=I,E=M,N=(a("9030"),Object(w["a"])(E,r,i,!1,null,"509c9c59",null));t["default"]=N.exports},9030:function(e,t,a){"use strict";a("5ee4")}}]);
//# sourceMappingURL=chunk-43f95d59.145f3789.js.map